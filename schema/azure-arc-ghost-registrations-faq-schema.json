{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What are Azure Arc ghost registrations?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Azure Arc ghost registrations are Arc-enabled server records in Azure that represent VMs or physical servers that no longer exist in your on-premises environment. Common causes: (1) VM deleted from VMware vCenter without uninstalling Arc agent first, (2) Physical server decommissioned without Azure cleanup, (3) VM snapshot restored to earlier state before Arc registration, (4) VM template cloned without proper sysprep creating duplicate registrations. Ghost registrations typically account for 40-70% of Arc inventory in enterprises using manual agent deployment. These phantom machines distort governance reporting, inflate license counts, trigger false security alerts, and waste Azure Policy evaluation cycles. Azure Arc Resource Bridge with vCenter integration prevents ghost registrations by automatically removing Arc records when VMs are deleted from vCenter."
      }
    },
    {
      "@type": "Question",
      "name": "How do I detect Azure Arc ghost registrations?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Detect Arc ghost registrations by reconciling Azure Arc inventory against source systems: (1) Export Arc inventory via KQL query: Resources | where type == 'microsoft.hybridcompute/machines' | project name, resourceGroup, location. (2) Export VMware inventory using RVTools or PowerCLI Get-VM cmdlet. (3) Compare lists to identify Arc machines not in VMware (ghosts) and VMware VMs not in Arc (missing coverage). (4) Check Arc heartbeat status - machines showing 'Disconnected' for 30+ days are likely ghosts. (5) Validate DNS resolution - ghost machines often have stale DNS records or unreachable IP addresses. Automated reconciliation using Python or PowerShell should run monthly. Expected ghost rate: 10-15% normal churn, 40-70% indicates systemic cleanup issues. Power BI dashboards can visualize Arc vs VMware discrepancies for ongoing monitoring."
      }
    },
    {
      "@type": "Question",
      "name": "Why does manual Azure Arc agent deployment create ghost registrations?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Manual Arc agent deployment creates ghost registrations because Azure has no visibility into VMware/Hyper-V lifecycle events. When you install Arc agents via script deployment, Azure creates Arc-enabled server records in your subscription. When a VM admin deletes that VM from vCenter, VMware removes the VM but Azure has no automatic mechanism to delete the corresponding Arc record. The Arc agent cannot send a 'delete me' signal because the VM (and agent) no longer exists. This architectural gap affects ALL manual Arc deployments: GPO-based rollouts, Intune deployment, PowerShell scripts, and configuration management tools. Azure Arc Resource Bridge solves this by integrating directly with vCenter APIs - when you delete a VM in vCenter, Resource Bridge automatically removes the Arc record within 5-10 minutes. Migration from manual agents to Resource Bridge reduces ghost registration rate from 64% to under 5%."
      }
    },
    {
      "@type": "Question",
      "name": "How do I clean up Azure Arc ghost registrations at scale?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Clean up Arc ghost registrations using this four-step process: (1) Identify candidates: Query Arc machines with Disconnected status for 30+ days or machines not in VMware reconciliation. (2) Validate ghosts: Attempt DNS resolution and ping test - if unreachable and not in VMware, mark for deletion. (3) Document for audit: Export list with machine name, last heartbeat, resource group, subscription before deletion. (4) Bulk delete: Use PowerShell Remove-AzConnectedMachine or Azure CLI 'az connectedmachine delete' in batches of 50-100. Critical: Don't delete recently disconnected machines (under 30 days) - these might be legitimately offline for patching or network issues. Keep deletion logs for compliance audits. Expected cleanup: 200-400 ghost registrations in environments with 500-1000 on-premises machines. Re-run reconciliation monthly to prevent ghost accumulation. Post-cleanup, implement Azure Arc Resource Bridge to prevent future ghosts."
      }
    },
    {
      "@type": "Question",
      "name": "What is Azure Arc Resource Bridge and how does it prevent ghost registrations?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Azure Arc Resource Bridge is a Kubernetes-based appliance deployed in your VMware or Hyper-V environment that provides bidirectional synchronization between Azure and on-premises virtualization platforms. For VMware, Resource Bridge connects to vCenter APIs and monitors VM lifecycle events (create, modify, delete). When you delete a VM in vCenter, Resource Bridge automatically: (1) Detects the vCenter deletion event within seconds, (2) Removes the corresponding Arc-enabled server record from Azure within 5-10 minutes, (3) Cleans up associated Azure resources like extensions and tags. This eliminates ghost registrations at the source. Resource Bridge also auto-discovers new VMs and provides Azure Portal VM management (start/stop/resize) directly from Azure. Trade-offs: Resource Bridge requires dedicated appliance resources (8 vCPU, 24GB RAM), vCenter 6.7+ or Hyper-V 2019+, and network connectivity between Azure and vCenter. Migration from manual agents to Resource Bridge is non-disruptive and reduces ghost registration rate from 40-70% to under 5%."
      }
    },
    {
      "@type": "Question",
      "name": "How often should I reconcile Azure Arc inventory with on-premises systems?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Reconcile Azure Arc inventory monthly as minimum best practice, with weekly reconciliation recommended for dynamic environments (high VM churn, frequent provisioning/decommissioning). Reconciliation frequency depends on: (1) VM lifecycle velocity - environments creating/deleting 50+ VMs per month need weekly checks, (2) Compliance reporting requirements - SOC 2 and ISO 27001 audits expect accurate inventory, (3) Azure Policy impact - ghost registrations trigger false policy violations, (4) Cost optimization - Arc-enabled servers incur per-machine costs regardless of heartbeat status. Automated reconciliation process: Export Arc inventory via KQL, export VMware inventory via RVTools or PowerCLI, compare datasets programmatically, generate remediation list, review with infrastructure team, execute bulk deletions. Store reconciliation results in SharePoint or Git for audit trail. Expected time investment: 2-4 hours per month for 1000-VM environment. Automation reduces this to 30 minutes. Post-Resource Bridge implementation, reduce reconciliation to quarterly validation."
      }
    }
  ]
}
