<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  
  
  

  <!-- Primary SEO -->
  <title>Azure Update Manager Reality Check: Why 77% of Your VMs Are Unsupported ¬∑ Azure Noob</title>
  <meta name="description" content="What Azure Update Manager really looks like in an enterprise: agent confusion, SCCM overlap, and how to make patching governance work.">
  
  <link rel="canonical" href="https://azure-noob.com/blog/azure-update-manager-reality-check/" />

  <!-- Favicons -->
  <link rel="icon" href="/static/images/logo.png">

  <!-- Open Graph -->
  <meta property="og:title" content="Azure Update Manager Reality Check: Why 77% of Your VMs Are Unsupported">
  <meta property="og:description" content="What Azure Update Manager really looks like in an enterprise: agent confusion, SCCM overlap, and how to make patching governance work.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://azure-noob.com/blog/azure-update-manager-reality-check/">
  <meta property="og:image" content="https://azure-noob.com/static/images/hero/azure-update-manager-reality-check.png">

  
    <meta property="article:published_time" content="2025-09-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-09-24T00:00:00+00:00">
    <meta property="article:author" content="David Swann">
    
      
        <meta property="article:tag" content="Azure">
      
        <meta property="article:tag" content="Azure Governance">
      
        <meta property="article:tag" content="Azure Update Manager">
      
        <meta property="article:tag" content="Governance">
      
        <meta property="article:tag" content="KQL">
      
        <meta property="article:tag" content="Monitoring">
      
        <meta property="article:tag" content="Operations">
      
        <meta property="article:tag" content="Patching">
      
        <meta property="article:tag" content="Update Management">
      
        <meta property="article:tag" content="Update Manager">
      
        <meta property="article:tag" content="VM Management">
      
    
  

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Azure Update Manager Reality Check: Why 77% of Your VMs Are Unsupported">
  <meta name="twitter:description" content="What Azure Update Manager really looks like in an enterprise: agent confusion, SCCM overlap, and how to make patching governance work.">
  <meta name="twitter:image" content="https://azure-noob.com/static/images/hero/azure-update-manager-reality-check.png">

  <!-- Styles -->
  <link rel="stylesheet" href="/static/styles.css">

  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="Azure Noob RSS Feed" href="https://azure-noob.com/rss.xml">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNHGEB0BNZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZNHGEB0BNZ');
  </script>
</head>
<body>
  <header class="site-header">
    <div class="wrap nav-wrap">
      <div class="brand-block">
        <a href="/" class="brand-link">
          <img src="/static/images/logo.png" alt="Azure Noob logo" class="logo">
        </a>
        <span class="brand-text">
          <small>Official Website of</small>
          <strong>Azure Noob</strong>
        </span>
      </div>
      <nav class="nav">
        <a href="/">Home</a>
        <a href="/blog/">Blog</a>
        <a href="/hubs/" style="font-weight: 700;">Content Hubs</a>
        <a href="/products/" style="font-weight: 700; color: #ff6b6b;">Products</a>
        <a href="/start-here/">Start Here</a>
        <a href="/blog/starter-kit/">Starter Kit</a>
        <a href="/about/">About</a>
        <a href="/tags/">Tags</a>
        <a href="https://github.com/dswann101164" target="_blank" rel="noopener">GitHub</a>
        <a href="/search/">Search</a>
      </nav>
    </div>
  </header>

  <main class="site-content">
    <div class="wrap">
      


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Azure Update Manager Reality Check: Why 77% of Your VMs Are Unsupported",
  "description": "What Azure Update Manager really looks like in an enterprise: agent confusion, SCCM overlap, and how to make patching governance work.",
  "image": {
    "@type": "ImageObject",
    "url": "https://azure-noob.com/static/images/hero/azure-update-manager-reality-check.png",
    "width": 1200,
    "height": 630
  },
  "author": {
    "@type": "Person",
    "name": "David Swann",
    "url": "https://azure-noob.com/about/",
    "description": "Azure Architect specializing in enterprise cloud infrastructure",
    "jobTitle": "Azure Architect",
    "worksFor": {
      "@type": "Organization",
      "name": "Synovus"
    }
  },
  "publisher": {
    "@type": "Organization",
    "name": "Azure Noob",
    "url": "https://azure-noob.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://azure-noob.com/static/images/logo.png"
    }
  },
  "datePublished": "2025-09-24T00:00:00+00:00",
  "dateModified": "2025-09-24T00:00:00+00:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://azure-noob.com/blog/azure-update-manager-reality-check/"
  },
  "keywords": "Azure, Azure Governance, Azure Update Manager, Governance, KQL, Monitoring, Operations, Patching, Update Management, Update Manager, VM Management",
  "articleSection": "Azure",
  "wordCount": "1474",
  "timeRequired": "PT7M",
  "inLanguage": "en-US",
  "isAccessibleForFree": "True",
  "about": {
    "@type": "Thing",
    "name": "Azure"
  }
}
</script>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://azure-noob.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Blog",
      "item": "https://azure-noob.com/blog/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Azure Update Manager Reality Check: Why 77% of Your VMs Are Unsupported",
      "item": "https://azure-noob.com/blog/azure-update-manager-reality-check/"
    }
  ]
}
</script>







<article class="post">

  
  
    
    <div class="hero">
      <img src="/static/images/hero/azure-update-manager-reality-check.png" alt="Azure Update Manager Reality Check: Why 77% of Your VMs Are Unsupported" loading="eager">
    </div>
  

  <header class="post-header">
    <h1>Azure Update Manager Reality Check: Why 77% of Your VMs Are Unsupported</h1>
    <p class="muted">
      2025-09-24 ¬∑ ~7 min read
      
    </p>
    
    
    <ul class="tags-list">
      
      <li><a href="/tags/Azure/" class="tag-badge">Azure</a></li>
      
      <li><a href="/tags/Azure%20Governance/" class="tag-badge">Azure Governance</a></li>
      
      <li><a href="/tags/Azure%20Update%20Manager/" class="tag-badge">Azure Update Manager</a></li>
      
      <li><a href="/tags/Governance/" class="tag-badge">Governance</a></li>
      
      <li><a href="/tags/KQL/" class="tag-badge">KQL</a></li>
      
      <li><a href="/tags/Monitoring/" class="tag-badge">Monitoring</a></li>
      
      <li><a href="/tags/Operations/" class="tag-badge">Operations</a></li>
      
      <li><a href="/tags/Patching/" class="tag-badge">Patching</a></li>
      
      <li><a href="/tags/Update%20Management/" class="tag-badge">Update Management</a></li>
      
      <li><a href="/tags/Update%20Manager/" class="tag-badge">Update Manager</a></li>
      
      <li><a href="/tags/VM%20Management/" class="tag-badge">VM Management</a></li>
      
    </ul>
    
    
    
      <p class="summary">What Azure Update Manager really looks like in an enterprise: agent confusion, SCCM overlap, and how to make patching governance work.</p>
    
  </header>

  
  <p class="post-actions" style="margin:.5rem 0 0; text-align: center;">
    <button class="btn"
            onclick="window.print(); return false;"
            title="Print this page"
            aria-label="Print this page"
            style="cursor: pointer; background: none; border: 2px solid var(--azure-blue);">
      üñ®Ô∏è Print this page
    </button>
  </p>

  
  <div class="post-body">
    <p>This guide is part of our <a href="/hub/governance/">Azure Governance hub</a> covering policy enforcement, compliance frameworks, and enterprise controls.</p>
<h1>Azure Update Manager Reality Check: Why 77% of Your VMs Are Unsupported</h1>
<p>When I first opened Azure Update Manager, I nearly had a heart attack. The dashboard cheerfully informed me that <strong>1,791 virtual machines</strong> needed attention. As someone responsible for keeping our Azure environment secure and compliant, seeing that number felt like staring down an impossible task.</p>
<p>Here's what I wish someone had told me on day one: <strong>that number is completely misleading</strong>.</p>
<p>After digging deep into our environment, running queries, and actually understanding what Azure Update Manager can and can't handle, I discovered the uncomfortable truth: <strong>only 348 of those 1,791 VMs should actually be managed by Azure Update Manager</strong>. That's 77% of our environment that shouldn't be there in the first place.</p>
<p>If you're facing a similar shock when you open Azure Update Manager, this post will save you weeks of confusion and help you focus on what actually matters.</p>
<h2>The Problem: Azure Update Manager Shows Everything</h2>
<p>Azure Update Manager has a dirty little secret: it displays every single VM it can see, regardless of whether it should manage that VM or not. It doesn't understand that your environment is complex. It doesn't know about your Citrix VDI infrastructure, your Databricks clusters, or your security appliances that should never be touched by automated updates.</p>
<p><img alt="Azure Update Manager Dashboard showing 1,791 VMs" src="/static/images/azure-update-manager-before.png" /></p>
<p>Looking at this dashboard, my first instinct was panic. How could we possibly manage updates for nearly 1,800 virtual machines? Where do we even start?</p>
<p>The answer: we don't. Because most of these VMs are being managed by other tools, are specialized appliances, or simply aren't suitable for Azure Update Manager.</p>
<h2>The Reality: Most VMs Have Better Update Methods</h2>
<p>Here's the breakdown of our "1,791 VMs that need updates":</p>
<table>
<thead>
<tr>
<th>Platform Type</th>
<th>Count</th>
<th>Update Method</th>
<th>Responsible Team</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Citrix VDI</strong></td>
<td>~900 VMs</td>
<td>Intune</td>
<td>Citrix Team</td>
</tr>
<tr>
<td><strong>Azure Databricks</strong></td>
<td>~170 VMs</td>
<td>Azure Databricks Solution</td>
<td>Databricks Team</td>
</tr>
<tr>
<td><strong>Windows Desktop OS</strong></td>
<td>44 VMs</td>
<td>Intune</td>
<td>Desktop Team</td>
</tr>
<tr>
<td><strong>Security Appliances</strong></td>
<td>46 VMs</td>
<td>Vendor Updates</td>
<td>Security Team</td>
</tr>
<tr>
<td><strong>Network Appliances</strong></td>
<td>20 VMs</td>
<td>Vendor Updates</td>
<td>Network Team</td>
</tr>
<tr>
<td><strong>Other Appliances</strong></td>
<td>7 VMs</td>
<td>Vendor Updates</td>
<td>Various Teams</td>
</tr>
<tr>
<td><strong>TOTAL UNSUPPORTED</strong></td>
<td><strong>~1,187 VMs</strong></td>
<td><strong>Various Methods</strong></td>
<td><strong>Multiple Teams</strong></td>
</tr>
</tbody>
</table>
<p><strong>The real number of VMs that should use Azure Update Manager? 348.</strong></p>
<p>That's a 77% reduction from what the dashboard initially showed us. Suddenly, the task went from "impossible" to "manageable."</p>
<h2>Why This Happens: Azure Update Manager Doesn't Understand Context</h2>
<p>Azure Update Manager is designed to be simple: "Hey, there are VMs here, they probably need updates!" But enterprise environments are anything but simple.</p>
<p><strong>Citrix VDI Systems (900 VMs):</strong> These are managed through Intune with carefully orchestrated update schedules that coordinate with user sessions. Azure Update Manager would break this process.</p>
<p><strong>Azure Databricks (170 VMs):</strong> These are ephemeral compute clusters managed by the Databricks service itself. They get updated as part of the cluster lifecycle, not through traditional patching.</p>
<p><strong>Security Appliances (46 VMs):</strong> Firewalls, intrusion detection systems, and other security tools require vendor-specific update procedures. One wrong automatic update could take down your entire network security posture.</p>
<p><strong>Desktop VMs (44 VMs):</strong> Windows 10/11 virtual desktops are managed through Intune with different policies than servers. They need user-focused update schedules, not server maintenance windows.</p>
<p><strong>The lesson:</strong> Just because Azure Update Manager can see a VM doesn't mean it should manage that VM.</p>
<h2>The Solution: KQL Queries to Find Your Real Targets</h2>
<p>Instead of trying to manage all 1,791 VMs, I used Azure Resource Graph queries to identify which systems should actually be excluded from Azure Update Manager.</p>
<h3>Query 1: Identify Unsupported Systems</h3>
<p>This query finds all the VMs that should be managed by other tools:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">storageProfile</span><span class="err">.</span><span class="n">imageReference</span><span class="err">.</span><span class="n">publisher</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">rgName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">resourceGroup</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">publisher</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;AzureDatabricks&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tenable&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;paloaltonetworks&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MicrosoftWindowsDesktop&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">or</span>
<span class="w">        </span><span class="n">subscriptionDisplayName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;Citrix&quot;</span><span class="w"> </span><span class="k">or</span>
<span class="w">        </span><span class="n">rgName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;citrix&quot;</span><span class="w"> </span><span class="k">or</span>
<span class="w">        </span><span class="n">rgName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;databricks&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">VMName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">Publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">publisher</span><span class="p">,</span><span class="w"> </span><span class="n">Subscription</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">subscriptionDisplayName</span><span class="p">,</span><span class="w"> </span><span class="n">ResourceGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">rgName</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">Subscription</span><span class="p">,</span><span class="w"> </span><span class="n">ResourceGroup</span><span class="p">,</span><span class="w"> </span><span class="n">VMName</span>
</code></pre></div>

<p>This query identified our 1,187 unsupported systems by looking for:<br />
- <strong>Publisher patterns</strong>: Databricks VMs, security appliances, Windows Desktop images<br />
- <strong>Subscription patterns</strong>: Anything with "Citrix" in the subscription name<br />
- <strong>Resource group patterns</strong>: Groups containing "citrix" or "databricks"</p>
<h3>Query 2: Count Unsupported Systems by Type</h3>
<p>To understand the scope of what we're excluding:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">storageProfile</span><span class="err">.</span><span class="n">imageReference</span><span class="err">.</span><span class="n">publisher</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">rgName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">resourceGroup</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">publisher</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;AzureDatabricks&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tenable&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;paloaltonetworks&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MicrosoftWindowsDesktop&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">or</span>
<span class="w">        </span><span class="n">subscriptionDisplayName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;Citrix&quot;</span><span class="w"> </span><span class="k">or</span>
<span class="w">        </span><span class="n">rgName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;citrix&quot;</span><span class="w"> </span><span class="k">or</span>
<span class="w">        </span><span class="n">rgName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;databricks&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">count</span><span class="p">(),</span><span class="w"> </span><span class="n">VMNames</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">make_list</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">publisher</span><span class="p">,</span><span class="w"> </span><span class="n">subscriptionDisplayName</span><span class="p">,</span><span class="w"> </span><span class="n">rgName</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

<p>This showed us exactly where our unsupported VMs were concentrated and helped validate our filtering logic.</p>
<h2>The Filter Effect: From Chaos to Clarity</h2>
<p>After applying these filters in Azure Update Manager (by excluding the problematic resource groups and subscriptions), the dashboard transformation was dramatic:</p>
<p><strong>Before filtering:</strong> 1,791 VMs<br />
<strong>After filtering:</strong> 348 VMs</p>
<p><img alt="Azure Update Manager Dashboard after filtering" src="/static/images/azure-update-manager-after.png" /></p>
<p>Suddenly, Azure Update Manager became a useful tool instead of an overwhelming problem. We went from "How do we handle 1,800 VMs?" to "Here are the 348 VMs we actually need to focus on."</p>
<h2>The Business Impact: Focus on What Matters</h2>
<p>This filtering approach delivered immediate business value:</p>
<p><strong>Risk Reduction:</strong> We eliminated the risk of accidentally updating critical appliances or breaking carefully managed VDI environments.</p>
<p><strong>Resource Optimization:</strong> Our team could focus on 348 VMs instead of trying to understand 1,791 different systems.</p>
<p><strong>Clear Accountability:</strong> Each system type has a clear owner and update methodology. No more confusion about who's responsible for what.</p>
<p><strong>Realistic Planning:</strong> Update schedules and maintenance windows became manageable when scoped to the right systems.</p>
<h2>Key Takeaways for Your Environment</h2>
<p><strong>Don't trust the initial numbers:</strong> Azure Update Manager will show you every VM it can see. Most of them probably shouldn't be there.</p>
<p><strong>Understand your ecosystem:</strong> Map out which tools are already managing updates for different system types. Don't create duplicate or conflicting processes.</p>
<p><strong>Use filtering aggressively:</strong> Azure Update Manager works best when it's focused on systems that actually belong there.</p>
<p><strong>Document your exclusions:</strong> Keep track of why certain VMs are excluded so future team members understand the decisions.</p>
<h2>What's Next: Making the 348 VMs Actually Automated</h2>
<p>Having identified our real target VMs is just the first step. In my next post, I'll show you why those 348 VMs still aren't being updated automatically, even with Azure Update Manager policies in place, and the missing piece that most Azure documentation doesn't tell you about.</p>
<p>The short version: policies configure VMs for automation, but they don't actually schedule when updates happen. That requires maintenance configurations, and there's a gap between the two that catches most administrators off guard.</p>
<hr />
<p><strong>Want to audit your own environment?</strong> Copy the KQL queries above and run them in Azure Resource Graph Explorer. You might be surprised by how many of your "problem VMs" are actually being managed perfectly well by other tools.</p>
<p><em>Next in this series: "The Azure Update Manager Automation Gap (And How to Fix It)"</em></p>
  </div>

  
  <section class="starter-kit-callout" style="
    max-width: 800px;
    margin: 3rem auto 2rem;
    padding: 2rem;
    border-radius: 12px;
    background: var(--bg-light);
    border: 1px solid var(--border);
    text-align: left;
  ">
    <h3 style="margin-top: 0;">Azure Admin Starter Kit (Free Download)</h3>
    <p style="margin-bottom: 1rem;">
      Get my KQL cheat sheet, 50 Windows + 50 Linux commands, and an Azure RACI template in one free bundle.
    </p>
    <a href="/blog/starter-kit/" class="btn">Get the Starter Kit ‚Üí</a>
  </section>

  
  <aside class="email-capture" style="max-width: 800px; margin: 4rem auto; padding: 3rem; background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%); border-radius: 12px; text-align: center; color: white;">
    <h3 style="margin-top: 0; color: white; font-size: 1.75rem;">Get Azure operational guides in your inbox</h3>
    <p style="margin: 1rem 0 2rem; font-size: 1.1rem; color: white;">Weekly tips from managing 44 Azure subscriptions. No marketing BS.</p>
    
    <form action="https://app.kit.com/forms/8896829/subscriptions" method="post" style="max-width: 500px; margin: 0 auto; display: flex; gap: 0.75rem; flex-wrap: wrap; justify-content: center;">
      <input type="email" 
             name="email_address" 
             placeholder="your@email.com" 
             required 
             style="flex: 1; min-width: 250px; padding: 0.875rem 1rem; border: none; border-radius: 8px; font-size: 1rem; color: #333;">
      <button type="submit" 
              style="padding: 0.875rem 2rem; background: white; color: #0078d4; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; white-space: nowrap; font-size: 1rem; transition: all 0.2s;">
        Subscribe
      </button>
    </form>
    
    <p style="margin: 1.5rem 0 0; font-size: 0.9rem; opacity: 0.9; color: white;">
      Join 500+ Azure admins. Unsubscribe anytime.
    </p>
  </aside>

  
  
  <aside class="related-posts" style="max-width: 800px; margin: 3rem auto; padding: 2rem; background: var(--bg-light); border-radius: 12px;">
    <h3 style="margin-top: 0;">Related Posts</h3>
    <ul style="list-style: none; padding: 0;">
      
      <li style="margin: 1rem 0;">
        <a href="/blog/azure-tags-operational-intelligence/" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Operational Intelligence: Using Azure Tags for Instant Answers (2025)</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-12-17</span>
        </a>
      </li>
      
      <li style="margin: 1rem 0;">
        <a href="/blog/pull-meta-from-arm/" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">I&#39;ll Pull The Meta From ARM - What 6 Months of KQL Actually Looks Like</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-11-10</span>
        </a>
      </li>
      
      <li style="margin: 1rem 0;">
        <a href="/blog/workbook-app-tool/" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Extract KQL Queries from Azure Workbooks (Workbook ‚Üí App Tool)</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-10-13</span>
        </a>
      </li>
      
    </ul>
  </aside>
  

  
  
  
    <!-- CTA: KQL Query Library -->
<div class="cta-block" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 2rem; border-radius: 8px; margin: 3rem 0; text-align: center; color: white;">
  <h3 style="margin: 0 0 1rem; font-size: 1.75rem; color: white;">üìä Stop Rewriting the Same KQL Queries</h3>
  <p style="margin: 0 0 1.5rem; font-size: 1.1rem; line-height: 1.6;">
    Get <strong>45+ production-ready KQL queries</strong> for Azure Resource Graph, Log Analytics, and Activity Logs.
    Copy-paste ready with comments and business context.
  </p>
  <a href="/static/downloads/KQL-Query-Library-Complete.pdf" 
     download
     style="display: inline-block; padding: 0.75rem 2rem; background: white; color: #f5576c; text-decoration: none; border-radius: 6px; font-weight: 700; font-size: 1.1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: all 0.3s ease;"
     onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,0,0,0.2)'"
     onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)'">
    Download Complete Query Library
  </a>
  <p style="margin: 1rem 0 0; font-size: 0.9rem; opacity: 0.9;">
    PDF format ‚Ä¢ No email required ‚Ä¢ Instant download
  </p>
</div>
  

  
  <nav class="post-nav">
    
      <a href="/blog/why-most-azure-migrations-fail/">
        <span style="opacity: 0.7; font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">‚Üê Previous</span>
        <strong>Common Azure Migration Mistakes | Why Enterprise Cloud Migrations Fail</strong>
      </a>
    
    
      <a href="/blog/azure-cost-reports-business-reality/" style="text-align: right;">
        <span style="opacity: 0.7; font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Next ‚Üí</span>
        <strong>Why Your Azure Cost Reports Fail Business Reality (2025)</strong>
      </a>
    
  </nav>

</article>

    </div>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      
      <!-- Featured Bundle Promotion -->
      <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 2rem; border-radius: 8px; margin-bottom: 2rem; text-align: center; color: white;">
        <h3 style="color: white; margin: 0 0 0.75rem 0; font-size: 1.5rem;">üì¶ Enterprise Azure Operations Bundle</h3>
        <p style="font-size: 1.05rem; margin: 0 0 1rem 0; opacity: 0.95;">
          Get all 4 digital products for <strong style="font-size: 1.25rem;">$97</strong> <span style="text-decoration: line-through; opacity: 0.7;">($86 separately)</span>
        </p>
        <ul style="list-style: none; padding: 0; margin: 1rem 0 1.5rem; text-align: left; max-width: 500px; margin-left: auto; margin-right: auto; font-size: 0.95rem;">
          <li style="padding: 0.35rem 0;">‚úîÔ∏è Azure AI FinOps Query Pack (12 production KQL queries)</li>
          <li style="padding: 0.35rem 0;">‚úîÔ∏è Azure Migration Assessment Pro (55-question framework)</li>
          <li style="padding: 0.35rem 0;">‚úîÔ∏è Azure CAF Operations RACI Pro (Governance matrix)</li>
          <li style="padding: 0.35rem 0;">‚úîÔ∏è Enterprise Azure Inventory KQL Pack (Tested on 30K+ resources)</li>
        </ul>
        <a href="https://davidnoob.gumroad.com/l/azure-ops-bundle" 
           style="display: inline-block; padding: 0.875rem 2rem; background: white; color: #667eea; text-decoration: none; border-radius: 6px; font-weight: 700; font-size: 1.05rem; box-shadow: 0 4px 12px rgba(0,0,0,0.2);" 
           target="_blank" rel="noopener">
          Get the Bundle ‚Üí
        </a>
        <p style="margin: 1rem 0 0; font-size: 0.85rem; opacity: 0.9;">
          Instant digital delivery ‚Ä¢ Lifetime updates ‚Ä¢ Money-back guarantee
        </p>
      </div>
      
      <p>&copy; 2026 Azure Noob ‚Äî Don&#39;t be a Noob</p>
      <p style="margin-top: 0.5rem; font-size: 0.9rem;">
        <a href="/rss.xml" title="Subscribe via RSS">RSS Feed</a> ¬∑ 
        <a href="https://github.com/dswann101164" target="_blank" rel="noopener">GitHub</a>
      </p>
      <p style="margin-top: 1.5rem; font-size: 0.85rem; opacity: 0.7; font-style: italic;">
        "Trust in the Lord with all your heart, and lean not on your own understanding;<br>
        in all your ways acknowledge Him, and He will make your paths straight" ‚Äî Proverbs 3:5-6
      </p>
    </div>
  </footer>

  <!-- Copy code functionality -->
  <script src="/static/copy-code.js"></script>

  <!-- Exit-Intent Popup -->
  <div id="exit-popup" class="exit-popup" style="display: none;">
    <div class="exit-popup-content">
      <button class="exit-popup-close" onclick="closeExitPopup()">&times;</button>
      <h2>Wait! Before You Go...</h2>
      <p class="exit-popup-subtitle">Get the <strong>FREE Azure Admin Starter Kit</strong></p>
      <ul class="exit-popup-benefits">
        <li>‚úì 15 Essential KQL Queries</li>
        <li>‚úì 50 Windows Commands</li>
        <li>‚úì 50 Linux Commands</li>
      </ul>
      <form id="exit-popup-form" class="exit-popup-form">
        <input type="email" id="popup-email" placeholder="Enter your email" required>
        <button type="submit" class="exit-popup-submit">Send Me The Free Kit</button>
      </form>
      <p class="exit-popup-privacy">We'll also notify you about new tools & guides. Unsubscribe anytime.</p>
    </div>
  </div>

  <style>
  .exit-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .exit-popup-content {
    background: white;
    padding: 2.5rem;
    border-radius: 12px;
    max-width: 500px;
    width: 90%;
    position: relative;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: slideUp 0.3s ease;
  }

  @keyframes slideUp {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .exit-popup-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 2rem;
    cursor: pointer;
    color: #999;
    line-height: 1;
  }

  .exit-popup-close:hover {
    color: #333;
  }

  .exit-popup h2 {
    margin: 0 0 0.5rem 0;
    color: #0078d4;
    font-size: 2rem;
  }

  .exit-popup-subtitle {
    font-size: 1.2rem;
    margin: 0 0 1.5rem 0;
  }

  .exit-popup-benefits {
    list-style: none;
    padding: 0;
    margin: 1.5rem 0;
  }

  .exit-popup-benefits li {
    padding: 0.5rem 0;
    font-size: 1.1rem;
  }

  .exit-popup-form {
    margin: 1.5rem 0;
  }

  .exit-popup-form input[type="email"] {
    width: 100%;
    padding: 1rem;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 1rem;
    margin-bottom: 1rem;
  }

  .exit-popup-form input[type="email"]:focus {
    outline: none;
    border-color: #0078d4;
  }

  .exit-popup-submit {
    width: 100%;
    padding: 1rem 2rem;
    background: #0078d4;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s;
  }

  .exit-popup-submit:hover {
    background: #005a9e;
  }

  .exit-popup-privacy {
    font-size: 0.85rem;
    color: #666;
    margin-top: 1rem;
    text-align: center;
  }
  </style>

  <script>
  // Exit-intent detection
  let exitPopupShown = false;
  let mouseY = 0;

  document.addEventListener('mousemove', (e) => {
    mouseY = e.clientY;
  });

  document.addEventListener('mouseout', (e) => {
    // If mouse leaves through top of viewport and popup hasn't been shown
    if (!exitPopupShown && e.clientY <= 0 && mouseY <= 100) {
      // Check if user has seen it before (session storage)
      if (!sessionStorage.getItem('exitPopupSeen')) {
        showExitPopup();
      }
    }
  });

  function showExitPopup() {
    exitPopupShown = true;
    document.getElementById('exit-popup').style.display = 'flex';
    sessionStorage.setItem('exitPopupSeen', 'true');
  }

  function closeExitPopup() {
    document.getElementById('exit-popup').style.display = 'none';
  }

  // Handle form submission
  document.getElementById('exit-popup-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('popup-email').value;
    
    // Send to Kit (ConvertKit)
    try {
      const FORM_ID = '8896829'; // Your Kit Form ID
      
      const response = await fetch(`https://api.convertkit.com/v3/forms/${FORM_ID}/subscribe`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          email: email
        })
      });
      
      if (response.ok) {
        console.log('‚úÖ Email captured to Kit:', email);
      }
      
      closeExitPopup();
      
      // Track in Google Analytics
      if (typeof gtag !== 'undefined') {
        gtag('event', 'signup', {
          'event_category': 'email',
          'event_label': 'exit_popup',
          'value': email
        });
      }
      
      // Redirect to starter kit page
      window.location.href = '/blog/starter-kit/';
      
    } catch (error) {
      console.error('Error:', error);
      // Still redirect even if tracking fails
      window.location.href = '/blog/starter-kit/';
    }
  });

  // Close on background click
  document.getElementById('exit-popup').addEventListener('click', (e) => {
    if (e.target.id === 'exit-popup') {
      closeExitPopup();
    }
  });
  </script>
</body>
</html>