<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  

  <!-- Primary SEO -->
  <title>Azure Noob</title>
  <meta name="description" content="Don&#39;t be a Noob">
  <link rel="canonical" href="https://azure-noob.com" />

  <!-- Favicons -->
  <link rel="icon" href="../../static/images/logo.png">

  <!-- Open Graph -->
  <meta property="og:title" content="Azure Noob">
  <meta property="og:description" content="Don&#39;t be a Noob">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://azure-noob.com">
  <meta property="og:image" content="../../static/images/hero/cloud-wars.png">

  

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Azure Noob">
  <meta name="twitter:description" content="Don&#39;t be a Noob">
  <meta name="twitter:image" content="../../static/images/hero/cloud-wars.png">

  <!-- Styles -->
  <link rel="stylesheet" href="../../static/styles.css">
  <!-- Quest styles -->

  <!-- Google Analytics -->
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNHGEB0BNZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZNHGEB0BNZ');
  </script>
</head>
<body>
  <header class="site-header">
    <div class="wrap nav-wrap">
      <div class="brand-block">
        <a href="../../index.html" class="brand-link">
          <img src="../../static/images/logo.png" alt="Azure Noob logo" class="logo">
        </a>
        <span class="brand-text">
          <small>Official Website of</small>
          <strong>Azure Noob</strong>
        </span>
      </div>
      <nav class="nav">
        <a href="../../index.html">Home</a>
        <a href="../index.html">Blog</a>
        <a href="../../about/index.html">About</a>
        <a href="../../tags/index.html">Tags</a>
        <a href="../../search/index.html">Search</a>
      </nav>
    </div>
  </header>

  <!-- WW2 Quest banner (appears on all pages; remove if you want home-only) -->
  <!-- Audio (tiny files; optional) -->

  <main class="site-content">
    <div class="wrap">
      
<article class="post">

  
  
    
    <div class="hero">
      <img src="/static/images/hero/azure-serial-console.png" alt="The Azure Console Button Is a Lie (And You Don&#39;t Need AMA)">
    </div>
  

  <header class="post-header">
    <h1>The Azure Console Button Is a Lie (And You Don&#39;t Need AMA)</h1>
    <p class="muted">
      2025-10-09 ¬∑ ~29 min read
       ¬∑ Azure, VMware, Migration, Troubleshooting, Serial Console
    </p>
    
      <p class="summary">VMware admins: That &#39;Connect&#39; button isn&#39;t console access. Serial Console is hidden in Help &gt; Boot Diagnostics, works without networking, and doesn&#39;t require Azure Monitor Agent. Here&#39;s what Microsoft didn&#39;t tell you.</p>
    
  </header>

  
  <p class="post-actions" style="margin:.5rem 0 0;">
    <button class="btn print-trigger"
            onclick="window.print(); return false;"
            title="Print this page"
            aria-label="Print this page">üñ®Ô∏è Print this page</button>
  </p>

  
  <div class="post-body">
    <p>I clicked the <strong>Connect</strong> button in Azure Portal. The VM won't boot. The Console requires networking to work. The VM's network is broken. This is useless.</p>
<p>If you've migrated from VMware to Azure, you've had this moment. You need console access‚Äîthe real console, the one that works when networking is dead, the one you used in vSphere to see boot messages and fix broken VMs. You click "Connect" in Azure Portal expecting VMware console behavior.</p>
<p>It doesn't work.</p>
<p>Then someone tells you: <em>"Install Azure Monitor Agent for console access."</em></p>
<p>Also wrong.</p>
<h2>The Problem: VMware Admins Are Confused</h2>
<p><strong>In VMware vSphere:</strong><br />
- Right-click VM ‚Üí Open Console<br />
- See actual screen output (BIOS, boot loader, POST messages)<br />
- Works even when networking is completely broken<br />
- True out-of-band access to the hypervisor<br />
- Fix boot issues, network misconfigurations, locked accounts</p>
<p><strong>In Azure Portal (the button everyone clicks):</strong><br />
- Click VM ‚Üí <strong>Connect</strong><br />
- Launches Azure Bastion or RDP/SSH connection<br />
- <strong>Requires networking to work</strong> ‚ùå<br />
- Completely useless if VM won't boot or network is misconfigured<br />
- Not true "console" access</p>
<p><strong>Result:</strong> "Azure sucks, VMware was better!"</p>
<p>Not true. Azure has the equivalent feature. It's just hidden in a weird place and poorly documented.</p>
<h2>Why Azure Did This (Context Matters)</h2>
<p>Azure actually has <strong>TWO different "console" features</strong> with confusing names and placement:</p>
<ol>
<li><strong>Connect button</strong> (VM Overview page)</li>
<li>Launches Bastion/RDP/SSH</li>
<li>Requires working network</li>
<li>Used for normal remote access</li>
<li>
<p>99% of daily VM access</p>
</li>
<li>
<p><strong>Serial Console</strong> (buried in Help ‚Üí Boot Diagnostics)</p>
</li>
<li>True console access via COM1 serial port</li>
<li>Works when networking is broken</li>
<li>Hypervisor-level access</li>
<li><strong>The VMware console equivalent you actually need</strong></li>
</ol>
<p>Most VMware admins never find Serial Console. They click Connect, it fails, and they assume Azure doesn't have console access.</p>
<h2>The AMA Confusion: "Do I Need Azure Monitor Agent?"</h2>
<p><strong>Short answer: NO</strong> (for console access)</p>
<p>This is the most common misconception when migrating from VMware. Here's why the confusion exists:</p>
<p><strong>What Azure Monitor Agent (AMA) is actually for:</strong><br />
- Collecting metrics ‚Üí Azure Monitor<br />
- Sending logs ‚Üí Log Analytics<br />
- VM Insights, Update Manager, Change Tracking<br />
- Guest-level monitoring and management</p>
<p><strong>What Serial Console uses:</strong><br />
- Boot Diagnostics (hypervisor screenshot capability)<br />
- Serial port access (COM1, built into Azure fabric)<br />
- Storage account (for boot screenshots only)<br />
- <strong>Zero agents required</strong></p>
<p><strong>Why the confusion:</strong><br />
- Azure documentation pushes AMA everywhere<br />
- "Best practice" guides say "install AMA on all VMs"<br />
- Admins assume AMA is required for basic functionality<br />
- <strong>Reality:</strong> Serial Console existed BEFORE AMA was created</p>
<p><strong>The timeline:</strong><br />
- Serial Console: Launched 2018 as hypervisor-level feature<br />
- Azure Monitor Agent: Released 2021 as monitoring solution<br />
- They are completely separate technologies</p>
<h2>Requirements: What You Actually Need</h2>
<p>Here's what Serial Console requires, with the AMA confusion cleared up:</p>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Required?</th>
<th>Purpose</th>
<th>How to Enable</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Boot Diagnostics</strong></td>
<td>‚úÖ YES</td>
<td>Enables serial port access + screenshots</td>
<td><code>Set-AzVMBootDiagnostic -Enable</code></td>
</tr>
<tr>
<td><strong>Serial Console Feature</strong></td>
<td>‚úÖ YES</td>
<td>Subscription-level feature flag</td>
<td><code>Register-AzProviderFeature -FeatureName "EnableSerialConsole"</code></td>
</tr>
<tr>
<td><strong>Storage Account</strong></td>
<td>‚úÖ YES</td>
<td>Stores boot diagnostic screenshots</td>
<td>Create storage account, reference in boot diagnostics</td>
</tr>
<tr>
<td><strong>VM Must Be Running</strong></td>
<td>‚úÖ YES</td>
<td>Can't access console on deallocated VM</td>
<td>Start the VM</td>
</tr>
<tr>
<td><strong>Azure Monitor Agent</strong></td>
<td>‚ùå NO</td>
<td>Monitoring/logging only - not console access</td>
<td>N/A - Don't install for Serial Console</td>
</tr>
<tr>
<td><strong>Network Connectivity</strong></td>
<td>‚ùå NO</td>
<td>Serial Console works when network is broken</td>
<td>N/A - This is the whole point!</td>
</tr>
<tr>
<td><strong>RDP/SSH Working</strong></td>
<td>‚ùå NO</td>
<td>Serial Console is the backup when these fail</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<h3>OS-Specific Requirements</h3>
<p><strong>Windows VMs:</strong></p>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Required?</th>
<th>Default State</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SAC Enabled</strong></td>
<td>‚úÖ YES</td>
<td>‚úÖ Enabled on Azure images</td>
<td>Emergency Management Services (EMS)</td>
</tr>
<tr>
<td><strong>Admin Password Known</strong></td>
<td>‚úÖ YES</td>
<td>üîí You set this</td>
<td>Can reset via SAC if locked out</td>
</tr>
<tr>
<td><strong>EMS Service Running</strong></td>
<td>‚úÖ YES</td>
<td>‚úÖ Running by default</td>
<td><code>Get-Service EMS</code> to verify</td>
</tr>
</tbody>
</table>
<p><strong>Linux VMs:</strong></p>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Required?</th>
<th>Default State</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Serial Console in GRUB</strong></td>
<td>‚úÖ YES</td>
<td>‚úÖ Enabled on Azure images</td>
<td>Console output on <code>ttyS0</code></td>
</tr>
<tr>
<td><strong>Root/Sudo Access</strong></td>
<td>‚úÖ YES</td>
<td>üîí You configure this</td>
<td>Need privileges to run commands</td>
</tr>
<tr>
<td><strong>Console Configured</strong></td>
<td>‚úÖ YES</td>
<td>‚úÖ Default in Azure images</td>
<td>Check <code>/etc/default/grub</code></td>
</tr>
</tbody>
</table>
<h3>What You DON'T Need (Common Misconceptions)</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Do You Need It?</th>
<th>Why People Think They Need It</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Azure Monitor Agent (AMA)</strong></td>
<td>‚ùå NO</td>
<td>Azure pushes it for everything; docs unclear</td>
</tr>
<tr>
<td><strong>Log Analytics Workspace</strong></td>
<td>‚ùå NO</td>
<td>Confused with monitoring requirements</td>
</tr>
<tr>
<td><strong>Azure Bastion</strong></td>
<td>‚ùå NO</td>
<td>Different service; requires working network</td>
</tr>
<tr>
<td><strong>VM Extensions</strong></td>
<td>‚ùå NO</td>
<td>Serial Console is hypervisor-level</td>
</tr>
<tr>
<td><strong>NSG Allow Rules</strong></td>
<td>‚ùå NO</td>
<td>Serial Console bypasses network entirely</td>
</tr>
<tr>
<td><strong>Public IP Address</strong></td>
<td>‚ùå NO</td>
<td>Access through Azure Portal, not network</td>
</tr>
</tbody>
</table>
<h2>Where Serial Console Actually Lives</h2>
<p><strong>Location in Azure Portal:</strong></p>
<div class="codehilite"><pre><span></span><code>VM ‚Üí Help ‚Üí Boot diagnostics ‚Üí Serial console
</code></pre></div>

<p><strong>NOT in any of these places (where you'd expect it):</strong><br />
- ‚ùå VM Overview ‚Üí Connect (that's Bastion/RDP)<br />
- ‚ùå VM ‚Üí Operations (no console there)<br />
- ‚ùå VM ‚Üí Monitoring (that's metrics)<br />
- ‚ùå VM ‚Üí Extensions (no console extension)</p>
<p><strong>Why it's hidden there:</strong><br />
Microsoft categorizes Serial Console as a "troubleshooting tool" not a "daily operations tool." In VMware, console access is front and center because it's used regularly. In Azure, Microsoft expects you to use Bastion/RDP for 99% of access, and Serial Console only for emergencies.</p>
<h2>Enable Serial Console: Complete Setup</h2>
<h3>Step 1: Enable at Subscription Level (One Time)</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># Enable Serial Console feature for entire subscription</span>
<span class="nb">Register-AzProviderFeature</span> <span class="n">-FeatureName</span> <span class="s2">&quot;EnableSerialConsole&quot;</span> <span class="p">`</span>
    <span class="n">-ProviderNamespace</span> <span class="s2">&quot;Microsoft.SerialConsole&quot;</span>

<span class="c"># Verify feature registration status</span>
<span class="nb">Get-AzProviderFeature</span> <span class="n">-FeatureName</span> <span class="s2">&quot;EnableSerialConsole&quot;</span> <span class="p">`</span>
    <span class="n">-ProviderNamespace</span> <span class="s2">&quot;Microsoft.SerialConsole&quot;</span>

<span class="c"># Expected output:</span>
<span class="c"># FeatureName        ProviderName              RegistrationState</span>
<span class="c"># -----------        ------------              -----------------</span>
<span class="c"># EnableSerialConsole Microsoft.SerialConsole   Registered</span>
</code></pre></div>

<p><strong>Note:</strong> Feature registration can take 5-15 minutes. You only do this once per subscription.</p>
<h3>Step 2: Create Storage Account for Boot Diagnostics (If Needed)</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># Create storage account for boot diagnostics</span>
<span class="nb">New-AzStorageAccount</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-shared-001&quot;</span> <span class="p">`</span>
    <span class="n">-Name</span> <span class="s2">&quot;saproddiag001&quot;</span> <span class="p">`</span>
    <span class="n">-Location</span> <span class="s2">&quot;eastus&quot;</span> <span class="p">`</span>
    <span class="n">-SkuName</span> <span class="s2">&quot;Standard_LRS&quot;</span> <span class="p">`</span>
    <span class="n">-Kind</span> <span class="s2">&quot;StorageV2&quot;</span>

<span class="c"># Note: Storage account names must be globally unique and lowercase</span>
</code></pre></div>

<p><strong>Storage account naming rules:</strong><br />
- 3-24 characters<br />
- Lowercase letters and numbers only<br />
- Globally unique across all of Azure</p>
<h3>Step 3: Enable Boot Diagnostics on VMs</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># Enable boot diagnostics on single VM</span>
<span class="nv">$vm</span> <span class="p">=</span> <span class="nb">Get-AzVM</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod-001&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;vm-app-001&quot;</span>

<span class="nb">Set-AzVMBootDiagnostic</span> <span class="n">-VM</span> <span class="nv">$vm</span> <span class="n">-Enable</span> <span class="p">`</span>
    <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-shared-001&quot;</span> <span class="p">`</span>
    <span class="n">-StorageAccountName</span> <span class="s2">&quot;saproddiag001&quot;</span>

<span class="nb">Update-AzVM</span> <span class="n">-VM</span> <span class="nv">$vm</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod-001&quot;</span>
</code></pre></div>

<h3>Step 4: Enable at Scale (All VMs in Subscription)</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># Enable boot diagnostics for all VMs in subscription</span>
<span class="nv">$storageAccount</span> <span class="p">=</span> <span class="s2">&quot;saproddiag001&quot;</span>
<span class="nv">$storageRG</span> <span class="p">=</span> <span class="s2">&quot;rg-shared-001&quot;</span>

<span class="nv">$vms</span> <span class="p">=</span> <span class="nb">Get-AzVM</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$vm</span> <span class="k">in</span> <span class="nv">$vms</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;Enabling boot diagnostics on </span><span class="p">$(</span><span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span><span class="s2">...&quot;</span>

    <span class="nv">$vmFull</span> <span class="p">=</span> <span class="nb">Get-AzVM</span> <span class="n">-ResourceGroupName</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">ResourceGroupName</span> <span class="n">-Name</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span>

    <span class="nb">Set-AzVMBootDiagnostic</span> <span class="n">-VM</span> <span class="nv">$vmFull</span> <span class="n">-Enable</span> <span class="p">`</span>
        <span class="n">-ResourceGroupName</span> <span class="nv">$storageRG</span> <span class="p">`</span>
        <span class="n">-StorageAccountName</span> <span class="nv">$storageAccount</span>

    <span class="nb">Update-AzVM</span> <span class="n">-VM</span> <span class="nv">$vmFull</span> <span class="n">-ResourceGroupName</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">ResourceGroupName</span>

    <span class="nb">Write-Host</span> <span class="s2">&quot;‚úì Completed: </span><span class="p">$(</span><span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span><span class="s2">&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
<span class="p">}</span>
</code></pre></div>

<h3>Verification: Check Serial Console Status</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># Check Serial Console feature status</span>
<span class="nv">$feature</span> <span class="p">=</span> <span class="nb">Get-AzProviderFeature</span> <span class="n">-FeatureName</span> <span class="s2">&quot;EnableSerialConsole&quot;</span> <span class="p">`</span>
    <span class="n">-ProviderNamespace</span> <span class="s2">&quot;Microsoft.SerialConsole&quot;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$feature</span><span class="p">.</span><span class="n">RegistrationState</span> <span class="o">-eq</span> <span class="s2">&quot;Registered&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;‚úì Serial Console enabled at subscription level&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;‚úó Serial Console not enabled. State: </span><span class="p">$(</span><span class="nv">$feature</span><span class="p">.</span><span class="n">RegistrationState</span><span class="p">)</span><span class="s2">&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Red</span>
<span class="p">}</span>

<span class="c"># Check boot diagnostics on specific VM</span>
<span class="nv">$vm</span> <span class="p">=</span> <span class="nb">Get-AzVM</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod-001&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;vm-app-001&quot;</span>

<span class="nv">$bootDiags</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">DiagnosticsProfile</span><span class="p">.</span><span class="n">BootDiagnostics</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$bootDiags</span><span class="p">.</span><span class="n">Enabled</span> <span class="o">-eq</span> <span class="nv">$true</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;‚úì Boot diagnostics enabled on </span><span class="p">$(</span><span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span><span class="s2">&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;  Storage URI: </span><span class="p">$(</span><span class="nv">$bootDiags</span><span class="p">.</span><span class="n">StorageUri</span><span class="p">)</span><span class="s2">&quot;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;‚úó Boot diagnostics not enabled on </span><span class="p">$(</span><span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span><span class="s2">&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Red</span>
<span class="p">}</span>
</code></pre></div>

<h3>KQL Query: Find VMs Without Boot Diagnostics</h3>
<p>Use this Azure Resource Graph query to identify VMs that don't have Serial Console access configured:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">bootDiagsEnabled</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">diagnosticsProfile</span><span class="err">.</span><span class="n">bootDiagnostics</span><span class="err">.</span><span class="n">enabled</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">storageUri</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">diagnosticsProfile</span><span class="err">.</span><span class="n">bootDiagnostics</span><span class="err">.</span><span class="n">storageUri</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">bootDiagsEnabled</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="n">true</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">isnull</span><span class="p">(</span><span class="n">bootDiagsEnabled</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span>
<span class="w">    </span><span class="n">vmName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<span class="w">    </span><span class="n">resourceGroup</span><span class="p">,</span>
<span class="w">    </span><span class="n">location</span><span class="p">,</span>
<span class="w">    </span><span class="n">powerState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">extended</span><span class="err">.</span><span class="n">instanceView</span><span class="err">.</span><span class="n">powerState</span><span class="err">.</span><span class="n">displayStatus</span><span class="p">,</span>
<span class="w">    </span><span class="n">bootDiagsEnabled</span><span class="p">,</span>
<span class="w">    </span><span class="n">storageUri</span><span class="p">,</span>
<span class="w">    </span><span class="n">subscriptionId</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">vmName</span><span class="w"> </span><span class="n">asc</span>
</code></pre></div>

<p><strong>What this query finds:</strong><br />
- VMs with boot diagnostics disabled<br />
- VMs where boot diagnostics was never configured<br />
- The storage account used (or missing)<br />
- Current power state of VMs</p>
<p><strong>Output example:</strong></p>
<div class="codehilite"><pre><span></span><code>vmName          resourceGroup    location  powerState      bootDiagsEnabled  storageUri
vm-app-001      rg-prod-001      eastus    VM running      false             null
vm-db-002       rg-prod-002      westus2   VM running      null              null
vm-web-003      rg-test-001      eastus    VM deallocated  false             null
</code></pre></div>

<h2>Using Serial Console: Windows VMs</h2>
<h3>Accessing Windows Serial Console</h3>
<ol>
<li>Navigate to: <strong>VM ‚Üí Help ‚Üí Boot diagnostics ‚Üí Serial console</strong></li>
<li>Wait for connection (5-10 seconds)</li>
<li>You'll see the SAC prompt: <code>SAC&gt;</code></li>
</ol>
<p>If you see a blank screen, press <strong>ESC + TAB</strong> to activate SAC.</p>
<h3>Windows SAC (Special Administration Console) Commands</h3>
<div class="codehilite"><pre><span></span><code><span class="gh">#</span> List all available SAC commands
SAC&gt; ?

<span class="gh">#</span> Create a CMD channel
SAC&gt; cmd

<span class="gh">#</span> Output: &quot;The Command Prompt session was successfully launched.&quot;
<span class="gh">#</span> Output: &quot;Channel: Cmd0001&quot;

<span class="gh">#</span> Switch to CMD channel (use channel name from output)
SAC&gt; ch -sn Cmd0001

<span class="gh">#</span> Or use shortcut: ESC + TAB to switch channels
<span class="gh">#</span> Press Enter to see login prompt

<span class="gh">#</span> Login with VM credentials
<span class="gh">#</span> Domain: (leave blank for local account)
<span class="gh">#</span> Username: azureadmin
<span class="gh">#</span> Password: ********
</code></pre></div>

<h3>Common Windows Troubleshooting Commands</h3>
<p>Once logged into the CMD channel, you can run standard Windows commands:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check network configuration</span>
<span class="n">ipconfig</span><span class="w"> </span><span class="o">/</span><span class="n">all</span>

<span class="c1"># Verify DNS resolution</span>
<span class="n">nslookup</span><span class="w"> </span><span class="n">microsoft</span><span class="o">.</span><span class="n">com</span>

<span class="c1"># Test network connectivity</span>
<span class="n">ping</span><span class="w"> </span><span class="mf">8.8</span><span class="o">.</span><span class="mf">8.8</span>

<span class="c1"># Check firewall status</span>
<span class="n">netsh</span><span class="w"> </span><span class="n">advfirewall</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">allprofiles</span>

<span class="c1"># View network connections</span>
<span class="n">netstat</span><span class="w"> </span><span class="o">-</span><span class="n">an</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">more</span>

<span class="c1"># Check for open ports</span>
<span class="n">netstat</span><span class="w"> </span><span class="o">-</span><span class="n">ano</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">findstr</span><span class="w"> </span><span class="p">:</span><span class="mi">3389</span>

<span class="c1"># Reset admin password (if locked out)</span>
<span class="n">net</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">azureadmin</span><span class="w"> </span><span class="n">NewP</span><span class="err">@</span><span class="n">ssw0rd</span><span class="o">!</span>

<span class="c1"># Unlock locked account</span>
<span class="n">net</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">azureadmin</span><span class="w"> </span><span class="o">/</span><span class="n">active</span><span class="p">:</span><span class="n">yes</span>

<span class="c1"># Check disk space</span>
<span class="n">dir</span><span class="w"> </span><span class="n">c</span><span class="p">:</span>\<span class="w"> </span>
<span class="n">wmic</span><span class="w"> </span><span class="n">logicaldisk</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">caption</span><span class="p">,</span><span class="n">freespace</span><span class="p">,</span><span class="n">size</span>

<span class="c1"># View running services</span>
<span class="n">sc</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">more</span>

<span class="c1"># Restart specific service</span>
<span class="n">sc</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="s2">&quot;ServiceName&quot;</span>
<span class="n">sc</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="s2">&quot;ServiceName&quot;</span>

<span class="c1"># Check boot configuration</span>
<span class="n">bcdedit</span><span class="w"> </span><span class="o">/</span><span class="k">enum</span>

<span class="c1"># Boot to safe mode (for next restart only)</span>
<span class="n">bcdedit</span><span class="w"> </span><span class="o">/</span><span class="n">set</span><span class="w"> </span><span class="p">{</span><span class="n">default</span><span class="p">}</span><span class="w"> </span><span class="n">safeboot</span><span class="w"> </span><span class="n">minimal</span>

<span class="c1"># Remove safe mode flag (after fixing issue)</span>
<span class="n">bcdedit</span><span class="w"> </span><span class="o">/</span><span class="n">deletevalue</span><span class="w"> </span><span class="p">{</span><span class="n">default</span><span class="p">}</span><span class="w"> </span><span class="n">safeboot</span>

<span class="c1"># View recent event logs (last 10 errors)</span>
<span class="n">wevtutil</span><span class="w"> </span><span class="n">qe</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="o">/</span><span class="n">c</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="o">/</span><span class="n">rd</span><span class="p">:</span><span class="bp">true</span><span class="w"> </span><span class="o">/</span><span class="n">f</span><span class="p">:</span><span class="n">text</span><span class="w"> </span><span class="o">/</span><span class="n">q</span><span class="p">:</span><span class="s2">&quot;*[System[(Level=2)]]&quot;</span>

<span class="c1"># Start PowerShell from CMD</span>
<span class="n">powershell</span>
</code></pre></div>

<h3>PowerShell Commands in SAC</h3>
<p>After typing <code>powershell</code> in the CMD channel:</p>
<div class="codehilite"><pre><span></span><code><span class="c"># Check RDP configuration</span>
<span class="nb">Get-ItemProperty</span> <span class="n">-Path</span> <span class="s2">&quot;HKLM:\System\CurrentControlSet\Control\Terminal Server&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;fDenyTSConnections&quot;</span>

<span class="c"># Enable RDP if disabled</span>
<span class="nb">Set-ItemProperty</span> <span class="n">-Path</span> <span class="s2">&quot;HKLM:\System\CurrentControlSet\Control\Terminal Server&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;fDenyTSConnections&quot;</span> <span class="n">-Value</span> <span class="n">0</span>

<span class="c"># Check Windows Firewall rules for RDP</span>
<span class="nb">Get-NetFirewallRule</span> <span class="n">-DisplayName</span> <span class="s2">&quot;Remote Desktop*&quot;</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">DisplayName</span><span class="p">,</span> <span class="n">Enabled</span>

<span class="c"># Check if Windows Update service is running</span>
<span class="nb">Get-Service</span> <span class="n">-Name</span> <span class="n">wuauserv</span>

<span class="c"># View installed Windows Updates (last 10)</span>
<span class="nb">Get-HotFix</span> <span class="p">|</span> <span class="nb">Sort-Object</span> <span class="n">InstalledOn</span> <span class="n">-Descending</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">-First</span> <span class="n">10</span>

<span class="c"># Check for pending reboots</span>
<span class="nb">Test-Path</span> <span class="s2">&quot;HKLM:\Software\Microsoft\Windows\CurrentVersion\Component Based Servicing\RebootPending&quot;</span>
<span class="nb">Test-Path</span> <span class="s2">&quot;HKLM:\Software\Microsoft\Windows\CurrentVersion\WindowsUpdate\Auto Update\RebootRequired&quot;</span>
</code></pre></div>

<h3>SAC Limitations and Workarounds</h3>
<p><strong>SAC runs in 80x24 character mode:</strong><br />
- No scrollback buffer<br />
- Add <code>| more</code> to long outputs<br />
- Use PowerShell for better formatting</p>
<p><strong>No GUI access:</strong><br />
- Can't launch graphical tools<br />
- Use command-line equivalents<br />
- Consider offline disk repair for complex GUI issues</p>
<p><strong>Session timeout:</strong><br />
- Default: No automatic timeout (Windows)<br />
- Manually disconnect when finished<br />
- Other users can forcefully disconnect you</p>
<h2>Using Serial Console: Linux VMs</h2>
<h3>Accessing Linux Serial Console</h3>
<ol>
<li>Navigate to: <strong>VM ‚Üí Help ‚Üí Boot diagnostics ‚Üí Serial console</strong></li>
<li>Wait for connection</li>
<li>Press <strong>Enter</strong> to see login prompt</li>
<li>Login with VM credentials</li>
</ol>
<h3>Common Linux Troubleshooting Commands</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check network configuration</span>
ip<span class="w"> </span>addr<span class="w"> </span>show
ip<span class="w"> </span>route<span class="w"> </span>show

<span class="c1"># View DNS configuration</span>
cat<span class="w"> </span>/etc/resolv.conf

<span class="c1"># Test network connectivity</span>
ping<span class="w"> </span>-c<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">8</span>.8.8.8

<span class="c1"># Check if SSH is running</span>
systemctl<span class="w"> </span>status<span class="w"> </span>sshd

<span class="c1"># Restart SSH service</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>sshd

<span class="c1"># View recent system logs</span>
sudo<span class="w"> </span>journalctl<span class="w"> </span>-xb<span class="w"> </span>-n<span class="w"> </span><span class="m">50</span>

<span class="c1"># Check disk usage</span>
df<span class="w"> </span>-h

<span class="c1"># Check memory usage</span>
free<span class="w"> </span>-h

<span class="c1"># View running processes</span>
ps<span class="w"> </span>aux<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-20

<span class="c1"># Check open ports</span>
sudo<span class="w"> </span>netstat<span class="w"> </span>-tulpn

<span class="c1"># View firewall rules (if firewalld)</span>
sudo<span class="w"> </span>firewall-cmd<span class="w"> </span>--list-all

<span class="c1"># View firewall rules (if ufw)</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>status<span class="w"> </span>verbose

<span class="c1"># View failed login attempts</span>
sudo<span class="w"> </span>lastb<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-20

<span class="c1"># Check for filesystem errors</span>
sudo<span class="w"> </span>dmesg<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>error

<span class="c1"># View boot messages</span>
sudo<span class="w"> </span>journalctl<span class="w"> </span>-b

<span class="c1"># Check SELinux status (if enabled)</span>
getenforce

<span class="c1"># Temporarily disable SELinux (troubleshooting only)</span>
sudo<span class="w"> </span>setenforce<span class="w"> </span><span class="m">0</span>
</code></pre></div>

<h3>Resetting Root Password (Emergency Access)</h3>
<p>If you've lost root access and have physical console access:</p>
<ol>
<li><strong>Interrupt boot process:</strong></li>
<li>Reboot VM via Azure Portal</li>
<li>In Serial Console, press any key when GRUB menu appears</li>
<li>
<p>Press <code>e</code> to edit boot parameters</p>
</li>
<li>
<p><strong>Modify kernel parameters:</strong><br />
   ```bash<br />
   # Find line starting with "linux" or "linux16"<br />
   # At the end of that line, add:<br />
   init=/bin/bash</p>
</li>
</ol>
<p># Press Ctrl+X or F10 to boot<br />
   ```</p>
<ol>
<li><strong>Remount filesystem and reset password:</strong><br />
   ```bash<br />
   # Remount root filesystem as read-write<br />
   mount -o remount,rw /</li>
</ol>
<p># Reset root password<br />
   passwd root<br />
   # Enter new password twice</p>
<p># Remount as read-only<br />
   mount -o remount,ro /</p>
<p># Force reboot<br />
   echo b &gt; /proc/sysrq-trigger<br />
   ```</p>
<h3>Fixing Network Configuration</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Restart networking (Ubuntu/Debian)</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>networking

<span class="c1"># Restart networking (RHEL/CentOS)</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>network

<span class="c1"># View network interfaces</span>
ip<span class="w"> </span>link<span class="w"> </span>show

<span class="c1"># Bring interface up</span>
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>eth0<span class="w"> </span>up

<span class="c1"># Check DHCP client</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>dhclient

<span class="c1"># Release and renew DHCP lease</span>
sudo<span class="w"> </span>dhclient<span class="w"> </span>-r<span class="w"> </span>eth0
sudo<span class="w"> </span>dhclient<span class="w"> </span>eth0

<span class="c1"># View routing table</span>
ip<span class="w"> </span>route<span class="w"> </span>show

<span class="c1"># Add default route (if missing)</span>
sudo<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span>default<span class="w"> </span>via<span class="w"> </span><span class="m">10</span>.0.0.1<span class="w"> </span>dev<span class="w"> </span>eth0
</code></pre></div>

<h3>Checking Azure Guest Agent</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check if Azure Guest Agent (waagent) is running</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>walinuxagent

<span class="c1"># Restart Azure Guest Agent</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>walinuxagent

<span class="c1"># View Azure Guest Agent logs</span>
sudo<span class="w"> </span>cat<span class="w"> </span>/var/log/waagent.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-50
</code></pre></div>

<h2>Real Scenarios: When You Need Serial Console</h2>
<h3>Scenario 1: VM Won't Boot After Windows Update</h3>
<p><strong>Problem:</strong><br />
- Applied Windows Updates<br />
- VM restarted but never came back online<br />
- Can't RDP, connection times out<br />
- Azure Portal shows VM as "Running"</p>
<p><strong>Solution via Serial Console:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">SAC</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cmd</span>
<span class="n">SAC</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ch</span><span class="w"> </span><span class="o">-</span><span class="n">sn</span><span class="w"> </span><span class="n">Cmd0001</span>
<span class="p">[</span><span class="n">Press</span><span class="w"> </span><span class="n">Enter</span><span class="p">]</span>
<span class="p">[</span><span class="n">Login</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">credentials</span><span class="p">]</span>

<span class="cp"># Check boot configuration</span>
<span class="n">bcdedit</span><span class="w"> </span><span class="o">/</span><span class="k">enum</span>

<span class="cp"># View Windows Update logs</span>
<span class="n">dir</span><span class="w"> </span><span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">Windows</span><span class="err">\</span><span class="n">Logs</span><span class="err">\</span><span class="n">WindowsUpdate</span>

<span class="cp"># Boot to safe mode</span>
<span class="n">bcdedit</span><span class="w"> </span><span class="o">/</span><span class="n">set</span><span class="w"> </span><span class="p">{</span><span class="k">default</span><span class="p">}</span><span class="w"> </span><span class="n">safeboot</span><span class="w"> </span><span class="n">minimal</span>

<span class="cp"># Restart VM</span>
<span class="n">shutdown</span><span class="w"> </span><span class="o">/</span><span class="n">r</span><span class="w"> </span><span class="o">/</span><span class="n">t</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>

<p><strong>After VM restarts in safe mode:</strong><br />
- Uninstall problematic update via Control Panel<br />
- Remove safe mode flag: <code>bcdedit /deletevalue {default} safeboot</code><br />
- Restart normally</p>
<h3>Scenario 2: Firewall Misconfiguration Locked You Out</h3>
<p><strong>Problem:</strong><br />
- Modified NSG rules or Windows Firewall<br />
- Accidentally blocked RDP/SSH access<br />
- Can't connect to fix it</p>
<p><strong>Solution via Serial Console (Windows):</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">#</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="n">Windows</span><span class="w"> </span><span class="n">Firewall</span><span class="w"> </span><span class="n">status</span>
<span class="n">netsh</span><span class="w"> </span><span class="n">advfirewall</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">allprofiles</span>

<span class="p">#</span><span class="w"> </span><span class="n">Temporarily</span><span class="w"> </span><span class="k">disable</span><span class="w"> </span><span class="n">Windows</span><span class="w"> </span><span class="n">Firewall</span>
<span class="n">netsh</span><span class="w"> </span><span class="n">advfirewall</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">allprofiles</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">off</span>

<span class="p">#</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">RDP</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">listening</span>
<span class="n">netstat</span><span class="w"> </span><span class="o">-</span><span class="n">an</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">findstr</span><span class="w"> </span><span class="o">:</span><span class="mh">3389</span>

<span class="p">#</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">RDP</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">registry</span>
<span class="kt">reg</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="s">&quot;HKLM\System\CurrentControlSet\Control\Terminal Server&quot;</span><span class="w"> </span><span class="o">/</span><span class="n">v</span><span class="w"> </span><span class="n">fDenyTSConnections</span><span class="w"> </span><span class="o">/</span><span class="n">t</span><span class="w"> </span><span class="n">REG_DWORD</span><span class="w"> </span><span class="o">/</span><span class="n">d</span><span class="w"> </span><span class="mh">0</span><span class="w"> </span><span class="o">/</span><span class="n">f</span>
</code></pre></div>

<p><strong>Solution via Serial Console (Linux):</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check firewall status</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-L<span class="w"> </span>-n

<span class="c1"># Flush all firewall rules (temporary)</span>
sudo<span class="w"> </span>iptables<span class="w"> </span>-F

<span class="c1"># Or disable firewalld</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>firewalld

<span class="c1"># Verify SSH is running</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>sshd

<span class="c1"># Check SSH configuration</span>
sudo<span class="w"> </span>sshd<span class="w"> </span>-T<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>permitroot
</code></pre></div>

<h3>Scenario 3: Static IP Configuration Broke Networking</h3>
<p><strong>Problem:</strong><br />
- Someone configured static IP in guest OS (big mistake in Azure)<br />
- VM lost network connectivity<br />
- Azure expects DHCP for IP assignment</p>
<p><strong>Solution via Serial Console (Windows):</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">View</span><span class="w"> </span><span class="nx">current</span><span class="w"> </span><span class="nx">IP</span><span class="w"> </span><span class="nx">configuration</span>
<span class="nx">ipconfig</span><span class="w"> </span><span class="o">/</span><span class="nx">all</span>

<span class="err">#</span><span class="w"> </span><span class="nx">Set</span><span class="w"> </span><span class="nx">network</span><span class="w"> </span><span class="nx">adapter</span><span class="w"> </span><span class="nx">back</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">DHCP</span>
<span class="nx">netsh</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">ip</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="s">&quot;Ethernet&quot;</span><span class="w"> </span><span class="nx">dhcp</span>
<span class="nx">netsh</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">ip</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">dnsservers</span><span class="w"> </span><span class="s">&quot;Ethernet&quot;</span><span class="w"> </span><span class="nx">dhcp</span>

<span class="err">#</span><span class="w"> </span><span class="nx">Release</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">renew</span><span class="w"> </span><span class="nx">DHCP</span>
<span class="nx">ipconfig</span><span class="w"> </span><span class="o">/</span><span class="nx">release</span>
<span class="nx">ipconfig</span><span class="w"> </span><span class="o">/</span><span class="nx">renew</span>

<span class="err">#</span><span class="w"> </span><span class="nx">Verify</span><span class="w"> </span><span class="nx">connectivity</span>
<span class="nx">ping</span><span class="w"> </span><span class="m m-Double">8.8.8.8</span>
</code></pre></div>

<p><strong>Solution via Serial Console (Linux):</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Edit network configuration file</span>
sudo<span class="w"> </span>vi<span class="w"> </span>/etc/netplan/50-cloud-init.yaml

<span class="c1"># Change to DHCP (for Ubuntu 18.04+):</span>
<span class="c1"># network:</span>
<span class="c1">#   version: 2</span>
<span class="c1">#   ethernets:</span>
<span class="c1">#     eth0:</span>
<span class="c1">#       dhcp4: true</span>

<span class="c1"># Apply changes</span>
sudo<span class="w"> </span>netplan<span class="w"> </span>apply

<span class="c1"># Verify</span>
ip<span class="w"> </span>addr<span class="w"> </span>show<span class="w"> </span>eth0
</code></pre></div>

<h3>Scenario 4: Locked Admin Account (Too Many Failed Logins)</h3>
<p><strong>Problem:</strong><br />
- Account locked after too many failed RDP/SSH attempts<br />
- Can't login to unlock it</p>
<p><strong>Solution via Serial Console (Windows):</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="k">Check</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="n">status</span>
<span class="n">net</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">azureadmin</span>

<span class="err">#</span><span class="w"> </span><span class="n">Unlock</span><span class="w"> </span><span class="n">account</span>
<span class="n">net</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">azureadmin</span><span class="w"> </span><span class="o">/</span><span class="nl">active</span><span class="p">:</span><span class="n">yes</span>

<span class="err">#</span><span class="w"> </span><span class="n">Reset</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="n">needed</span><span class="p">)</span>
<span class="n">net</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">azureadmin</span><span class="w"> </span><span class="n">NewP</span><span class="nv">@ssw0rd</span><span class="err">!</span>

<span class="err">#</span><span class="w"> </span><span class="n">Verify</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="n">unlocked</span>
<span class="n">net</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">azureadmin</span>
</code></pre></div>

<p><strong>Solution via Serial Console (Linux):</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Unlock user account</span>
sudo<span class="w"> </span>pam_tally2<span class="w"> </span>--user<span class="o">=</span>azureadmin<span class="w"> </span>--reset

<span class="c1"># Or for newer systems using faillock</span>
sudo<span class="w"> </span>faillock<span class="w"> </span>--user<span class="w"> </span>azureadmin<span class="w"> </span>--reset

<span class="c1"># Verify user can login</span>
sudo<span class="w"> </span>passwd<span class="w"> </span>azureadmin
</code></pre></div>

<h3>Scenario 5: Azure Guest Agent Crashed</h3>
<p><strong>Problem:</strong><br />
- Azure Guest Agent (waagent) stopped responding<br />
- Portal shows "Not Ready" status<br />
- Can't execute Run Commands or extensions</p>
<p><strong>Solution via Serial Console (Linux):</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check agent status</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>walinuxagent

<span class="c1"># View recent logs</span>
sudo<span class="w"> </span>journalctl<span class="w"> </span>-u<span class="w"> </span>walinuxagent<span class="w"> </span>-n<span class="w"> </span><span class="m">100</span>

<span class="c1"># Restart agent</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>walinuxagent

<span class="c1"># Check if agent started successfully</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>walinuxagent

<span class="c1"># View agent version</span>
waagent<span class="w"> </span>-version
</code></pre></div>

<h2>Troubleshooting Serial Console</h2>
<h3>"Serial Console Not Available for This VM"</h3>
<p><strong>Possible causes:</strong></p>
<ol>
<li><strong>Boot diagnostics not enabled</strong><br />
   ```powershell<br />
   # Check status<br />
   $vm = Get-AzVM -ResourceGroupName "rg-prod" -Name "vm-app-001"<br />
   $vm.DiagnosticsProfile.BootDiagnostics.Enabled</li>
</ol>
<p># Enable it<br />
   Set-AzVMBootDiagnostic -VM $vm -Enable -ResourceGroupName "rg-shared" -StorageAccountName "saproddiag001"<br />
   Update-AzVM -VM $vm -ResourceGroupName "rg-prod"<br />
   ```</p>
<ol>
<li><strong>Serial Console disabled at subscription level</strong><br />
   ```powershell<br />
   # Check feature status<br />
   Get-AzProviderFeature -FeatureName "EnableSerialConsole" -ProviderNamespace "Microsoft.SerialConsole"</li>
</ol>
<p># Enable if not registered<br />
   Register-AzProviderFeature -FeatureName "EnableSerialConsole" -ProviderNamespace "Microsoft.SerialConsole"<br />
   ```</p>
<ol>
<li><strong>VM is deallocated (not running)</strong></li>
<li>Serial Console only works on running VMs</li>
<li>Start the VM first</li>
</ol>
<h3>"Cannot Connect to Serial Console"</h3>
<p><strong>Windows (SAC not responding):</strong></p>
<ol>
<li>Press <strong>ESC + TAB</strong> to activate SAC</li>
<li>If still blank, SAC might not be configured</li>
<li>Check if EMS is enabled:<br />
   ```powershell<br />
   # Via Run Command (if available)<br />
   Get-Service EMS</li>
</ol>
<p># Enable EMS via offline disk repair if needed<br />
   bcdedit /ems {default} on<br />
   bcdedit /emssettings EMSPORT:1 EMSBAUDRATE:115200<br />
   ```</p>
<p><strong>Linux (no login prompt):</strong></p>
<ol>
<li>Press <strong>Enter</strong> multiple times</li>
<li>Check if console is configured in GRUB:<br />
   ```bash<br />
   # Via SSH or Run Command if available<br />
   cat /etc/default/grub | grep console</li>
</ol>
<p># Should include: console=ttyS0,115200n8<br />
   ```</p>
<ol>
<li>Regenerate GRUB configuration:<br />
   ```bash<br />
   # Ubuntu/Debian<br />
   sudo update-grub</li>
</ol>
<p># RHEL/CentOS<br />
   sudo grub2-mkconfig -o /boot/grub2/grub.cfg<br />
   ```</p>
<h3>Storage Account Firewall Blocking Access</h3>
<p><strong>Error:</strong> "Web socket is closed or could not be opened"</p>
<p><strong>Cause:</strong> Boot diagnostics storage account has firewall enabled, blocking Azure Serial Console service</p>
<p><strong>Solution:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c"># Option 1: Switch to managed boot diagnostics (recommended)</span>
<span class="nv">$vm</span> <span class="p">=</span> <span class="nb">Get-AzVM</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;vm-app-001&quot;</span>
<span class="nb">Set-AzVMBootDiagnostic</span> <span class="n">-VM</span> <span class="nv">$vm</span> <span class="n">-Enable</span>
<span class="nb">Update-AzVM</span> <span class="n">-VM</span> <span class="nv">$vm</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod&quot;</span>

<span class="c"># Option 2: Add Serial Console service IPs to storage account firewall</span>
<span class="c"># Navigate to storage account ‚Üí Networking ‚Üí Firewall</span>
<span class="c"># Add IP ranges based on VM region:</span>
<span class="c"># - East US: 52.186.138.80/29</span>
<span class="c"># - West US: 52.250.65.160/29</span>
<span class="c"># - See Microsoft docs for full list by region</span>
</code></pre></div>

<h3>Insufficient Permissions</h3>
<p><strong>Error:</strong> "You do not have permission to access serial console"</p>
<p><strong>Required role:</strong> Virtual Machine Contributor or higher</p>
<div class="codehilite"><pre><span></span><code><span class="c"># Check current role assignments</span>
<span class="nb">Get-AzRoleAssignment</span> <span class="n">-ObjectId</span> <span class="p">&lt;</span><span class="n">your-user-object-id</span><span class="p">&gt;</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod&quot;</span>

<span class="c"># Grant access (by subscription owner)</span>
<span class="nb">New-AzRoleAssignment</span> <span class="n">-ObjectId</span> <span class="p">&lt;</span><span class="n">user-object-id</span><span class="p">&gt;</span> <span class="p">`</span>
    <span class="n">-RoleDefinitionName</span> <span class="s2">&quot;Virtual Machine Contributor&quot;</span> <span class="p">`</span>
    <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod&quot;</span>
</code></pre></div>

<h2>When Serial Console Doesn't Help</h2>
<p>Be honest: Serial Console isn't magic. Here's when it won't save you:</p>
<h3>Disk Corruption</h3>
<p><strong>Problem:</strong><br />
- Filesystem corruption<br />
- Missing boot files<br />
- Damaged disk</p>
<p><strong>Why Serial Console doesn't help:</strong><br />
- Can't repair filesystem while OS is using it<br />
- Boot loader corruption prevents even console access</p>
<p><strong>Solution:</strong> Offline disk repair</p>
<div class="codehilite"><pre><span></span><code><span class="c"># Attach OS disk to rescue VM</span>
<span class="nv">$disk</span> <span class="p">=</span> <span class="nb">Get-AzDisk</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod&quot;</span> <span class="n">-DiskName</span> <span class="s2">&quot;vm-app-001_OsDisk&quot;</span>

<span class="nv">$rescueVM</span> <span class="p">=</span> <span class="nb">Get-AzVM</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;vm-rescue-001&quot;</span>

<span class="nb">Add-AzVMDataDisk</span> <span class="n">-VM</span> <span class="nv">$rescueVM</span> <span class="p">`</span>
    <span class="n">-Name</span> <span class="s2">&quot;broken-os-disk&quot;</span> <span class="p">`</span>
    <span class="n">-ManagedDiskId</span> <span class="nv">$disk</span><span class="p">.</span><span class="n">Id</span> <span class="p">`</span>
    <span class="n">-Lun</span> <span class="n">1</span> <span class="p">`</span>
    <span class="n">-CreateOption</span> <span class="n">Attach</span>

<span class="nb">Update-AzVM</span> <span class="n">-VM</span> <span class="nv">$rescueVM</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod&quot;</span>

<span class="c"># Now RDP to rescue VM and repair disk as data disk</span>
<span class="c"># Use chkdsk (Windows) or fsck (Linux)</span>
</code></pre></div>

<h3>Complete Boot Failure (Kernel Panic/BSOD Loop)</h3>
<p><strong>Problem:</strong><br />
- VM crashes during boot<br />
- Kernel panic (Linux) or BSOD (Windows)<br />
- Never reaches point where Serial Console can help</p>
<p><strong>Why Serial Console doesn't help:</strong><br />
- OS never loads enough to accept console input<br />
- Can see boot messages but can't interact</p>
<p><strong>Solution:</strong> Boot diagnostics screenshot + offline repair</p>
<div class="codehilite"><pre><span></span><code><span class="c"># View boot diagnostics screenshot</span>
<span class="nv">$vm</span> <span class="p">=</span> <span class="nb">Get-AzVM</span> <span class="n">-ResourceGroupName</span> <span class="s2">&quot;rg-prod&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;vm-app-001&quot;</span>
<span class="nv">$vm</span><span class="p">.</span><span class="n">DiagnosticsProfile</span><span class="p">.</span><span class="n">BootDiagnostics</span><span class="p">.</span><span class="n">ConsoleScreenshotBlobUri</span>

<span class="c"># Screenshot shows error message but can&#39;t fix interactively</span>
<span class="c"># Must use offline disk repair or redeploy VM</span>
</code></pre></div>

<h3>Performance Issues</h3>
<p><strong>Problem:</strong><br />
- VM is slow<br />
- High CPU usage<br />
- Memory exhaustion</p>
<p><strong>Why Serial Console isn't ideal:</strong><br />
- Text-only interface is slow for performance troubleshooting<br />
- Better tools available (Azure Monitor, VM Insights)</p>
<p><strong>Better solution:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c"># Use Azure Monitor metrics</span>
<span class="nb">Get-AzMetric</span> <span class="n">-ResourceId</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Id</span> <span class="n">-MetricName</span> <span class="s2">&quot;Percentage CPU&quot;</span> <span class="n">-TimeGrain</span> <span class="n">00</span><span class="p">:</span><span class="n">05</span><span class="p">:</span><span class="n">00</span>

<span class="c"># Or install Azure Monitor Agent for detailed insights</span>
<span class="c"># (NOW you install AMA - for monitoring, not console access)</span>
</code></pre></div>

<h3>Complex GUI-Required Tasks</h3>
<p><strong>Problem:</strong><br />
- Need to use graphical tools<br />
- Registry Editor with visual navigation<br />
- Disk Management GUI</p>
<p><strong>Why Serial Console doesn't help:</strong><br />
- Command-line only<br />
- No graphics support</p>
<p><strong>Workaround:</strong> Use Azure Bastion or RDP if networking works, or offline disk repair</p>
<h2>The Real Lesson: Azure Isn't Missing VMware Features</h2>
<p><strong>Azure doesn't lack features VMware has‚Äîthe features are just hidden in weird places.</strong></p>
<h3>Feature Comparison</h3>
<table>
<thead>
<tr>
<th>VMware Feature</th>
<th>Azure Equivalent</th>
<th>Where to Find It</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>VM Console</strong></td>
<td>Serial Console</td>
<td>Help ‚Üí Boot Diagnostics ‚Üí Serial Console</td>
</tr>
<tr>
<td><strong>Console Screenshots</strong></td>
<td>Boot Diagnostics</td>
<td>Help ‚Üí Boot Diagnostics (screenshot updated every 60s)</td>
</tr>
<tr>
<td><strong>Remote Access</strong></td>
<td>Azure Bastion</td>
<td>VM ‚Üí Connect ‚Üí Bastion</td>
</tr>
<tr>
<td><strong>Power Management</strong></td>
<td>Portal Controls</td>
<td>VM ‚Üí Overview ‚Üí Start/Stop/Restart</td>
</tr>
<tr>
<td><strong>Performance Monitoring</strong></td>
<td>Azure Monitor</td>
<td>VM ‚Üí Monitoring ‚Üí Metrics</td>
</tr>
</tbody>
</table>
<p><strong>What VMware admins need to know:</strong><br />
1. Stop clicking "Connect" expecting VMware console behavior<br />
2. Bookmark: <code>VM ‚Üí Help ‚Üí Boot diagnostics ‚Üí Serial console</code><br />
3. Enable Serial Console at subscription level <strong>before</strong> emergencies<br />
4. Learn SAC commands (Windows) or GRUB escape (Linux)<br />
5. Don't install AMA thinking you need it for console access</p>
<h3>The Real VMware ‚Üí Azure Translation</h3>
<p><strong>VMware thinking:</strong></p>
<blockquote>
<p>"I need console access, let me click the console button"</p>
</blockquote>
<p><strong>Azure reality:</strong></p>
<blockquote>
<p>"There are two different features:<br />
- Connect button = daily remote access (Bastion/RDP/SSH)<br />
- Serial Console = emergency troubleshooting (buried in Help menu)"</p>
</blockquote>
<p><strong>VMware thinking:</strong></p>
<blockquote>
<p>"Console access must require some agent or extension"</p>
</blockquote>
<p><strong>Azure reality:</strong></p>
<blockquote>
<p>"Serial Console is hypervisor-level, no agent needed. AMA is for monitoring, not console."</p>
</blockquote>
<h2>Quick Reference Card</h2>
<p>Save this for your team:</p>
<div class="codehilite"><pre><span></span><code><span class="err">‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó</span>
<span class="err">‚ïë</span><span class="w">           </span><span class="n">AZURE</span><span class="w"> </span><span class="n">SERIAL</span><span class="w"> </span><span class="n">CONSOLE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">QUICK</span><span class="w"> </span><span class="n">REFERENCE</span><span class="w">              </span><span class="err">‚ïë</span>
<span class="err">‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£</span>
<span class="err">‚ïë</span><span class="w"> </span><span class="n">Where</span><span class="o">?</span><span class="w">    </span><span class="n">VM</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="n">Help</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="n">Diagnostics</span><span class="w"> </span><span class="err">‚Üí</span><span class="w"> </span><span class="n">Serial</span><span class="w"> </span><span class="n">Console</span><span class="w">      </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w"> </span><span class="n">Requires</span><span class="o">?</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="n">diagnostics</span><span class="w"> </span><span class="n">enabled</span><span class="p">,</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="n">running</span><span class="p">,</span><span class="w"> </span><span class="n">subscription</span><span class="w"> </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">           </span><span class="n">feature</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"> </span><span class="nb">NO</span><span class="w"> </span><span class="n">AMA</span><span class="w"> </span><span class="n">NEEDED</span><span class="p">.</span><span class="w">                     </span><span class="err">‚ïë</span>
<span class="err">‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£</span>
<span class="err">‚ïë</span><span class="w"> </span><span class="n">WINDOWS</span><span class="w"> </span><span class="p">(</span><span class="n">SAC</span><span class="p">)</span><span class="w">                                                 </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="n">SAC</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cmd</span><span class="w">          </span><span class="n">Create</span><span class="w"> </span><span class="n">CMD</span><span class="w"> </span><span class="n">channel</span><span class="w">                        </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="n">SAC</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ch</span><span class="w"> </span><span class="o">-</span><span class="n">sn</span><span class="w"> </span><span class="n">Cmd0001</span><span class="w">   </span><span class="n">Switch</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">channel</span><span class="w">                     </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="n">ESC</span><span class="o">+</span><span class="n">TAB</span><span class="w">           </span><span class="n">Activate</span><span class="w"> </span><span class="n">SAC</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="n">channels</span><span class="w">           </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="n">ipconfig</span><span class="w"> </span><span class="o">/</span><span class="n">all</span><span class="w">     </span><span class="n">Network</span><span class="w"> </span><span class="n">info</span><span class="w">                              </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="n">bcdedit</span><span class="w"> </span><span class="o">/</span><span class="k">enum</span><span class="w">     </span><span class="n">Boot</span><span class="w"> </span><span class="n">config</span><span class="w">                               </span><span class="err">‚ïë</span>
<span class="err">‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£</span>
<span class="err">‚ïë</span><span class="w"> </span><span class="n">LINUX</span><span class="w">                                                         </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="p">[</span><span class="n">Press</span><span class="w"> </span><span class="n">Enter</span><span class="p">]</span><span class="w">     </span><span class="n">Show</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="n">prompt</span><span class="w">                         </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="n">ip</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="n">show</span><span class="w">      </span><span class="n">Network</span><span class="w"> </span><span class="n">config</span><span class="w">                            </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="n">sudo</span><span class="w"> </span><span class="n">journalctl</span><span class="w"> </span><span class="o">-</span><span class="n">xb</span><span class="w">   </span><span class="n">Boot</span><span class="w"> </span><span class="n">logs</span><span class="w">                             </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="n">systemctl</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">sshd</span><span class="w">   </span><span class="n">Check</span><span class="w"> </span><span class="n">SSH</span><span class="w">                           </span><span class="err">‚ïë</span>
<span class="err">‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£</span>
<span class="err">‚ïë</span><span class="w"> </span><span class="n">WHEN</span><span class="w"> </span><span class="n">TO</span><span class="w"> </span><span class="n">USE</span><span class="w">                                                   </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="err">‚úì</span><span class="w"> </span><span class="n">Can</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">RDP</span><span class="o">/</span><span class="n">SSH</span><span class="w"> </span><span class="p">(</span><span class="n">network</span><span class="w"> </span><span class="n">broken</span><span class="p">)</span><span class="w">                            </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="err">‚úì</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="n">won</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">boot</span><span class="w"> </span><span class="p">(</span><span class="n">see</span><span class="w"> </span><span class="n">boot</span><span class="w"> </span><span class="n">messages</span><span class="p">)</span><span class="w">                         </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="err">‚úì</span><span class="w"> </span><span class="n">Locked</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="p">(</span><span class="n">reset</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">SAC</span><span class="p">)</span><span class="w">                   </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="err">‚úì</span><span class="w"> </span><span class="n">Firewall</span><span class="w"> </span><span class="n">misconfiguration</span><span class="w"> </span><span class="p">(</span><span class="n">fix</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">inside</span><span class="p">)</span><span class="w">               </span><span class="err">‚ïë</span>
<span class="err">‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£</span>
<span class="err">‚ïë</span><span class="w"> </span><span class="n">WHEN</span><span class="w"> </span><span class="n">IT</span><span class="w"> </span><span class="n">DOESN</span><span class="err">&#39;</span><span class="n">T</span><span class="w"> </span><span class="n">HELP</span><span class="w">                                          </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="err">‚úó</span><span class="w"> </span><span class="n">Disk</span><span class="w"> </span><span class="n">corruption</span><span class="w"> </span><span class="p">(</span><span class="n">use</span><span class="w"> </span><span class="n">offline</span><span class="w"> </span><span class="n">repair</span><span class="p">)</span><span class="w">                      </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="err">‚úó</span><span class="w"> </span><span class="n">Complete</span><span class="w"> </span><span class="n">boot</span><span class="w"> </span><span class="n">failure</span><span class="w"> </span><span class="p">(</span><span class="n">attach</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rescue</span><span class="w"> </span><span class="n">VM</span><span class="p">)</span><span class="w">          </span><span class="err">‚ïë</span>
<span class="err">‚ïë</span><span class="w">   </span><span class="err">‚úó</span><span class="w"> </span><span class="n">Performance</span><span class="w"> </span><span class="n">issues</span><span class="w"> </span><span class="p">(</span><span class="n">use</span><span class="w"> </span><span class="n">Azure</span><span class="w"> </span><span class="n">Monitor</span><span class="p">)</span><span class="w">                    </span><span class="err">‚ïë</span>
<span class="err">‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù</span>
</code></pre></div>

<h2>Summary: Stop Clicking the Wrong Button</h2>
<p>If you take nothing else away from this post:</p>
<ol>
<li>
<p><strong>The "Connect" button is not console access</strong> - it's Bastion/RDP/SSH (requires networking)</p>
</li>
<li>
<p><strong>Serial Console is the real console</strong> - hypervisor-level access in Help ‚Üí Boot Diagnostics</p>
</li>
<li>
<p><strong>You don't need Azure Monitor Agent for console access</strong> - Serial Console works without any agents</p>
</li>
<li>
<p><strong>Enable Serial Console now</strong>, before you need it in an emergency</p>
</li>
<li>
<p><strong>Learn the SAC commands</strong> (Windows) or basic Linux troubleshooting commands</p>
</li>
<li>
<p><strong>Keep offline disk repair in your back pocket</strong> for when Serial Console can't help</p>
</li>
</ol>
<p>Azure has the features VMware admins need. Microsoft just hid them in weird places and gave them confusing names. Now you know where to look.</p>
<hr />
<p><strong>Next time someone on your team says:</strong> <em>"Azure doesn't have a console like VMware"</em></p>
<p><strong>Send them here.</strong> They're just clicking the wrong button.</p>
<hr />
<h2>Additional Resources</h2>
<p><strong>Microsoft Official Docs:</strong><br />
- <a href="https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/windows/serial-console-windows">Serial Console for Windows VMs</a><br />
- <a href="https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/linux/serial-console-linux">Serial Console for Linux VMs</a><br />
- <a href="https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/windows/serial-console-enable-disable">Enable/Disable Serial Console</a></p>
<p><strong>PowerShell Scripts:</strong><br />
- Enable boot diagnostics at scale (see Step 4 above)<br />
- KQL query to find VMs without boot diagnostics (see above)</p>
<p><strong>Related Post Ideas:</strong><br />
- Offline disk repair in Azure (for when Serial Console fails)<br />
- Azure Bastion vs Serial Console vs RDP (when to use each)<br />
- Common Azure migration gotchas for VMware admins</p>
<hr />
<p><em>Have questions about Serial Console or other Azure operational topics? Let me know in the comments or reach out via the contact form.</em></p>
  </div>

  
  
  <aside class="related-posts">
    <h3>Related Posts</h3>
    <ul>
      
      <li>
        <a href="../azure-cmdb-wrong-cloud-fixes-it/index.html">
          <span class="related-title">Your CMDB Is Wrong (And Cloud Migration Fixes It)</span>
          <span class="related-meta">2025-10-11</span>
        </a>
      </li>
      
      <li>
        <a href="../azure-ipam-tool/index.html">
          <span class="related-title">Azure IPAM Tool for Multi-Subscription Environments | Free Open Source IP Tracking</span>
          <span class="related-meta">2025-10-06</span>
        </a>
      </li>
      
      <li>
        <a href="../azure-vm-automation-dependency-hell/index.html">
          <span class="related-title">Why Your Automation Fails on Fresh Azure VMs (And How I Fixed It)</span>
          <span class="related-meta">2025-09-29</span>
        </a>
      </li>
      
    </ul>
  </aside>
  

  
  <nav class="post-nav">
    
      <a href="../sccm-wsus-azure-update-manager-intune-confusion/index.html">‚Üê SCCM, WSUS, Azure Update Manager, Intune: Which One Do I Actually Use?</a>
    
    
      <a href="../azure-costs-apps-not-subscriptions/index.html">Understanding Azure Costs: Start with Apps, Not Subscriptions ‚Üí</a>
    
  </nav>

</article>

    </div>
  </main>

  <!-- EMAIL CAPTURE -->
  <section class="email-signup">
    <div class="wrap">
      <div class="email-box">
        <h3>Get Azure tips in your inbox</h3>
        <p>Join Azure pros getting practical KQL queries, cost optimization tips, and real-world solutions.</p>
        <script async data-uid="3dfad5c743" src="https://azure-noob.kit.com/3dfad5c743/index.js"></script>
      </div>
    </div>
  </section>

  <footer class="site-footer">
    <div class="wrap">
      <p>&copy; 2025 Azure Noob ‚Äî Don&#39;t be a Noob</p>
    </div>
  </footer>

  <!-- Copy code functionality -->
  <script src="../../static/copy-code.js"></script>
  <!-- Quest JS (SFX toggle, embers, typewriter) -->
</body>
</html>