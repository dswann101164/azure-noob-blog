<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  
  

  <!-- Primary SEO -->
  <title>Azure Migrate&#39;s 18-Month Data Deletion: The Enterprise Migration Timer Microsoft Calls &#39;Expected Behavior&#39; ¬∑ Azure Noob</title>
  <meta name="description" content="Azure Migrate appliances have an 18-month hard limit before mandatory re-registration that deletes all discovery data. Microsoft documents this as &#39;expected...">
  
  <link rel="canonical" href="https://azure-noob.com/blog/azure-migrate-certificate-18-month-limit" />

  <!-- Favicons -->
  <link rel="icon" href="/static/images/logo.png">

  <!-- Open Graph -->
  <meta property="og:title" content="Azure Migrate&#39;s 18-Month Data Deletion: The Enterprise Migration Timer Microsoft Calls &#39;Expected Behavior&#39;">
  <meta property="og:description" content="Azure Migrate appliances have an 18-month hard limit before mandatory re-registration that deletes all discovery data. Microsoft documents this as &#39;expected...">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://azure-noob.com/blog/azure-migrate-certificate-18-month-limit">
  <meta property="og:image" content="https://azure-noob.com/static/images/hero/azure-migrate-18-month-timer.png">

  
    <meta property="article:published_time" content="2025-12-16T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-12-16T00:00:00+00:00">
    <meta property="article:author" content="David Swann">
    
      
        <meta property="article:tag" content="Azure">
      
        <meta property="article:tag" content="Migration">
      
        <meta property="article:tag" content="Azure Migrate">
      
        <meta property="article:tag" content="Enterprise Reality">
      
        <meta property="article:tag" content="Governance">
      
        <meta property="article:tag" content="Compliance">
      
        <meta property="article:tag" content="Certificate Management">
      
    
  

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Azure Migrate&#39;s 18-Month Data Deletion: The Enterprise Migration Timer Microsoft Calls &#39;Expected Behavior&#39;">
  <meta name="twitter:description" content="Azure Migrate appliances have an 18-month hard limit before mandatory re-registration that deletes all discovery data. Microsoft documents this as &#39;expected...">
  <meta name="twitter:image" content="https://azure-noob.com/static/images/hero/azure-migrate-18-month-timer.png">

  <!-- Styles -->
  <link rel="stylesheet" href="/static/styles.css">

  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="Azure Noob RSS Feed" href="https://azure-noob.com/rss.xml">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNHGEB0BNZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZNHGEB0BNZ');
  </script>
</head>
<body>
  <header class="site-header">
    <div class="wrap nav-wrap">
      <div class="brand-block">
        <a href="/" class="brand-link">
          <img src="/static/images/logo.png" alt="Azure Noob logo" class="logo">
        </a>
        <span class="brand-text">
          <small>Official Website of</small>
          <strong>Azure Noob</strong>
        </span>
      </div>
      <nav class="nav">
        <a href="/">Home</a>
        <a href="/blog/">Blog</a>
        <a href="/hubs/" style="font-weight: 700;">Content Hubs</a>
        <a href="/start-here">Start Here</a>
        <a href="/blog/starter-kit/">Starter Kit</a>
        <a href="/about">About</a>
        <a href="/tags/">Tags</a>
        <a href="https://github.com/dswann101164" target="_blank" rel="noopener">GitHub</a>
        <a href="/search">Search</a>
      </nav>
    </div>
  </header>

  <main class="site-content">
    <div class="wrap">
      


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Azure Migrate&#39;s 18-Month Data Deletion: The Enterprise Migration Timer Microsoft Calls &#39;Expected Behavior&#39;",
  "description": "Azure Migrate appliances have an 18-month hard limit before mandatory re-registration that deletes all discovery data. Microsoft documents this as &#39;expected...",
  "image": {
    "@type": "ImageObject",
    "url": "https://azure-noob.com/static/images/hero/azure-migrate-18-month-timer.png",
    "width": 1200,
    "height": 630
  },
  "author": {
    "@type": "Person",
    "name": "David Swann",
    "url": "https://azure-noob.com/about/",
    "description": "Azure Architect specializing in enterprise cloud infrastructure",
    "jobTitle": "Azure Architect",
    "worksFor": {
      "@type": "Organization",
      "name": "Synovus"
    }
  },
  "publisher": {
    "@type": "Organization",
    "name": "Azure Noob",
    "url": "https://azure-noob.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://azure-noob.com/static/images/logo.png"
    }
  },
  "datePublished": "2025-12-16T00:00:00+00:00",
  "dateModified": "2025-12-16T00:00:00+00:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://azure-noob.com/blog/azure-migrate-certificate-18-month-limit"
  },
  "keywords": "Azure, Migration, Azure Migrate, Enterprise Reality, Governance, Compliance, Certificate Management",
  "articleSection": "Azure",
  "wordCount": "2704",
  "timeRequired": "PT14M",
  "inLanguage": "en-US",
  "isAccessibleForFree": "True",
  "about": {
    "@type": "Thing",
    "name": "Azure"
  }
}
</script>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://azure-noob.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Blog",
      "item": "https://azure-noob.com/blog/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Azure Migrate&#39;s 18-Month Data Deletion: The Enterprise Migration Timer Microsoft Calls &#39;Expected Behavior&#39;",
      "item": "https://azure-noob.com/blog/azure-migrate-certificate-18-month-limit"
    }
  ]
}
</script>




<article class="post">

  
  
    
    <div class="hero">
      <img src="/static/images/hero/azure-migrate-18-month-timer.png" alt="Azure Migrate&#39;s 18-Month Data Deletion: The Enterprise Migration Timer Microsoft Calls &#39;Expected Behavior&#39;" loading="eager">
    </div>
  

  <header class="post-header">
    <h1>Azure Migrate&#39;s 18-Month Data Deletion: The Enterprise Migration Timer Microsoft Calls &#39;Expected Behavior&#39;</h1>
    <p class="muted">
      2025-12-16 ¬∑ ~14 min read
      
    </p>
    
    
    <ul class="tags-list">
      
      <li><a href="/tags/Azure" class="tag-badge">Azure</a></li>
      
      <li><a href="/tags/Migration" class="tag-badge">Migration</a></li>
      
      <li><a href="/tags/Azure%20Migrate" class="tag-badge">Azure Migrate</a></li>
      
      <li><a href="/tags/Enterprise%20Reality" class="tag-badge">Enterprise Reality</a></li>
      
      <li><a href="/tags/Governance" class="tag-badge">Governance</a></li>
      
      <li><a href="/tags/Compliance" class="tag-badge">Compliance</a></li>
      
      <li><a href="/tags/Certificate%20Management" class="tag-badge">Certificate Management</a></li>
      
    </ul>
    
    
    
      <p class="summary">Azure Migrate appliances have an 18-month hard limit before mandatory re-registration that deletes all discovery data. Microsoft documents this as &#39;expected behavior&#39; in the FAQ but provides no alerts, no data preservation, and no migration path. The certificate expires at 12 months with one 6-month extension available, then forces complete appliance reconfiguration with total data loss at month 18.</p>
    
  </header>

  
  <p class="post-actions" style="margin:.5rem 0 0; text-align: center;">
    <button class="btn"
            onclick="window.print(); return false;"
            title="Print this page"
            aria-label="Print this page"
            style="cursor: pointer; background: none; border: 2px solid var(--azure-blue);">
      üñ®Ô∏è Print this page
    </button>
  </p>

  
  <div class="post-body">
    <h1>Azure Migrate's 18-Month Data Deletion: The Enterprise Migration Timer Microsoft Calls 'Expected Behavior'</h1>
<h2>Short Answer</h2>
<p>Azure Migrate appliance certificates expire after 365 days with a one-time 6-month extension available via PowerShell script, creating an 18-month hard limit before mandatory re-registration. Re-registration requires running a cleanup script that deletes all discovery data, assessment history, and dependency mappings accumulated over 18 months. Microsoft documents this as "expected behavior" in the FAQ section but provides no proactive alerts, no data preservation option, and no migration path. Organizations discover this limitation either through proactive certificate monitoring (rare) or when authentication fails during active migration projects (common), forcing them to restart discovery from zero during critical migration phases.</p>
<h2>Why do Azure Migrate appliances stop working after 18 months?</h2>
<p>Our Logic App that monitors certificate expirations flagged something unusual: three Azure Migrate appliances with certificates expiring in 28 days.</p>
<p>I opened a Microsoft support ticket expecting a standard renewal process.</p>
<p><strong>Support response:</strong></p>
<blockquote>
<p>"The Entra ID app certificate can be rotated using a PowerShell script. This extends the certificate validity for an additional 6 months. After that, you'll need to re-register the appliance."</p>
</blockquote>
<p><strong>Me:</strong> "Wait. Six months? Not another year? And what's 're-register'?"</p>
<p><strong>Support:</strong> "Correct. After the 6-month extension, the appliance must be reconfigured. You'll need to run the cleanup script and start discovery over."</p>
<p><strong>Me:</strong> "Start over? What happens to our 18 months of discovery data?"</p>
<p><strong>Support:</strong> "The data will be deleted. It's documented behavior."</p>
<hr />
<p>I checked Microsoft's documentation. This <strong>critical limitation</strong> is mentioned exactly <strong>once</strong> - buried in the FAQ section, question 20+ deep, with no warning during appliance deployment.</p>
<p>Here's the timeline Microsoft doesn't explain during deployment:</p>
<p><strong>Month 0:</strong> Deploy Azure Migrate appliance<br />
<strong>Months 1-11:</strong> Discovery runs continuously, dependency mapping builds, assessments accumulate<br />
<strong>Month 12:</strong> Entra ID app certificate expires (365 days)<br />
<strong>Month 12:</strong> Run <code>AzureMigrateRotateCertificate.ps1</code> ‚Üí <strong>+6 months extension</strong><br />
<strong>Month 18:</strong> Certificate expires again ‚Üí <strong>No more extensions available</strong><br />
<strong>Month 18:</strong> Must re-register appliance = <strong>all historical data deleted</strong></p>
<p><strong>For enterprise migrations that take 18-24 months, you're guaranteed to lose discovery data mid-project.</strong></p>
<p>This is part of our <a href="/hub/migration/">Azure Migration hub</a> covering pre-migration planning, assessment reality checks, and lessons learned from real enterprise migrations at scale.</p>
<hr />
<h2>What exactly happens when you "re-register" an Azure Migrate appliance?</h2>
<p><strong>Cause:</strong> The Entra ID application certificate reaches 18 months (365 days + 6-month extension) with no further renewal options available.</p>
<p><strong>Effect:</strong> Discovery stops, assessments break, dependency mapping fails, and re-registration forces a complete appliance reconfiguration that deletes 18 months of accumulated migration intelligence.</p>
<p><strong>What to do:</strong> Deploy certificate expiration monitoring before the 365-day window, run the rotation script at month 12 to gain 6 additional months, and plan for complete appliance redeployment with data loss before month 18.</p>
<hr />
<p>From Microsoft's official documentation (<a href="https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/migrate/common-questions-appliance.md">common-questions-appliance.md</a>):</p>
<blockquote>
<p><strong>"To use the appliance with a different subscription or project, you would need to reconfigure the existing appliance by running the PowerShell installer script... The script will clean up the existing appliance components and settings to deploy a fresh appliance."</strong></p>
<p><strong>"Also, you cannot reuse an existing project key on a reconfigured appliance."</strong></p>
</blockquote>
<p><strong>Translation of "clean up the existing appliance components":</strong></p>
<ul>
<li>Discovery history: <strong>Deleted</strong></li>
<li>Assessment data: <strong>Deleted</strong></li>
<li>Dependency mappings: <strong>Deleted</strong></li>
<li>Server metadata: <strong>Deleted</strong></li>
<li>Performance baselines: <strong>Deleted</strong></li>
</ul>
<p><strong>Everything.</strong></p>
<p>And from Microsoft Q&amp;A (Question 1150140), when an admin asked about re-registration:</p>
<blockquote>
<p><strong>Microsoft Support:</strong> "You can try re-registering the appliance with the new project using another user account via PowerShell script but <strong>it will break all the operations in the old project.</strong>"</p>
</blockquote>
<p>They won't say "you lose all your data" in public documentation. They say "break all the operations."</p>
<hr />
<h2>Why doesn't Microsoft warn you about the 18-month limit?</h2>
<p><strong>Where this IS documented:</strong><br />
- Azure Migrate Appliance FAQ (question buried 20+ deep)<br />
- One line: "default expiry period for the associated AD APP will be one year"<br />
- Another line: "extend its validity for an additional 6 months"</p>
<p><strong>Where this ISN'T documented:</strong><br />
- Appliance deployment wizard<br />
- Azure Portal during registration<br />
- Azure Migrate project creation<br />
- Getting Started guides<br />
- Migration planning documentation<br />
- Anywhere with actual visibility</p>
<p><strong>The notification you get:</strong><br />
- <strong>None</strong><br />
- Azure doesn't alert you<br />
- The appliance doesn't warn you<br />
- You discover this when authentication fails</p>
<p><strong>The proactive monitoring Microsoft provides:</strong><br />
- <strong>None</strong><br />
- No Azure Monitor alert option<br />
- No email notifications<br />
- No portal warnings<br />
- No "certificate expires in 30 days" message</p>
<p><strong>You find out when:</strong><br />
- Discovery stops working<br />
- Assessments fail to generate<br />
- Migration waves can't start<br />
- Support ticket reveals "working as designed"</p>
<hr />
<h2>How we discovered this before it killed our migration</h2>
<p>We deployed a Logic App to monitor expiring certificates across our Azure environment - primarily tracking app registrations and Key Vault certificates for security compliance.</p>
<p><strong>We weren't looking for Azure Migrate appliances specifically.</strong></p>
<p>The Logic App flagged them as part of its standard sweep of Entra ID applications with expiring certificates.</p>
<p><strong>The alert that appeared:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Subject</span><span class="o">:</span><span class="w"> </span><span class="n">Certificate</span><span class="w"> </span><span class="n">Expiration</span><span class="w"> </span><span class="n">Alert</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="n">Applications</span>

<span class="n">Applications</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="n">expiring</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="n">days</span><span class="o">:</span>

<span class="o">...</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="o">:</span><span class="w"> </span><span class="n">AzureMigrate</span><span class="o">-</span><span class="n">DC1</span><span class="o">-</span><span class="n">Appliance</span>
<span class="w">  </span><span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">Principal</span>
<span class="w">  </span><span class="n">Expires</span><span class="o">:</span><span class="w"> </span><span class="mi">2026</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">15</span>
<span class="w">  </span><span class="n">Certificate</span><span class="w"> </span><span class="n">Thumbprint</span><span class="o">:</span><span class="w"> </span><span class="n">A1B2C3D4</span><span class="o">...</span>

<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="o">:</span><span class="w"> </span><span class="n">AzureMigrate</span><span class="o">-</span><span class="n">DC2</span><span class="o">-</span><span class="n">Appliance</span><span class="w">  </span>
<span class="w">  </span><span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">Principal</span>
<span class="w">  </span><span class="n">Expires</span><span class="o">:</span><span class="w"> </span><span class="mi">2026</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">15</span>
<span class="w">  </span><span class="n">Certificate</span><span class="w"> </span><span class="n">Thumbprint</span><span class="o">:</span><span class="w"> </span><span class="n">E5F6G7H8</span><span class="o">...</span>

<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="o">:</span><span class="w"> </span><span class="n">AzureMigrate</span><span class="o">-</span><span class="n">DR</span><span class="o">-</span><span class="n">Appliance</span>
<span class="w">  </span><span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">Principal</span>
<span class="w">  </span><span class="n">Expires</span><span class="o">:</span><span class="w"> </span><span class="mi">2026</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">18</span>
<span class="w">  </span><span class="n">Certificate</span><span class="w"> </span><span class="n">Thumbprint</span><span class="o">:</span><span class="w"> </span><span class="n">I9J0K1L2</span><span class="o">...</span>
<span class="o">...</span>
</code></pre></div>

<p><strong>Our first reaction:</strong> "What are these? We don't manage applications named 'AzureMigrate'."</p>
<p><strong>Second reaction:</strong> "Wait. These are our migration appliances."</p>
<p><strong>Third reaction:</strong> "Why do they have expiring certificates?"</p>
<p>That's when we opened the Microsoft support ticket.</p>
<p><strong>The Logic App wasn't built for this problem - it just happened to catch it.</strong></p>
<hr />
<h2>The Logic App that accidentally saved our migration</h2>
<p><strong>Original purpose:</strong><br />
- Monitor app registration certificates (security compliance requirement)<br />
- Track Key Vault certificate expirations (prevent service outages)<br />
- Alert 30 days before expiration (give teams time to renew)</p>
<p><strong>What it actually caught:</strong><br />
- 3 Azure Migrate appliances we'd forgotten about<br />
- Certificate expirations we didn't know existed<br />
- A Microsoft-documented "feature" we'd never read about</p>
<p><strong>The query:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c">// Query all Entra ID applications with certificates</span>
<span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.aadiam/servicePrincipals&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">certDetails</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">keyCredentials</span>
<span class="p">|</span><span class="w"> </span><span class="k">mv-expand</span><span class="w"> </span><span class="n">certDetails</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">expiryDate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">todatetime</span><span class="p">(</span><span class="n">certDetails</span><span class="err">.</span><span class="n">endDate</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">expiryDate</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="n">now</span><span class="p">()</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="mi">30</span><span class="n">d</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span>
<span class="w">    </span><span class="n">appName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<span class="w">    </span><span class="n">appId</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">appId</span><span class="p">,</span>
<span class="w">    </span><span class="n">expiryDate</span><span class="p">,</span>
<span class="w">    </span><span class="n">thumbprint</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">certDetails</span><span class="err">.</span><span class="n">customKeyIdentifier</span><span class="p">),</span>
<span class="w">    </span><span class="n">daysUntilExpiry</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">datetime_diff</span><span class="p">(</span><span class="s">&#39;day&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">expiryDate</span><span class="p">,</span><span class="w"> </span><span class="n">now</span><span class="p">())</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">daysUntilExpiry</span><span class="w"> </span><span class="n">asc</span>
</code></pre></div>

<p><strong>The Logic App workflow:</strong></p>
<ol>
<li><strong>Daily trigger</strong> - 6 AM UTC</li>
<li><strong>Query Entra ID</strong> - Find all applications with certificates</li>
<li><strong>Filter expiring certs</strong> - Anything &lt; 30 days</li>
<li><strong>Send consolidated email</strong> - All expiring certificates in one alert</li>
<li><strong>Include remediation links</strong> - Generic "contact app owner" guidance</li>
</ol>
<p><strong>Why this worked:</strong></p>
<p>Azure Migrate appliances register themselves as Entra ID applications during deployment. The certificate rotation problem exists at the Entra ID layer, not the appliance layer.</p>
<p>Our security compliance Logic App didn't care <strong>what</strong> the application was for - it just flagged <strong>any</strong> certificate expiring soon.</p>
<p><strong>The irony:</strong></p>
<ul>
<li>We built this for security compliance</li>
<li>It accidentally caught an operational problem</li>
<li>Microsoft should provide this monitoring</li>
<li>But they don't</li>
<li>So our compliance tool became our migration safety net</li>
</ul>
<hr />
<p><strong>Without this Logic App, we would have discovered the expiration when:</strong><br />
- Discovery stopped working mid-migration<br />
- Assessment reports failed during wave planning<br />
- Migration validation broke during execution<br />
- Support ticket revealed "working as designed, should have read the FAQ"</p>
<hr />
<h2>What's the actual certificate rotation process?</h2>
<p>Microsoft provides a PowerShell script for the 6-month extension. Here's what you run:</p>
<p><strong>Step 1: Open elevated PowerShell on the appliance VM</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nb">cd </span><span class="n">C</span><span class="p">:\</span><span class="s1">&#39;Program Files&#39;</span><span class="p">\</span><span class="s1">&#39;Microsoft Azure Appliance Configuration Manager&#39;</span><span class="p">\</span><span class="n">Scripts</span><span class="p">\</span><span class="n">PowerShell</span><span class="p">\</span><span class="n">AzureMigrateCertificateRotation</span>
</code></pre></div>

<p><strong>Step 2: Run the rotation script</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">.\</span><span class="n">AzureMigrateRotateCertificate</span><span class="p">.</span><span class="n">ps1</span>
</code></pre></div>

<p><strong>What the script does:</strong><br />
1. Fetches Key Vault name and certificate details from appliance config<br />
2. Generates new public/private key pair in Key Vault<br />
3. Imports new certificate to appliance in PFX format<br />
4. Deletes old certificate from Entra ID app<br />
5. Attaches new certificate to Entra ID app<br />
6. Updates appliance configuration files<br />
7. Restarts Azure Migrate agents</p>
<p><strong>Duration:</strong> 5-10 minutes<br />
<strong>Downtime:</strong> Discovery pauses during agent restart<br />
<strong>Result:</strong> +6 months of validity  </p>
<p><strong>Critical limitation:</strong> This can only be run <strong>once</strong>. After the 6-month extension, no further rotation is possible.</p>
<hr />
<h2>What happens at month 18 when the extension expires?</h2>
<p><strong>Option 1: Re-register the appliance (lose all data)</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c"># Run on appliance VM</span>
<span class="nb">cd </span><span class="n">C</span><span class="p">:\</span><span class="s1">&#39;Program Files&#39;</span><span class="p">\</span><span class="s1">&#39;Microsoft Azure Appliance Configuration Manager&#39;</span><span class="p">\</span><span class="n">Scripts</span>
<span class="p">.\</span><span class="n">AzureMigrateInstaller</span><span class="p">.</span><span class="n">ps1</span> <span class="n">-Scenario</span> <span class="n">VMware</span>
</code></pre></div>

<p><strong>This script:</strong><br />
- Deletes all appliance configuration<br />
- Removes discovery data<br />
- Clears assessment cache<br />
- Resets dependency mappings<br />
- Requires new project key from Azure Portal</p>
<p><strong>Result:</strong> Clean appliance, zero historical data.</p>
<p><strong>Option 2: Deploy a new appliance (start over)</strong></p>
<ul>
<li>Download new OVA/VHD template</li>
<li>Deploy to different VM</li>
<li>Register with new project key</li>
<li>Re-run complete discovery</li>
<li>Rebuild assessment baselines</li>
</ul>
<p><strong>Result:</strong> Same as Option 1, but with a fresh VM.</p>
<p><strong>Option 3: Accept the data loss and continue</strong></p>
<ul>
<li>Wait for certificate to expire</li>
<li>Discovery fails</li>
<li>Fix it reactively</li>
<li>Lose 18 months of dependency insights</li>
</ul>
<p><strong>Result:</strong> Same outcome, worse timing.</p>
<hr />
<h2>Why this is a disaster for enterprise migrations</h2>
<p><strong>Typical enterprise Azure migration timeline:</strong></p>
<p><strong>Months 1-3:</strong> Discovery and initial assessment<br />
<strong>Months 4-6:</strong> Dependency mapping and application grouping<br />
<strong>Months 7-9:</strong> Migration wave planning and piloting<br />
<strong>Months 10-12:</strong> Wave 1 migration execution<br />
<strong>Months 13-15:</strong> Wave 2-3 execution<br />
<strong>Months 16-18:</strong> Final wave execution and optimization<br />
<strong>Months 19-24:</strong> Post-migration validation and decommissioning</p>
<p><strong>Azure Migrate appliance lifecycle:</strong></p>
<p><strong>Months 1-11:</strong> Discovery accumulates<br />
<strong>Month 12:</strong> Certificate expires ‚Üí Run rotation script (+6 months)<br />
<strong>Months 13-17:</strong> Continue discovery<br />
<strong>Month 18:</strong> Certificate expires ‚Üí <strong>Mandatory data deletion</strong><br />
<strong>Months 19-24:</strong> <strong>Start discovery over during final migration phases</strong></p>
<p><strong>The problem:</strong></p>
<p>Your migration waves are based on dependency maps built over 18 months. You've identified:<br />
- Application groups<br />
- Database dependencies<br />
- Network flow patterns<br />
- Authentication dependencies<br />
- Shared services</p>
<p><strong>At month 18, you lose:</strong><br />
- All dependency data<br />
- Historical performance baselines<br />
- Assessment trending<br />
- Migration wave validation data</p>
<p><strong>And you're forced to:</strong><br />
- Restart discovery from zero<br />
- Wait 30 days for new dependency maps<br />
- Re-validate application groups<br />
- Potentially miss hidden dependencies<br />
- Risk migration failures</p>
<hr />
<h2>The bigger pattern: Enterprise Azure requires operational tooling Microsoft doesn't provide</h2>
<p>This is the same pattern we've documented across Azure operations:</p>
<p><strong>Azure Migrate:</strong> Provides discovery, hides the 18-month self-destruct timer<br />
<strong>Azure Arc:</strong> Provides hybrid management, <a href="/blog/azure-arc-ghost-registrations/">creates 64% ghost registrations</a><br />
<strong>Azure Monitor Workbooks:</strong> Provides dashboards, <a href="/blog/modernizing-azure-workbooks/">abandons them after 2 years</a><br />
<strong>Azure Cost Management:</strong> Provides cost data, <a href="/blog/azure-cost-optimization-what-actually-works/">can't handle application-level allocation</a></p>
<p>Microsoft builds the service. You build the operational monitoring. They call it "cloud maturity." We call it "filling the gaps."</p>
<p><strong>The operational reality:</strong></p>
<ul>
<li>Deploy Azure Migrate appliance: <strong>45 minutes</strong></li>
<li>Read documentation to discover 18-month limit: <strong>Never, it's not in the deployment docs</strong></li>
<li>Build certificate monitoring Logic App: <strong>4 hours</strong></li>
<li>Document rotation procedures: <strong>2 hours</strong></li>
<li>Plan for 18-month redeployment: <strong>8 hours</strong></li>
<li>Total operational overhead: <strong>~15 hours</strong></li>
</ul>
<p><strong>What Microsoft should provide:</strong></p>
<ul>
<li>Automatic certificate renewal (like every other Azure service)</li>
<li>Portal alerts 90 days before expiration</li>
<li>Data export before re-registration</li>
<li>Migration path from old to new appliance</li>
<li>Or just remove the 18-month limit entirely</li>
</ul>
<hr />
<h2>What you should do before deploying Azure Migrate</h2>
<p><strong>Pre-deployment checklist:</strong></p>
<ol>
<li>‚úÖ <strong>Document deployment date</strong> - The 18-month clock starts immediately</li>
<li>‚úÖ <strong>Set calendar reminders:</strong></li>
<li>Day 300: Certificate expires in 65 days</li>
<li>Day 330: Certificate expires in 35 days (rotation time)</li>
<li>Day 350: Certificate expires in 15 days (escalate if not rotated)</li>
<li>Month 17: Plan for appliance replacement</li>
<li>‚úÖ <strong>Deploy certificate monitoring</strong> - Logic App or Azure Monitor</li>
<li>‚úÖ <strong>Document rotation procedures</strong> - PowerShell script location, required permissions</li>
<li>‚úÖ <strong>Plan for 18-month replacement</strong> - Budget, timeline, communication</li>
<li>‚úÖ <strong>Test rotation in lab</strong> - Don't learn the process in production</li>
<li>‚úÖ <strong>Export assessment data quarterly</strong> - Manual backup since Azure won't preserve it</li>
</ol>
<p><strong>Operational procedures:</strong></p>
<p><strong>Month 12 - Certificate Rotation</strong><br />
- Schedule maintenance window (10 minutes)<br />
- Run <code>AzureMigrateRotateCertificate.ps1</code><br />
- Verify discovery resumes<br />
- Document completion</p>
<p><strong>Month 17 - Replacement Planning</strong><br />
- Deploy new appliance<br />
- Run parallel discovery for 30 days<br />
- Validate dependency parity<br />
- Plan cutover</p>
<p><strong>Month 18 - Cutover</strong><br />
- Switch production workflows to new appliance<br />
- Export final data from old appliance<br />
- Decommission old appliance<br />
- Update documentation</p>
<hr />
<h2>What should Microsoft change?</h2>
<p><strong>Minimum viable fix:</strong></p>
<ul>
<li>Portal alerts 90/60/30 days before expiration</li>
<li>Email notifications to project owners</li>
<li>Warning banner in Azure Migrate dashboard</li>
</ul>
<p><strong>Better fix:</strong></p>
<ul>
<li>Automatic certificate renewal (every other Azure service does this)</li>
<li>Extend rotation to 12 months instead of 6 months</li>
<li>Allow multiple rotations instead of one-time extension</li>
</ul>
<p><strong>Actual fix:</strong></p>
<ul>
<li>Remove the 18-month limit entirely</li>
<li>Provide appliance-to-appliance migration</li>
<li>Preserve discovery data during re-registration</li>
<li>Make this work like enterprise software should</li>
</ul>
<p><strong>What we actually get:</strong></p>
<ul>
<li>FAQ documentation</li>
<li>"Expected behavior" support responses</li>
<li>Admins building their own monitoring</li>
<li>Another operational gap to fill</li>
</ul>
<hr />
<h2>The documentation Microsoft should have provided but didn't</h2>
<p>From <a href="https://learn.microsoft.com/en-us/azure/migrate/common-questions-appliance">Azure Migrate Appliance FAQ</a>:</p>
<blockquote>
<p><strong>"For a newly created Migrate appliance, the default expiry period for the associated AD APP (Entra Application) will be one year. To extend the validity of the Azure AD app, follow these steps..."</strong></p>
</blockquote>
<p><strong>What it should say:</strong></p>
<blockquote>
<p><strong>WARNING: Azure Migrate appliances have an 18-month operational lifespan before mandatory data deletion.</strong></p>
<p>The Entra ID application certificate expires after 365 days. You can extend once for 6 additional months using a PowerShell script. After 18 months total, the appliance must be re-registered, which deletes all discovery data, assessment history, and dependency mappings.</p>
<p><strong>For enterprise migrations longer than 18 months:</strong><br />
- Plan appliance replacement before month 17<br />
- Deploy certificate monitoring immediately<br />
- Export assessment data quarterly<br />
- Budget for parallel discovery during cutover</p>
<p><strong>Microsoft does not provide:</strong><br />
- Proactive expiration alerts<br />
- Automatic certificate renewal<br />
- Data preservation during re-registration<br />
- Appliance-to-appliance migration tools</p>
</blockquote>
  </div>

  
  <section class="starter-kit-callout" style="
    max-width: 800px;
    margin: 3rem auto 2rem;
    padding: 2rem;
    border-radius: 12px;
    background: var(--bg-light);
    border: 1px solid var(--border);
    text-align: left;
  ">
    <h3 style="margin-top: 0;">Azure Admin Starter Kit (Free Download)</h3>
    <p style="margin-bottom: 1rem;">
      Get my KQL cheat sheet, 50 Windows + 50 Linux commands, and an Azure RACI template in one free bundle.
    </p>
    <a href="/blog/starter-kit/" class="btn">Get the Starter Kit ‚Üí</a>
  </section>

  
  <aside class="email-capture" style="max-width: 800px; margin: 4rem auto; padding: 3rem; background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%); border-radius: 12px; text-align: center; color: white;">
    <h3 style="margin-top: 0; color: white; font-size: 1.75rem;">Get Azure operational guides in your inbox</h3>
    <p style="margin: 1rem 0 2rem; font-size: 1.1rem; color: white;">Weekly tips from managing 44 Azure subscriptions. No marketing BS.</p>
    
    <form action="https://app.kit.com/forms/8896829/subscriptions" method="post" style="max-width: 500px; margin: 0 auto; display: flex; gap: 0.75rem; flex-wrap: wrap; justify-content: center;">
      <input type="email" 
             name="email_address" 
             placeholder="your@email.com" 
             required 
             style="flex: 1; min-width: 250px; padding: 0.875rem 1rem; border: none; border-radius: 8px; font-size: 1rem; color: #333;">
      <button type="submit" 
              style="padding: 0.875rem 2rem; background: white; color: #0078d4; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; white-space: nowrap; font-size: 1rem; transition: all 0.2s;">
        Subscribe
      </button>
    </form>
    
    <p style="margin: 1.5rem 0 0; font-size: 0.9rem; opacity: 0.9; color: white;">
      Join 500+ Azure admins. Unsubscribe anytime.
    </p>
  </aside>

  
  
  <aside class="related-posts" style="max-width: 800px; margin: 3rem auto; padding: 2rem; background: var(--bg-light); border-radius: 12px;">
    <h3 style="margin-top: 0;">Related Posts</h3>
    <ul style="list-style: none; padding: 0;">
      
      <li style="margin: 1rem 0;">
        <a href="/blog/azqr-persistent-dashboard" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Building a Persistent Azure Operations Dashboard (AZQR + App Service + Storage)</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-12-17</span>
        </a>
      </li>
      
      <li style="margin: 1rem 0;">
        <a href="/blog/azure-policy-doesnt-fix-bad-architecture" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Azure Policy Doesn&#39;t Fix Bad Architecture (Microsoft Pretends It Does)</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-12-15</span>
        </a>
      </li>
      
      <li style="margin: 1rem 0;">
        <a href="/blog/azure-hybrid-benefit-complete" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Azure Hybrid Benefit vs. Cloud License: The $50K Licensing Mistake Every Azure Admin Must Avoid</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-12-11</span>
        </a>
      </li>
      
    </ul>
  </aside>
  

  
  
  
    <!-- CTA: Azure Migration Assessment Framework -->
<div class="cta-block" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); padding: 2rem; border-radius: 8px; margin: 3rem 0; text-align: center; color: white;">
  <h3 style="margin: 0 0 1rem; font-size: 1.75rem; color: white;">‚úã Stop. Don't Migrate Yet.</h3>
  <p style="margin: 0 0 1.5rem; font-size: 1.1rem; line-height: 1.6;">
    Answer <strong>55 questions about each application</strong> before touching Azure Migrate.
    This framework prevents the $2M mistakes that kill enterprise migrations.
  </p>
  <a href="/static/downloads/Azure-Integration-Assessment-Framework.xlsx" 
     download
     style="display: inline-block; padding: 0.75rem 2rem; background: white; color: #330867; text-decoration: none; border-radius: 6px; font-weight: 700; font-size: 1.1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: all 0.3s ease;"
     onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,0,0,0.2)'"
     onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)'">
    Get the Migration Assessment Framework
  </a>
  <p style="margin: 1rem 0 0; font-size: 0.9rem; opacity: 0.9;">
    Excel template ‚Ä¢ Complete instructions included ‚Ä¢ No email required
  </p>
</div>
  

  
  <nav class="post-nav">
    
      <a href="/blog/azure-subscriptions-security-billing-boundary">
        <span style="opacity: 0.7; font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">‚Üê Previous</span>
        <strong>Why Azure Subscriptions Are Both a Security Boundary and a Billing One (And Why That Breaks Everything)</strong>
      </a>
    
    
      <a href="/blog/azure-governance-napkin-test" style="text-align: right;">
        <span style="opacity: 0.7; font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Next ‚Üí</span>
        <strong>You Can&#39;t Govern What You Can&#39;t Explain on a Napkin</strong>
      </a>
    
  </nav>

</article>

    </div>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p>&copy; 2025 Azure Noob ‚Äî Don&#39;t be a Noob</p>
      <p style="margin-top: 0.5rem; font-size: 0.9rem;">
        <a href="/rss.xml" title="Subscribe via RSS">RSS Feed</a> ¬∑ 
        <a href="https://github.com/dswann101164" target="_blank" rel="noopener">GitHub</a>
      </p>
      <p style="margin-top: 1.5rem; font-size: 0.85rem; opacity: 0.7; font-style: italic;">
        "Trust in the Lord with all your heart, and lean not on your own understanding;<br>
        in all your ways acknowledge Him, and He will make your paths straight" ‚Äî Proverbs 3:5-6
      </p>
    </div>
  </footer>

  <!-- Copy code functionality -->
  <script src="/static/copy-code.js"></script>
</body>
</html>