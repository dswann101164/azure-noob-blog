<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  

  <!-- Primary SEO -->
  <title>Azure Noob</title>
  <meta name="description" content="Don&#39;t be a Noob">
  <link rel="canonical" href="https://azure-noob.com" />

  <!-- Favicons -->
  <link rel="icon" href="../../static/images/logo.png">

  <!-- Open Graph -->
  <meta property="og:title" content="Azure Noob">
  <meta property="og:description" content="Don&#39;t be a Noob">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://azure-noob.com">
  <meta property="og:image" content="../../static/images/hero/cloud-wars.png">

  

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Azure Noob">
  <meta name="twitter:description" content="Don&#39;t be a Noob">
  <meta name="twitter:image" content="../../static/images/hero/cloud-wars.png">

  <!-- Styles -->
  <link rel="stylesheet" href="../../static/styles.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNHGEB0BNZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZNHGEB0BNZ');
  </script>
</head>
<body>
  <header class="site-header">
    <div class="wrap nav-wrap">
      <div class="brand-block">
        <a href="../../index.html" class="brand-link">
          <img src="../../static/images/logo.png" alt="Azure Noob logo" class="logo">
        </a>
        <span class="brand-text">
          <small>Official Website of</small>
          <strong>Azure Noob</strong>
        </span>
      </div>
      <nav class="nav">
        <a href="../../index.html">Home</a>
        <a href="../index.html">Blog</a>
        <a href="../../about/index.html">About</a>
        <a href="../../tags/index.html">Tags</a>
        <a href="../../search/index.html">Search</a>
      </nav>
    </div>
  </header>

  <main class="site-content">
    <div class="wrap">
      
<article class="post">

  
  
    
    <div class="hero">
      <img src="../../static/images/hero/azure-support-ticket.svg" alt="Security Found .NET 6 on 47 VMs. Now I&#39;m Supposed to Remove It. Here&#39;s Why That&#39;s Impossible.">
    </div>
  

  <header class="post-header">
    <h1>Security Found .NET 6 on 47 VMs. Now I&#39;m Supposed to Remove It. Here&#39;s Why That&#39;s Impossible.</h1>
    <p class="muted">
      2025-10-27 ¬∑ ~17 min read
    </p>
    
    
    <ul class="tags-list">
      
      <li><a href="../../tags/Azure/index.html" class="tag-badge">Azure</a></li>
      
      <li><a href="../../tags/Security/index.html" class="tag-badge">Security</a></li>
      
      <li><a href="../../tags/Operations/index.html" class="tag-badge">Operations</a></li>
      
      <li><a href="../../tags/Change%20Management/index.html" class="tag-badge">Change Management</a></li>
      
    </ul>
    
    
    
      <p class="summary">Tenable finds a vulnerability. Security creates a ticket. Change management wants approval. App teams say not my problem. Infrastructure doesn&#39;t own the apps. Welcome to the operational reality nobody talks about.</p>
    
  </header>

  
  <p class="post-actions" style="margin:.5rem 0 0; text-align: center;">
    <button class="btn"
            onclick="window.print(); return false;"
            title="Print this page"
            aria-label="Print this page"
            style="cursor: pointer; background: none; border: 2px solid var(--azure-blue);">
      üñ®Ô∏è Print this page
    </button>
  </p>

  
  <div class="post-body">
    <h2>The Ticket</h2>
<div class="codehilite"><pre><span></span><code><span class="n">Subject</span><span class="o">:</span><span class="w"> </span><span class="n">Azure</span><span class="w"> </span><span class="n">Admin</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Remove</span><span class="w"> </span><span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="mf">6.0</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="mi">47</span><span class="w"> </span><span class="n">Virtual</span><span class="w"> </span><span class="n">Machines</span>
<span class="n">Priority</span><span class="o">:</span><span class="w"> </span><span class="n">High</span>
<span class="n">Due</span><span class="w"> </span><span class="n">Date</span><span class="o">:</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="n">date</span>
<span class="n">Affected</span><span class="w"> </span><span class="n">Resources</span><span class="o">:</span><span class="w"> </span><span class="mi">47</span><span class="w"> </span><span class="n">VMs</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="mi">44</span><span class="w"> </span><span class="n">subscriptions</span>

<span class="n">Description</span><span class="o">:</span>
<span class="n">Tenable</span><span class="w"> </span><span class="n">vulnerability</span><span class="w"> </span><span class="n">scan</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="mf">6.0</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="mi">47</span><span class="w"> </span><span class="n">Azure</span><span class="w"> </span><span class="n">VMs</span><span class="o">.</span>
<span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">reached</span><span class="w"> </span><span class="n">end</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">support</span><span class="w"> </span><span class="n">November</span><span class="w"> </span><span class="mi">12</span><span class="o">,</span><span class="w"> </span><span class="mi">2024</span><span class="o">.</span>

<span class="n">Action</span><span class="w"> </span><span class="n">Required</span><span class="o">:</span>
<span class="n">Remove</span><span class="w"> </span><span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="mf">6.0</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="n">virtual</span><span class="w"> </span><span class="n">machines</span><span class="o">.</span>
<span class="n">Update</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">applications</span><span class="w"> </span><span class="n">require</span><span class="w"> </span><span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="n">runtime</span><span class="o">.</span>

<span class="n">Assigned</span><span class="w"> </span><span class="n">To</span><span class="o">:</span><span class="w"> </span><span class="n">Azure</span><span class="w"> </span><span class="n">Infrastructure</span><span class="w"> </span><span class="n">Team</span>
</code></pre></div>

<p>And just like that, you're responsible for removing software from 47 production servers across your entire Azure estate.</p>
<p><strong>Without knowing:</strong><br />
- What applications run on these VMs<br />
- Who owns those applications<br />
- Whether removing .NET 6 will break anything<br />
- Whether you have permission to touch these VMs<br />
- How to even DO this at scale</p>
<p>Welcome to enterprise cloud operations.</p>
<hr />
<h2>The Scale Problem</h2>
<p>Let's be clear: <strong>You cannot manually RDP into 47 VMs.</strong></p>
<p>That's 10+ hours of:<br />
1. Finding each VM in the portal (across 44 subscriptions)<br />
2. Connecting via Bastion or RDP<br />
3. Opening Programs and Features<br />
4. Uninstalling .NET 6<br />
5. Rebooting<br />
6. Verifying removal<br />
7. Documenting completion</p>
<p>And that assumes:<br />
- You have local admin rights on all 47 VMs (you probably don't)<br />
- The uninstall doesn't break anything (it will)<br />
- Nobody complains when their app stops working (they will)</p>
<p>So let's try automation.</p>
<hr />
<h2>The Automation Reality</h2>
<h3>Step 1: Find All .NET 6 Installations</h3>
<p>First, let's use Azure Resource Graph to find which VMs Tenable is complaining about:</p>
<div class="codehilite"><pre><span></span><code><span class="n">resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">vmName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">name</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">subscription</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">subscriptionId</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">resourceGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">resourceGroup</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">vmName</span><span class="p">,</span><span class="w"> </span><span class="n">subscription</span><span class="p">,</span><span class="w"> </span><span class="n">resourceGroup</span><span class="p">,</span><span class="w"> </span><span class="n">location</span>
</code></pre></div>

<p>But wait‚Äî<strong>Resource Graph doesn't tell you what SOFTWARE is installed.</strong></p>
<p>Tenable knows. Azure doesn't.</p>
<p>You need to either:<br />
1. Pull the Tenable report and cross-reference VM names<br />
2. Use Azure Update Manager to inventory installed software<br />
3. Query each VM individually with PowerShell</p>
<p>Let's try option 3:</p>
<div class="codehilite"><pre><span></span><code><span class="c"># Connect to Azure</span>
<span class="nb">Connect-AzAccount</span>

<span class="c"># Get all VMs across all subscriptions</span>
<span class="nv">$subscriptions</span> <span class="p">=</span> <span class="nb">Get-AzSubscription</span>
<span class="nv">$results</span> <span class="p">=</span> <span class="p">@()</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$sub</span> <span class="k">in</span> <span class="nv">$subscriptions</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">Set-AzContext</span> <span class="n">-SubscriptionId</span> <span class="nv">$sub</span><span class="p">.</span><span class="n">Id</span>

    <span class="nv">$vms</span> <span class="p">=</span> <span class="nb">Get-AzVM</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$vm</span> <span class="k">in</span> <span class="nv">$vms</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">Write-Host</span> <span class="s2">&quot;Checking </span><span class="p">$(</span><span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span><span class="s2">...&quot;</span>

        <span class="c"># Run command to check for .NET 6</span>
        <span class="nv">$result</span> <span class="p">=</span> <span class="nb">Invoke-AzVMRunCommand</span> <span class="p">`</span>
            <span class="n">-ResourceGroupName</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">ResourceGroupName</span> <span class="p">`</span>
            <span class="n">-VMName</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span> <span class="p">`</span>
            <span class="n">-CommandId</span> <span class="s1">&#39;RunPowerShellScript&#39;</span> <span class="p">`</span>
            <span class="n">-ScriptString</span> <span class="sh">@&#39;</span>
<span class="sh">                $dotnetVersions = Get-ChildItem &quot;C:\Program Files\dotnet\shared\Microsoft.NETCore.App&quot; -Directory -ErrorAction SilentlyContinue</span>
<span class="sh">                $dotnet6 = $dotnetVersions | Where-Object { $_.Name -like &quot;6.*&quot; }</span>

<span class="sh">                if ($dotnet6) {</span>
<span class="sh">                    Write-Output &quot;FOUND: $($dotnet6.Name)&quot;</span>
<span class="sh">                } else {</span>
<span class="sh">                    Write-Output &quot;NOT FOUND&quot;</span>
<span class="sh">                }</span>
<span class="sh">&#39;@</span>

        <span class="nv">$output</span> <span class="p">=</span> <span class="nv">$result</span><span class="p">.</span><span class="n">Value</span><span class="p">[</span><span class="n">0</span><span class="p">].</span><span class="n">Message</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$output</span> <span class="o">-like</span> <span class="s2">&quot;*FOUND*&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$results</span> <span class="p">+=</span> <span class="no">[PSCustomObject]</span><span class="p">@{</span>
                <span class="n">VMName</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span>
                <span class="n">ResourceGroup</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">ResourceGroupName</span>
                <span class="n">Subscription</span> <span class="p">=</span> <span class="nv">$sub</span><span class="p">.</span><span class="n">Name</span>
                <span class="n">DotNetVersion</span> <span class="p">=</span> <span class="nv">$output</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span><span class="s2">&quot;FOUND: &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c"># Export results</span>
<span class="nv">$results</span> <span class="p">|</span> <span class="nb">Export-Csv</span> <span class="s2">&quot;dotnet6-inventory.csv&quot;</span> <span class="n">-NoTypeInformation</span>
</code></pre></div>

<p><strong>Time to run this across 47 VMs:</strong> 30-45 minutes (Invoke-AzVMRunCommand is SLOW)</p>
<p><strong>Results:</strong> A CSV with confirmed .NET 6 installations.</p>
<hr />
<h3>Step 2: Remove .NET 6 at Scale</h3>
<p>Now let's try to REMOVE it:</p>
<div class="codehilite"><pre><span></span><code><span class="c"># Import the inventory</span>
<span class="nv">$vmsToFix</span> <span class="p">=</span> <span class="nb">Import-Csv</span> <span class="s2">&quot;dotnet6-inventory.csv&quot;</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$vm</span> <span class="k">in</span> <span class="nv">$vmsToFix</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;Removing .NET 6 from </span><span class="p">$(</span><span class="nv">$vm</span><span class="p">.</span><span class="n">VMName</span><span class="p">)</span><span class="s2">...&quot;</span>

    <span class="nb">Set-AzContext</span> <span class="n">-SubscriptionId</span> <span class="p">(</span><span class="nb">Get-AzSubscription</span> <span class="n">-SubscriptionName</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Subscription</span><span class="p">).</span><span class="n">Id</span>

    <span class="nv">$result</span> <span class="p">=</span> <span class="nb">Invoke-AzVMRunCommand</span> <span class="p">`</span>
        <span class="n">-ResourceGroupName</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">ResourceGroup</span> <span class="p">`</span>
        <span class="n">-VMName</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">VMName</span> <span class="p">`</span>
        <span class="n">-CommandId</span> <span class="s1">&#39;RunPowerShellScript&#39;</span> <span class="p">`</span>
        <span class="n">-ScriptString</span> <span class="sh">@&#39;</span>
<span class="sh">            # Find .NET 6 uninstaller</span>
<span class="sh">            $uninstallKeys = Get-ChildItem &quot;HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall&quot;</span>
<span class="sh">            $dotnet6 = $uninstallKeys | ForEach-Object {</span>
<span class="sh">                Get-ItemProperty $_.PSPath</span>
<span class="sh">            } | Where-Object {</span>
<span class="sh">                $_.DisplayName -like &quot;*Microsoft .NET Runtime - 6.*&quot; -or</span>
<span class="sh">                $_.DisplayName -like &quot;*Microsoft ASP.NET Core 6.*&quot;</span>
<span class="sh">            }</span>

<span class="sh">            foreach ($app in $dotnet6) {</span>
<span class="sh">                Write-Output &quot;Uninstalling: $($app.DisplayName)&quot;</span>

<span class="sh">                $uninstallString = $app.UninstallString</span>
<span class="sh">                if ($uninstallString) {</span>
<span class="sh">                    # Execute uninstall (silent mode)</span>
<span class="sh">                    Start-Process $uninstallString -ArgumentList &quot;/quiet /norestart&quot; -Wait</span>
<span class="sh">                }</span>
<span class="sh">            }</span>

<span class="sh">            Write-Output &quot;Uninstall complete.&quot;</span>
<span class="sh">&#39;@</span>

    <span class="nb">Write-Output</span> <span class="nv">$result</span><span class="p">.</span><span class="n">Value</span><span class="p">[</span><span class="n">0</span><span class="p">].</span><span class="n">Message</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h2>Here's Where It Falls Apart</h2>
<h3>Problem 1: You Don't Know What Will Break</h3>
<p>Removing .NET 6 might:<br />
- Break a .NET 6 application (obviously)<br />
- Break a .NET 8 app that ALSO has .NET 6 binaries<br />
- Break Windows services that depend on .NET 6<br />
- Break monitoring agents, backup software, or management tools</p>
<p><strong>You don't know</strong> because <strong>you don't own these applications.</strong></p>
<h3>Problem 2: Change Management</h3>
<p>Your change management process requires:<br />
1. <strong>Change request submission</strong> (CAB approval needed)<br />
2. <strong>Business owner approval</strong> (who is that?)<br />
3. <strong>Rollback plan</strong> (how do you rollback 47 VMs?)<br />
4. <strong>Testing plan</strong> (test what? in which environments?)</p>
<p><strong>The question nobody answers:</strong><br />
- Do I submit ONE change request for 47 VMs?<br />
- Or 47 separate change requests?</p>
<p>If one change request:<br />
- CAB says "too broad, break it down"</p>
<p>If 47 change requests:<br />
- You spend 20 hours writing change requests instead of fixing the problem</p>
<h3>Problem 3: Application Ownership</h3>
<p>You're the <strong>Azure Infrastructure Team</strong>.</p>
<p>You manage:<br />
- Virtual machine provisioning<br />
- Networking and firewalls<br />
- Backup and disaster recovery<br />
- Monitoring and alerting</p>
<p>You <strong>do not manage:</strong><br />
- Application code<br />
- Application dependencies<br />
- Application testing<br />
- Application deployment</p>
<p><strong>But the security ticket is assigned to you.</strong></p>
<p>Why? Because:<br />
- Security found it on Azure VMs<br />
- Azure VMs are owned by "Azure team"<br />
- Therefore, Azure team fixes it</p>
<p>This logic makes sense to <strong>nobody who actually does this work.</strong></p>
<hr />
<h2>The Missing Process</h2>
<p>Here's what SHOULD exist but doesn't:</p>
<h3>1. RACI Matrix for Security Remediation</h3>
<table>
<thead>
<tr>
<th>Task</th>
<th>Responsible</th>
<th>Accountable</th>
<th>Consulted</th>
<th>Informed</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vulnerability Scanning</td>
<td>Security Team</td>
<td>CISO</td>
<td>Infrastructure</td>
<td>All</td>
</tr>
<tr>
<td>Ticket Creation</td>
<td>Security Team</td>
<td>Security Manager</td>
<td>Infrastructure</td>
<td>App Teams</td>
</tr>
<tr>
<td><strong>Software Removal (OS-level)</strong></td>
<td><strong>Infrastructure</strong></td>
<td><strong>Infrastructure Manager</strong></td>
<td><strong>App Teams</strong></td>
<td><strong>Security</strong></td>
</tr>
<tr>
<td><strong>Software Removal (App-level)</strong></td>
<td><strong>App Teams</strong></td>
<td><strong>App Owner</strong></td>
<td><strong>Infrastructure</strong></td>
<td><strong>Security</strong></td>
</tr>
<tr>
<td>Testing After Removal</td>
<td>App Teams</td>
<td>App Owner</td>
<td>Infrastructure</td>
<td>Security</td>
</tr>
<tr>
<td>Change Approval</td>
<td>App Owner</td>
<td>CAB</td>
<td>Infrastructure</td>
<td>Security</td>
</tr>
<tr>
<td>Rollback Execution</td>
<td>Infrastructure</td>
<td>Infrastructure Manager</td>
<td>App Teams</td>
<td>Security</td>
</tr>
</tbody>
</table>
<p><strong>The problem:</strong> Your organization doesn't have this defined.</p>
<p>So the ticket lands on Infrastructure by default.</p>
<h3>2. Application Inventory (CMDB)</h3>
<p>You need to know:<br />
- Which VMs run which applications<br />
- Who owns those applications<br />
- Contact info for app owners<br />
- Testing environments for each app</p>
<p><strong>The reality:</strong> This data doesn't exist, or it's in a SharePoint that hasn't been updated since 2019.</p>
<h3>3. Patching vs Remediation SLA</h3>
<p>Your organization probably has:<br />
- <strong>OS patching SLA:</strong> 30 days for critical, 60 days for high<br />
- <strong>Security vulnerability SLA:</strong> 30 days from scan date</p>
<p>But NO definition of:<br />
- Who does the remediation work<br />
- How remediation is prioritized against other work<br />
- What "remediation" means for third-party software</p>
<hr />
<h2>The Real Answer</h2>
<p>Here's what you SHOULD do (but probably can't):</p>
<h3>1. Reassign the Ticket</h3>
<div class="codehilite"><pre><span></span><code><span class="n">To</span><span class="o">:</span><span class="w"> </span><span class="n">Security</span><span class="w"> </span><span class="n">Team</span><span class="w"> </span><span class="n">Manager</span>
<span class="n">CC</span><span class="o">:</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="n">Services</span><span class="w"> </span><span class="n">Director</span>

<span class="n">Subject</span><span class="o">:</span><span class="w"> </span><span class="n">Re</span><span class="o">-</span><span class="n">assignment</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">Removal</span><span class="w"> </span><span class="n">Ticket</span>

<span class="n">This</span><span class="w"> </span><span class="n">ticket</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Azure</span><span class="w"> </span><span class="n">Infrastructure</span><span class="o">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">work</span>
<span class="n">described</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">APPLICATION</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">remediation</span><span class="o">,</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">infrastructure</span><span class="w"> </span><span class="n">patching</span><span class="o">.</span>

<span class="n">Azure</span><span class="w"> </span><span class="n">Infrastructure</span><span class="w"> </span><span class="n">manages</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="n">provisioning</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">decommissioning</span>
<span class="o">-</span><span class="w"> </span><span class="n">OS</span><span class="w"> </span><span class="n">patching</span><span class="w"> </span><span class="o">(</span><span class="n">Windows</span><span class="w"> </span><span class="n">Update</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Backup</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">DR</span>

<span class="n">Azure</span><span class="w"> </span><span class="n">Infrastructure</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">manage</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="o">(</span><span class="n">including</span><span class="w"> </span><span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="n">runtime</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">deployment</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="n">testing</span>

<span class="n">Request</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">Identify</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">owners</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="o">(</span><span class="n">see</span><span class="w"> </span><span class="n">attached</span><span class="w"> </span><span class="n">list</span><span class="o">)</span>
<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="n">Re</span><span class="o">-</span><span class="n">assign</span><span class="w"> </span><span class="n">ticket</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">teams</span>
<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">Infrastructure</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">VM</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">management</span><span class="w"> </span><span class="n">support</span>

<span class="n">Alternatively</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Define</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">RACI</span><span class="w"> </span><span class="n">matrix</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="n">remediation</span><span class="w"> </span><span class="n">work</span>
<span class="o">-</span><span class="w"> </span><span class="n">We</span><span class="err">&#39;</span><span class="n">ll</span><span class="w"> </span><span class="n">follow</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">going</span><span class="w"> </span><span class="n">forward</span>
</code></pre></div>

<h3>2. Build the Missing Inventory</h3>
<p>If they won't reassign it, at least BUILD the data you need:</p>
<div class="codehilite"><pre><span></span><code><span class="c"># Create application inventory from Azure tags</span>
<span class="nv">$inventory</span> <span class="p">=</span> <span class="p">@()</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$sub</span> <span class="k">in</span> <span class="nv">$subscriptions</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">Set-AzContext</span> <span class="n">-SubscriptionId</span> <span class="nv">$sub</span><span class="p">.</span><span class="n">Id</span>
    <span class="nv">$vms</span> <span class="p">=</span> <span class="nb">Get-AzVM</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$vm</span> <span class="k">in</span> <span class="nv">$vms</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$tags</span> <span class="p">=</span> <span class="p">(</span><span class="nb">Get-AzResource</span> <span class="n">-ResourceId</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Id</span><span class="p">).</span><span class="n">Tags</span>

        <span class="nv">$inventory</span> <span class="p">+=</span> <span class="no">[PSCustomObject]</span><span class="p">@{</span>
            <span class="n">VMName</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Name</span>
            <span class="n">Subscription</span> <span class="p">=</span> <span class="nv">$sub</span><span class="p">.</span><span class="n">Name</span>
            <span class="n">ResourceGroup</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">ResourceGroupName</span>
            <span class="n">ApplicationName</span> <span class="p">=</span> <span class="nv">$tags</span><span class="p">[</span><span class="s1">&#39;Application&#39;</span><span class="p">]</span>
            <span class="n">ApplicationOwner</span> <span class="p">=</span> <span class="nv">$tags</span><span class="p">[</span><span class="s1">&#39;Owner&#39;</span><span class="p">]</span>
            <span class="n">Environment</span> <span class="p">=</span> <span class="nv">$tags</span><span class="p">[</span><span class="s1">&#39;Environment&#39;</span><span class="p">]</span>
            <span class="n">CostCenter</span> <span class="p">=</span> <span class="nv">$tags</span><span class="p">[</span><span class="s1">&#39;CostCenter&#39;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$inventory</span> <span class="p">|</span> <span class="nb">Export-Csv</span> <span class="s2">&quot;vm-application-inventory.csv&quot;</span> <span class="n">-NoTypeInformation</span>
</code></pre></div>

<p><strong>Problem:</strong> Your tags are probably wrong, incomplete, or missing.</p>
<p>See: <a href="/blog/2025-09-xx-azure-tags-are-wrong">Azure Resource Tags Are Wrong and Nobody Cares</a></p>
<h3>3. Have the Hard Conversation</h3>
<p>This requires a meeting with:<br />
- Security leadership<br />
- Application services leadership<br />
- Your manager</p>
<p>Agenda:<br />
1. <strong>Operational boundaries:</strong> Who owns application-level remediation?<br />
2. <strong>Process definition:</strong> How do security findings become work assignments?<br />
3. <strong>RACI creation:</strong> Let's define this once, not per-ticket</p>
<p><strong>The outcome you want:</strong><br />
- Clear ownership boundaries<br />
- Security findings routed to correct teams<br />
- Change management process that scales</p>
<p><strong>The outcome you'll probably get:</strong><br />
- "We'll discuss this later"<br />
- Ticket stays assigned to you<br />
- You remove .NET 6 from 47 VMs manually</p>
<hr />
<h2>What I Actually Did</h2>
<p>Here's what I do in practice:</p>
<h3>1. Document the Scope</h3>
<div class="codehilite"><pre><span></span><code><span class="gh"># .NET 6 Removal - Scope Documentation</span>

<span class="gu">## Total VMs: 47</span>
<span class="gu">## Subscriptions: 44</span>
<span class="gu">## Estimated Effort:</span>
<span class="k">-</span><span class="w"> </span>Inventory: 4 hours
<span class="k">-</span><span class="w"> </span>Change requests: 8 hours  
<span class="k">-</span><span class="w"> </span>Execution: 12 hours
<span class="k">-</span><span class="w"> </span>Testing support: 16 hours (with app teams)
<span class="k">-</span><span class="w"> </span><span class="gs">**Total: 40 hours (1 full work week)**</span>

<span class="gu">## Risks:</span>
<span class="k">1.</span> Application breakage (unknown impact)
<span class="k">2.</span> Rollback complexity (no automated rollback)
<span class="k">3.</span> Resource contention (only 2 Azure admins for 44 subscriptions)

<span class="gu">## Dependencies:</span>
<span class="k">1.</span> Application owner identification (Security team)
<span class="k">2.</span> Application owner approval (Change management)
<span class="k">3.</span> Testing environment access (App teams)
</code></pre></div>

<h3>2. Push Back with Data</h3>
<div class="codehilite"><pre><span></span><code><span class="n">To</span><span class="o">:</span><span class="w"> </span><span class="n">Security</span><span class="w"> </span><span class="n">Team</span><span class="w"> </span><span class="n">Manager</span>
<span class="n">CC</span><span class="o">:</span><span class="w"> </span><span class="n">My</span><span class="w"> </span><span class="n">Manager</span>

<span class="n">Subject</span><span class="o">:</span><span class="w"> </span><span class="o">.</span><span class="na">NET</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">Removal</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Resource</span><span class="w"> </span><span class="n">Requirements</span>

<span class="n">This</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dedicated</span><span class="w"> </span><span class="n">effort</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">2</span><span class="o">-</span><span class="n">week</span><span class="w"> </span><span class="n">window</span><span class="o">.</span>

<span class="n">Current</span><span class="w"> </span><span class="n">Azure</span><span class="w"> </span><span class="n">team</span><span class="w"> </span><span class="n">capacity</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Pinnacle</span><span class="w"> </span><span class="n">merger</span><span class="w"> </span><span class="n">work</span><span class="o">:</span><span class="w"> </span><span class="mi">60</span><span class="o">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">capacity</span>
<span class="o">-</span><span class="w"> </span><span class="n">BAU</span><span class="w"> </span><span class="n">operations</span><span class="o">:</span><span class="w"> </span><span class="mi">30</span><span class="o">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">capacity</span><span class="w">  </span>
<span class="o">-</span><span class="w"> </span><span class="n">Available</span><span class="o">:</span><span class="w"> </span><span class="mi">10</span><span class="o">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">capacity</span>

<span class="n">Request</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">Approve</span><span class="w"> </span><span class="mi">40</span><span class="o">-</span><span class="n">hour</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="n">allocation</span>
<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="n">Pause</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">critical</span><span class="w"> </span><span class="n">work</span>
<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">Provide</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="n">contacts</span>

<span class="n">OR</span>

<span class="n">Re</span><span class="o">-</span><span class="n">assign</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">teams</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">infrastructure</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">role</span><span class="w"> </span><span class="n">defined</span><span class="o">.</span>
</code></pre></div>

<h3>3. Do the Minimum Viable Remediation</h3>
<p>If I can't reassign it:</p>
<ol>
<li><strong>Inventory:</strong> Use the PowerShell script above</li>
<li><strong>Categorize:</strong> Group VMs by subscription and tag data</li>
<li><strong>Find owners:</strong> Use tags, ask around, check with app teams</li>
<li><strong>Create ONE change request</strong> per subscription (not per VM)</li>
<li><strong>Get app owner approval</strong> (email trail for CYA)</li>
<li><strong>Remove .NET 6</strong> with monitoring enabled</li>
<li><strong>Document failures</strong> and escalate to app teams</li>
</ol>
<p><strong>Result:</strong> Some VMs get fixed, some break, some never get approval.</p>
<p>The security ticket closes after 60 days whether the work is done or not.</p>
<hr />
<h2>The Uncomfortable Truth</h2>
<p><strong>Security scanners CREATE work, but organizations don't define WHO does that work.</strong></p>
<p>Tenable/Qualys/Rapid7 will find:<br />
- Outdated software<br />
- Missing patches<br />
- Configuration drift<br />
- Certificate expirations</p>
<p>And then someone has to:<br />
- Investigate each finding<br />
- Determine risk and priority<br />
- Plan remediation<br />
- Execute changes<br />
- Verify results</p>
<p><strong>That work has to be ASSIGNED to someone with:</strong><br />
- Appropriate access<br />
- Domain knowledge<br />
- Time to do the work<br />
- Authority to make changes</p>
<p>In mature organizations, this is <strong>defined in a RACI matrix</strong>.</p>
<p>In your organization, it's assigned to whoever touches the asset last.</p>
<p>And if you're the Azure admin, that's you.</p>
<hr />
<h2>What Actually Needs to Happen</h2>
<ol>
<li><strong>Define operational boundaries BEFORE scanning.</strong></li>
<li>What findings go to infrastructure?</li>
<li>What findings go to application teams?</li>
<li>
<p>What findings require collaboration?</p>
</li>
<li>
<p><strong>Build an accurate CMDB.</strong></p>
</li>
<li>Azure tags with application owner</li>
<li>CMDB entries for every VM</li>
<li>
<p>Contact information that's actually current</p>
</li>
<li>
<p><strong>Create a security remediation RACI.</strong></p>
</li>
<li>Who investigates findings?</li>
<li>Who plans remediation?</li>
<li>Who executes changes?</li>
<li>
<p>Who verifies results?</p>
</li>
<li>
<p><strong>Staff appropriately.</strong></p>
</li>
<li>Security remediation is WORK</li>
<li>It requires time, tools, and expertise</li>
<li>
<p>You can't bolt it onto existing full-time workloads</p>
</li>
<li>
<p><strong>Integrate with change management.</strong></p>
</li>
<li>One change request per application (not per VM)</li>
<li>Application owner approval is required</li>
<li>Infrastructure provides support, not ownership</li>
</ol>
<hr />
<h2>The Post-Mortem</h2>
<p>Six weeks after the ticket was created:</p>
<ul>
<li><strong>VMs remediated:</strong> 23 of 47</li>
<li><strong>Applications broken:</strong> 4</li>
<li><strong>Rollbacks required:</strong> 4  </li>
<li><strong>App owner approvals received:</strong> 8 of 47</li>
<li><strong>Tickets re-assigned to app teams:</strong> 15</li>
<li><strong>Tickets closed due to timeout:</strong> 9</li>
</ul>
<p><strong>Total time spent:</strong> 52 hours (more than the estimate)</p>
<p><strong>Lessons learned:</strong><br />
1. We still don't have a RACI for security remediation<br />
2. We still don't have an accurate CMDB<br />
3. The next Tenable scan will create 40+ more tickets</p>
<p>And the cycle continues.</p>
<hr />
<h2>The Real Solution</h2>
<p>Stop assigning infrastructure-level tickets for application-level problems.</p>
<p><strong>Create a process:</strong></p>
<ol>
<li><strong>Security findings route through a triage team</strong></li>
<li>Is this OS-level? ‚Üí Infrastructure</li>
<li>Is this app-level? ‚Üí Application teams</li>
<li>
<p>Is this config? ‚Üí Security team</p>
</li>
<li>
<p><strong>Tickets include required context:</strong></p>
</li>
<li>Application name</li>
<li>Application owner (with contact info)</li>
<li>Testing requirements</li>
<li>
<p>Rollback plan</p>
</li>
<li>
<p><strong>Infrastructure provides support, not ownership:</strong></p>
</li>
<li>"We'll execute the changes after app owner approval"</li>
<li>
<p>Not: "We'll figure out who owns this and do everything"</p>
</li>
<li>
<p><strong>Leadership backs this up:</strong></p>
</li>
<li>When security escalates</li>
<li>When deadlines slip</li>
<li>When someone tries to reassign the work back to you</li>
</ol>
<hr />
<h2>Until Then</h2>
<p>You'll keep getting tickets that say:</p>
<div class="codehilite"><pre><span></span><code><span class="nl">Subject</span><span class="p">:</span><span class="w"> </span><span class="n">Azure</span><span class="w"> </span><span class="k">Admin</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Remove</span><span class="w"> </span><span class="o">[</span><span class="n">software</span><span class="o">]</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="o">[</span><span class="n">number</span><span class="o">]</span><span class="w"> </span><span class="n">VMs</span>
<span class="n">Due</span><span class="w"> </span><span class="nc">Date</span><span class="err">:</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="n">days</span>
<span class="n">Assigned</span><span class="w"> </span><span class="k">To</span><span class="err">:</span><span class="w"> </span><span class="n">You</span>
</code></pre></div>

<p>And you'll keep fighting the same battle:</p>
<ul>
<li>This isn't my job</li>
<li>I don't have context</li>
<li>I don't own these applications</li>
<li>We don't have a process for this</li>
</ul>
<p>Welcome to enterprise cloud operations.</p>
<p><strong>Next time someone asks "why is cloud so hard?"</strong></p>
<p>Show them this post.</p>
<hr />
<h2>Resources</h2>
<p><strong>PowerShell Scripts:</strong><br />
- <a href="https://github.com/azure-noob/scripts/dotnet-inventory">Find .NET installations across Azure VMs</a><br />
- <a href="https://github.com/azure-noob/scripts/vm-software-removal">Remove software at scale with RunCommand</a></p>
<p><strong>Process Templates:</strong><br />
- <a href="https://github.com/azure-noob/templates/security-raci">Security Remediation RACI Matrix</a><br />
- <a href="https://github.com/azure-noob/templates/app-inventory">Application Inventory Template</a></p>
<p><strong>Related Posts:</strong><br />
- <a href="/blog/2025-09-xx-it-roles-raci">IT Roles &amp; Responsibilities Matrix</a><br />
- <a href="/blog/2025-09-xx-azure-tags">Azure Resource Tags Are Wrong and Nobody Cares</a><br />
- <a href="/blog/2025-10-xx-cmdb-is-wrong">Your CMDB Is Wrong (And Cloud Migration Will Prove It)</a></p>
<hr />
<p><em>Have a security remediation nightmare story? Email me at [email] or drop a comment below. We're all fighting this battle.</em></p>
  </div>

  
  
  <aside class="related-posts" style="max-width: 800px; margin: 3rem auto; padding: 2rem; background: var(--bg-light); border-radius: 12px;">
    <h3 style="margin-top: 0;">Related Posts</h3>
    <ul style="list-style: none; padding: 0;">
      
      <li style="margin: 1rem 0;">
        <a href="../kql-query-library-git/index.html" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Stop Losing Your KQL Queries: The Git-Based Query Library Nobody Told You About</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-10-28</span>
        </a>
      </li>
      
      <li style="margin: 1rem 0;">
        <a href="../soc2-azure-ad-audit-logs-step-by-step/index.html" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">SOC 2 Audit Prep Part 2: Azure AD Audit Log Retention Setup (Step-by-Step)</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-10-27</span>
        </a>
      </li>
      
      <li style="margin: 1rem 0;">
        <a href="../azure-audit-gap-nobody-talks-about/index.html" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">The Azure Audit Gap Nobody Talks About: Why Your 90-Day Logs Won&#39;t Survive a 7-Year Audit</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-10-26</span>
        </a>
      </li>
      
    </ul>
  </aside>
  

  
  <nav class="post-nav">
    
      <a href="../azure-audit-gap-nobody-talks-about/index.html">
        <span style="opacity: 0.7; font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">‚Üê Previous</span>
        <strong>The Azure Audit Gap Nobody Talks About: Why Your 90-Day Logs Won&#39;t Survive a 7-Year Audit</strong>
      </a>
    
    
      <a href="../soc2-azure-ad-audit-logs-step-by-step/index.html" style="text-align: right;">
        <span style="opacity: 0.7; font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Next ‚Üí</span>
        <strong>SOC 2 Audit Prep Part 2: Azure AD Audit Log Retention Setup (Step-by-Step)</strong>
      </a>
    
  </nav>

</article>

    </div>
  </main>

  <!-- EMAIL CAPTURE SECTION -->
  <section class="email-signup" id="subscribe">
    <div class="wrap">
      <h3>Get Azure tips in your inbox</h3>
      <p>Join Azure pros getting practical KQL queries, cost optimization tips, and real-world solutions.</p>
      <script async data-uid="3dfad5c743" src="https://azure-noob.kit.com/3dfad5c743/index.js"></script>
    </div>
  </section>

  <footer class="site-footer">
    <div class="wrap">
      <p>&copy; 2025 Azure Noob ‚Äî Don&#39;t be a Noob</p>
    </div>
  </footer>

  <!-- Copy code functionality -->
  <script src="../../static/copy-code.js"></script>
</body>
</html>