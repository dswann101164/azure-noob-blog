<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  

  <!-- Primary SEO -->
  <title>Azure Noob</title>
  <meta name="description" content="Don&#39;t be a Noob">
  <link rel="canonical" href="https://azure-noob.com" />

  <!-- Favicons -->
  <link rel="icon" href="../../static/images/logo.png">

  <!-- Open Graph -->
  <meta property="og:title" content="Azure Noob">
  <meta property="og:description" content="Don&#39;t be a Noob">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://azure-noob.com">
  <meta property="og:image" content="../../static/images/hero/cloud-wars.png">

  

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Azure Noob">
  <meta name="twitter:description" content="Don&#39;t be a Noob">
  <meta name="twitter:image" content="../../static/images/hero/cloud-wars.png">

  <!-- Styles -->
  <link rel="stylesheet" href="../../static/styles.css">
  <!-- Quest styles -->

  <!-- Google Analytics -->
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNHGEB0BNZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZNHGEB0BNZ');
  </script>
</head>
<body>
  <header class="site-header">
    <div class="wrap nav-wrap">
      <div class="brand-block">
        <a href="../../index.html" class="brand-link">
          <img src="../../static/images/logo.png" alt="Azure Noob logo" class="logo">
        </a>
        <span class="brand-text">
          <small>Official Website of</small>
          <strong>Azure Noob</strong>
        </span>
      </div>
      <nav class="nav">
        <a href="../../index.html">Home</a>
        <a href="../index.html">Blog</a>
        <a href="../../about/index.html">About</a>
        <a href="../../tags/index.html">Tags</a>
        <a href="../../search/index.html">Search</a>
      </nav>
    </div>
  </header>

  <!-- WW2 Quest banner (appears on all pages; remove if you want home-only) -->
  <!-- Audio (tiny files; optional) -->

  <main class="site-content">
    <div class="wrap">
      
<article class="post">

  
  
    <div class="hero">
      <img src="/static/images/hero/cloud-noc.png" alt="Azure Dashboards Are Your Cloud NOC (And Nobody Told You)">
    </div>
  

  <header class="post-header">
    <h1>Azure Dashboards Are Your Cloud NOC (And Nobody Told You)</h1>
    <p class="muted">
      2025-10-03 ¬∑ ~15 min read
       ¬∑ Azure, Azure Monitor, Workbooks, Governance
    </p>
    
      <p class="summary">New Azure admins are told to &#39;use workbooks&#39; the same way students are told to &#39;solve for X&#39; - without understanding what problem it solves.</p>
    
  </header>

  
  <p class="post-actions" style="margin:.5rem 0 0;">
    <button class="btn print-trigger"
            onclick="window.print(); return false;"
            title="Print this page"
            aria-label="Print this page">üñ®Ô∏è Print this page</button>
  </p>

  
  <div class="post-body">
    <h2>The Problem Nobody Explains</h2>
<p>You land in a new Azure admin role. You inherit an environment. Your boss asks you three simple questions:</p>
<ul>
<li>"What's running?"</li>
<li>"Are we patched?"</li>
<li>"What's this costing us?"</li>
</ul>
<p>And you have no idea where to start.</p>
<p>Somebody tells you "use Azure Workbooks" or "build a dashboard." You Google it. You find Microsoft docs. You see KQL queries and JSON syntax and parameter configuration screens.</p>
<p>But nobody told you <strong>why</strong> you're doing this. What problem does a workbook solve? What's a dashboard for? Why does this tool exist?</p>
<p>You're being told to use the quadratic formula without understanding what it means to solve for X.</p>
<h2>The Algebra Problem</h2>
<p>Remember learning algebra? You're told "solve for X" but nobody explains WHY you're doing it.</p>
<p>The teacher says: "Use the quadratic formula."<br />
You ask: "But what am I solving?"<br />
The teacher: "Just plug in the numbers."</p>
<p>Azure admins face the same problem:</p>
<p>The docs say: "Use Azure Workbooks."<br />
You ask: "But what problem am I solving?"<br />
The docs: "Here's the KQL syntax."</p>
<p><strong>Here's what nobody tells you:</strong></p>
<p>Workbooks and dashboards aren't mysterious Azure tools. They're just <strong>saved transformations of raw data into organized information</strong>. That's it.</p>
<p>Azure generates data constantly - metrics, logs, resource properties, configuration states. But raw data isn't useful. <strong>Information</strong> is useful.</p>
<p>Without workbooks/dashboards: You manually query data every time you need an answer.<br />
- "How many VMs are running?" ‚Üí Click through the portal<br />
- "How many are Windows vs Linux?" ‚Üí Do it again<br />
- "Which ones have high CPU?" ‚Üí Do it again</p>
<p>With workbooks/dashboards: You've saved those queries as reusable views.<br />
- "How many VMs are running?" ‚Üí One click<br />
- "How many are Windows vs Linux?" ‚Üí One click<br />
- "Which ones have high CPU?" ‚Üí One click</p>
<p><strong>You're not learning a new concept. You're learning to stop repeating yourself.</strong></p>
<h2>What Leadership Actually Understands: The NOC</h2>
<p>Here's where it clicks.</p>
<p>Your leadership already understands this concept. They just don't know it applies to Azure.</p>
<p><strong>They understand Network Operations Centers (NOCs):</strong></p>
<ul>
<li>Big screens on the wall</li>
<li>Red/yellow/green status lights</li>
<li>One glance tells you if something's broken</li>
<li>Drill down when you see red</li>
<li>24/7 monitoring from a centralized location</li>
</ul>
<p>Every executive who's walked past the IT department has seen a NOC. They know what it does.</p>
<p><strong>Your translation:</strong></p>
<p>"We're building a cloud NOC. Instead of monitoring network switches and routers, we're monitoring Azure infrastructure across [insert your number] subscriptions."</p>
<p><strong>They get it instantly.</strong></p>
<p>The NOC parallel:</p>
<table>
<thead>
<tr>
<th>Traditional NOC</th>
<th>Cloud NOC (Azure Dashboard/Workbook)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Shows all network devices</td>
<td>Shows all cloud resources</td>
</tr>
<tr>
<td>Real-time status (up/down/degraded)</td>
<td>Real-time status (running/stopped/at-risk)</td>
</tr>
<tr>
<td>Alerts when something breaks</td>
<td>Alerts when something breaks</td>
</tr>
<tr>
<td>One person monitoring, whole team knows status</td>
<td>Leadership gets same visibility</td>
</tr>
</tbody>
</table>
<p><strong>Azure dashboards and workbooks ARE a NOC for cloud infrastructure.</strong> That's the entire concept.</p>
<p>If you understand NOC, you understand dashboards.</p>
<h2>Your Cloud NOC: What It Actually Is</h2>
<p>Now that you understand the NOC concept, here's how Azure implements it:</p>
<p><strong>Azure Workbooks = Your NOC Screen</strong><br />
- Interactive dashboards that display infrastructure health<br />
- Combine data from multiple sources<br />
- Parameters let you filter (click subscription ‚Üí see only those resources)<br />
- Real-time queries that update automatically</p>
<p><strong>Azure Dashboards = Your Quick-Glance View</strong><br />
- Pinned tiles showing key metrics<br />
- Auto-refresh every 5 minutes (metrics) or hourly (logs)<br />
- Simpler than workbooks, but less interactive<br />
- Good for "what's on fire RIGHT NOW"</p>
<p><strong>Think of it this way:</strong></p>
<ul>
<li><strong>Dashboard</strong> = The big wall screen in the NOC (high-level status)</li>
<li><strong>Workbook</strong> = The detailed console where you drill down and investigate</li>
</ul>
<p>Both are just different views into your cloud infrastructure. Pick the one that fits your audience:<br />
- <strong>Leadership wants dashboards</strong> (quick status check)<br />
- <strong>Admins want workbooks</strong> (deep investigation)</p>
<p>You'll probably use both.</p>
<hr />
<h2>The Foundation Nobody Teaches: Two Data Sources</h2>
<p>Here's where new admins get confused: <strong>What data goes where?</strong></p>
<p>You build a workbook. You see options for "Logs" and "Azure Resource Graph." You don't know which one to use. So you guess. And you waste hours querying the wrong data source.</p>
<p><strong>Nobody explains the difference:</strong></p>
<h3>Resource Graph = Inventory (What Exists RIGHT NOW)</h3>
<ul>
<li>Current state of every resource</li>
<li>Properties, tags, locations, configurations</li>
<li>"Show me all VMs that are running"</li>
<li>"Which resources don't have tags?"</li>
<li>"What's the size of each VM?"</li>
<li>Updates in near real-time (within minutes)</li>
</ul>
<p><strong>Think of it as:</strong> Your asset inventory database.</p>
<h3>Log Analytics = History (What HAPPENED Over Time)</h3>
<ul>
<li>Performance metrics, events, logs</li>
<li>Trends, patterns, anomalies</li>
<li>"Show me CPU usage over the last 30 days"</li>
<li>"Which VMs rebooted unexpectedly?"</li>
<li>"When did disk space drop below 10%?"</li>
<li>Requires logs to be collected and shipped first</li>
</ul>
<p><strong>Think of it as:</strong> Your security camera footage and performance recorder.</p>
<h3>The Trap Most Admins Fall Into</h3>
<p>They try to use Log Analytics for inventory questions: "How many VMs do we have?"</p>
<p><strong>This fails</strong> because Log Analytics only knows about resources that are SENDING LOGS. If a VM isn't configured to send logs, it doesn't exist in Log Analytics.</p>
<p>Or they try to use Resource Graph for performance history: "Show me CPU over 30 days."</p>
<p><strong>This fails</strong> because Resource Graph only knows the CURRENT state. It doesn't store historical performance data.</p>
<h3>When To Use Which</h3>
<table>
<thead>
<tr>
<th>Question</th>
<th>Data Source</th>
<th>Why</th>
</tr>
</thead>
<tbody>
<tr>
<td>How many VMs exist?</td>
<td>Resource Graph</td>
<td>Current inventory</td>
</tr>
<tr>
<td>Which VMs are running?</td>
<td>Resource Graph</td>
<td>Current state</td>
</tr>
<tr>
<td>Which VMs lack tags?</td>
<td>Resource Graph</td>
<td>Current configuration</td>
</tr>
<tr>
<td>CPU usage over 30 days?</td>
<td>Log Analytics</td>
<td>Historical performance</td>
</tr>
<tr>
<td>Which VMs had errors yesterday?</td>
<td>Log Analytics</td>
<td>Historical events</td>
</tr>
<tr>
<td>Disk space trends?</td>
<td>Log Analytics</td>
<td>Time-series data</td>
</tr>
</tbody>
</table>
<h3>The Power Move: Combine Them</h3>
<p>Your best workbooks use BOTH:</p>
<ol>
<li><strong>Resource Graph</strong> gives you the complete inventory</li>
<li><strong>Log Analytics</strong> shows you what's happening on those resources</li>
</ol>
<p>Example: "Show me all VMs (Resource Graph) and highlight which ones have high CPU in the last hour (Log Analytics)."</p>
<p>That's your cloud NOC. Complete visibility.</p>
<h2>The 44 Subscription Problem</h2>
<p>In my production environment, I manage 44 Azure subscriptions for a regional bank. We're merging with another bank in Q1 2026, so that number's about to grow.</p>
<p><strong>Without a cloud NOC, here's what answering basic questions looks like:</strong></p>
<p>Leadership: "How many VMs are unpatched?"<br />
Me: <em>Opens portal, clicks first subscription, filters VMs, checks patch status, exports to Excel. Repeats 43 more times. Three days later...</em></p>
<p>Leadership: "How many Windows Server 2012 VMs do we still have?"<br />
Me: <em>Starts clicking through 44 subscriptions again...</em></p>
<p><strong>This doesn't scale. You can't manually check 44 subscriptions.</strong></p>
<h3>What You Need: Cross-Subscription Visibility</h3>
<p>Resource Graph solves this with ONE query across ALL subscriptions:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="k">count</span><span class="p">()</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">storageProfile</span><span class="err">.</span><span class="n">osDisk</span><span class="err">.</span><span class="n">osType</span><span class="p">)</span>
</code></pre></div>

<p>Result: 712 VMs total, 445 Windows, 267 Linux.</p>
<p>One query. 30 seconds. Every subscription.</p>
<h3>The Three Questions Leadership Actually Cares About</h3>
<p>When I built our cloud NOC, I focused on three things:</p>
<p><strong>1. Control: "Do we even know what's running?"</strong><br />
- VM inventory across all subscriptions<br />
- Resources without required tags<br />
- Orphaned resources (no owner, no cost center)</p>
<p><strong>2. Risk: "What's not patched? What's exposed?"</strong><br />
- VMs not sending logs (blind spots)<br />
- Unpatched systems by severity<br />
- Public-facing resources</p>
<p><strong>3. Cost: "Where's the money going?"</strong><br />
- Largest resources by cost<br />
- Stopped-but-not-deallocated VMs (still charging)<br />
- Resources in wrong regions (higher cost)</p>
<h3>How To Build This Without Dying</h3>
<p>You don't build 44 dashboards. You build ONE workbook with subscription parameters.</p>
<p>The user picks a subscription from a dropdown, and the entire workbook filters to show only that subscription's data. Or they select "All Subscriptions" and see everything.</p>
<p><strong>This is the cloud NOC approach.</strong></p>
<p>One screen. All subscriptions. Real-time data. Leadership gets answers in 30 seconds instead of waiting 3 days for you to click through portals.</p>
<h2>How To Explain This To Leadership</h2>
<p>Here's your 5-minute pitch. I've used this exact script with my executive team.</p>
<p><strong>Don't say this:</strong><br />
"We need to implement Azure Monitor Workbooks with Resource Graph and Log Analytics integration for cross-subscription visibility and KQL-based alerting."</p>
<p><strong>Say this:</strong></p>
<p>"Right now, we're blind across 44 Azure subscriptions. When you ask me a simple question like 'How many VMs are unpatched?' I spend 3 days clicking through portals.</p>
<p>I'm building a cloud NOC - the same concept as our traditional network operations center, but for cloud infrastructure.</p>
<p><strong>Here's what you'll get:</strong></p>
<p>One dashboard that shows:<br />
- What we have (complete inventory)<br />
- What's at risk (unpatched systems, security issues)<br />
- What's costing us money (waste, oversized resources)</p>
<p>It updates automatically. You'll have answers in 30 seconds instead of waiting days.</p>
<p><strong>Plus, we get alerts</strong> - just like the NOC. If VM count drops unexpectedly, if untagged resources exceed our threshold, if critical systems go offline - the system alerts us proactively instead of waiting for someone to notice.</p>
<p>Same NOC concept you already understand. Just moved to the cloud."</p>
<h3>What They'll Ask</h3>
<p><strong>"How long to build it?"</strong><br />
"Initial version with basic inventory and health checks: 2 weeks. Then we iterate based on what questions you need answered."</p>
<p><strong>"What does it cost?"</strong><br />
"The tools are included with Azure at no additional cost. Just my time to build and maintain it."</p>
<p><strong>"Can I see it on my phone?"</strong><br />
"Yes. Dashboards work on mobile. Workbooks work in any browser."</p>
<p><strong>"What about alerts?"</strong><br />
"We set thresholds - like 'notify me if VM count changes by more than 10%' or 'alert if any critical system shows unhealthy.' Same as your traditional NOC alarm system."</p>
<h3>The Visual They Need</h3>
<p>Show them this:</p>
<p><strong>Before (Now):</strong><br />
- 44 separate subscriptions<br />
- Manual checks<br />
- 3 days to answer basic questions<br />
- Reactive (find problems after they happen)</p>
<p><strong>After (Cloud NOC):</strong><br />
- One unified view<br />
- Automated monitoring<br />
- 30 seconds to answer questions<br />
- Proactive (alerts before users notice)</p>
<p>They'll approve it on the spot.</p>
<h2>What You Build First</h2>
<p>Start simple. Don't try to build everything at once.</p>
<p><strong>Week 1: Basic Inventory Workbook</strong></p>
<p>One workbook. Three queries. Resource Graph only.</p>
<p><strong>Query 1: VM Inventory</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">powerState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">extended</span><span class="err">.</span><span class="n">instanceView</span><span class="err">.</span><span class="n">powerState</span><span class="err">.</span><span class="n">code</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">resourceGroup</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">osType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">storageProfile</span><span class="err">.</span><span class="n">osDisk</span><span class="err">.</span><span class="n">osType</span><span class="p">),</span>
<span class="w">    </span><span class="n">vmSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">hardwareProfile</span><span class="err">.</span><span class="n">vmSize</span><span class="p">),</span>
<span class="w">    </span><span class="n">powerState</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">asc</span>
</code></pre></div>

<p>Shows you every VM, its OS, size, and whether it's running.</p>
<p><strong>Query 2: Resources Without Required Tags</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="k">!has</span><span class="w"> </span><span class="s">&quot;CostCenter&quot;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="k">!has</span><span class="w"> </span><span class="s">&quot;Owner&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">resourceGroup</span><span class="p">,</span><span class="w"> </span><span class="n">subscriptionId</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">asc</span>
</code></pre></div>

<p>Finds governance violations immediately.</p>
<p><strong>Query 3: Stopped VMs Still Charging</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">powerState</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">extended</span><span class="err">.</span><span class="n">instanceView</span><span class="err">.</span><span class="n">powerState</span><span class="err">.</span><span class="n">code</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">powerState</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;PowerState/stopped&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">resourceGroup</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">vmSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">hardwareProfile</span><span class="err">.</span><span class="n">vmSize</span><span class="p">)</span>
</code></pre></div>

<p>These VMs are stopped but NOT deallocated - still charging you.</p>
<p><strong>That's it. Three queries. Your first cloud NOC.</strong></p>
<h3>Week 2: Add Parameters</h3>
<p>Add a subscription dropdown so users can filter to one subscription or view all.</p>
<p>Add a resource group filter.</p>
<p>Add a location filter.</p>
<p>Now your workbook is interactive.</p>
<h3>Week 3: Add Alerts</h3>
<p>Set up Resource Graph alerts for:</p>
<p><strong>Alert 1: VM Count Change</strong><br />
Trigger when VM count changes by more than 10% (catches accidental deletions or unexpected deployments)</p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">count</span><span class="p">()</span>
</code></pre></div>

<p>Alert condition: VMCount decreased by more than 10% from baseline</p>
<p><strong>Alert 2: Untagged Resources</strong><br />
Trigger when untagged resources exceed threshold</p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="k">!has</span><span class="w"> </span><span class="s">&quot;CostCenter&quot;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="k">!has</span><span class="w"> </span><span class="s">&quot;Owner&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">UntaggedCount</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">count</span><span class="p">()</span>
</code></pre></div>

<p>Alert condition: UntaggedCount &gt; 50</p>
<p><strong>Alert 3: Public-Facing VMs</strong><br />
Trigger when any VM gets a public IP (potential security risk)</p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">isnotnull</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">networkProfile</span><span class="err">.</span><span class="n">networkInterfaces</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">mv-expand</span><span class="w"> </span><span class="n">nic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">networkProfile</span><span class="err">.</span><span class="n">networkInterfaces</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">nicId</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">nic</span><span class="err">.</span><span class="n">id</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">kind</span><span class="p">=</span><span class="n">inner</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">Resources</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.network/networkinterfaces&quot;</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span><span class="k">mv-expand</span><span class="w"> </span><span class="n">ipconfig</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">properties</span><span class="err">.</span><span class="n">ipConfigurations</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">isnotnull</span><span class="p">(</span><span class="n">ipconfig</span><span class="err">.</span><span class="n">properties</span><span class="err">.</span><span class="n">publicIPAddress</span><span class="p">)</span>
<span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">$</span><span class="n">left</span><span class="err">.</span><span class="n">nicId</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="err">$</span><span class="n">right</span><span class="err">.</span><span class="n">id</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">vmName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">publicIP</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">ipconfig</span><span class="err">.</span><span class="n">properties</span><span class="err">.</span><span class="n">publicIPAddress</span><span class="err">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>

<p>Alert condition: Any results returned (new public IP detected)</p>
<p>These three alerts catch 80% of common issues.</p>
<h3>Week 4: Add Log Analytics</h3>
<p>Now add performance data for VMs that are sending logs:</p>
<p><strong>VM Performance Over Time</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Perf</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">TimeGenerated</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">ago</span><span class="p">(</span><span class="mi">24</span><span class="n">h</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">ObjectName</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Processor&quot;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">CounterName</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;% Processor Time&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">AvgCPU</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">avg</span><span class="p">(</span><span class="n">CounterValue</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">Computer</span><span class="p">,</span><span class="w"> </span><span class="n">bin</span><span class="p">(</span><span class="n">TimeGenerated</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">h</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">render</span><span class="w"> </span><span class="n">timechart</span>
</code></pre></div>

<p><strong>VMs Not Sending Logs (Blind Spots)</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c">// Get all VMs from Resource Graph</span>
<span class="n">let</span><span class="w"> </span><span class="n">AllVMs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">Computer</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="c">// Get VMs with recent heartbeats in Log Analytics</span>
<span class="n">let</span><span class="w"> </span><span class="n">ActiveVMs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Heartbeat</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">TimeGenerated</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="n">ago</span><span class="p">(</span><span class="mi">1</span><span class="n">h</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">Computer</span><span class="p">;</span>
<span class="c">// Find the difference</span>
<span class="n">AllVMs</span>
<span class="p">|</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">kind</span><span class="p">=</span><span class="n">leftanti</span><span class="w"> </span><span class="n">ActiveVMs</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Computer</span>
</code></pre></div>

<p>This shows you VMs that exist but aren't sending data - your blind spots.</p>
<h3>What Success Looks Like</h3>
<p>After 4 weeks:<br />
- Leadership can open one workbook and answer their own questions<br />
- You get alerted to problems before users notice<br />
- You're not manually clicking through 44 subscriptions<br />
- You've built a cloud NOC</p>
<p>Then you iterate based on what questions keep coming up.</p>
<h2>The Bottom Line</h2>
<p>Azure dashboards and workbooks aren't mysterious tools. They're your cloud NOC.</p>
<p><strong>The foundation:</strong><br />
- <strong>Resource Graph</strong> = Inventory (what exists right now)<br />
- <strong>Log Analytics</strong> = History (what happened over time)<br />
- <strong>Workbooks</strong> = Your NOC screen (interactive investigation)<br />
- <strong>Dashboards</strong> = Your wall display (quick status check)<br />
- <strong>Alerts</strong> = Your alarm system (proactive notification)</p>
<p><strong>The business translation:</strong><br />
Leadership already understands NOCs. You're just moving the concept to the cloud.</p>
<p><strong>The practical approach:</strong><br />
Start with basic inventory queries. Add parameters for interactivity. Set up alerts for common issues. Layer in performance data from Log Analytics.</p>
<p>Four weeks. One workbook. Complete visibility across all your subscriptions.</p>
<p><strong>What most admins miss:</strong><br />
They jump straight into building complex workbooks without understanding WHY they exist or WHAT PROBLEM they solve. Now you know both.</p>
<p>You're not learning a new concept. You're building a cloud NOC using tools that already exist in Azure.</p>
<p><strong>Next steps:</strong><br />
1. Open Azure Monitor ‚Üí Workbooks<br />
2. Create a new workbook<br />
3. Add your first Resource Graph query (VM inventory)<br />
4. Save it<br />
5. Show your boss</p>
<p>That's your cloud NOC. Now build it.</p>
<hr />
<p><strong>Resources:</strong><br />
- <a href="https://learn.microsoft.com/en-us/azure/governance/resource-graph/">Azure Resource Graph documentation</a><br />
- <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/visualize/workbooks-overview">Azure Monitor Workbooks overview</a><br />
- <a href="https://learn.microsoft.com/en-us/azure/governance/resource-graph/alerts-query-quickstart">Create alerts with Resource Graph</a><br />
- <a href="https://azure-noob.com/blog/kql-cheat-sheet/">My KQL Cheat Sheet</a> - for when you're ready to write more complex queries</p>
<p><strong>Got questions?</strong> Drop them in the comments. If you're struggling to explain this to your leadership, you're not alone - and now you have the translation.</p>
  </div>

  
  
  <aside class="related-posts">
    <h3>Related Posts</h3>
    <ul>
      
      <li>
        <a href="../azure-ipam-tool/index.html">
          <span class="related-title">IP Address Management for Azure Subscription Consolidation - What Nobody Tells You About Cloud Mergers</span>
          <span class="related-meta">2025-10-06</span>
        </a>
      </li>
      
      <li>
        <a href="../modernizing-azure-workbooks/index.html">
          <span class="related-title">Modernizing Azure Monitor Workbooks: Adding 200+ Services and Global Filtering</span>
          <span class="related-meta">2025-09-28</span>
        </a>
      </li>
      
      <li>
        <a href="../azure-resource-tags-guide/index.html">
          <span class="related-title">What I Wish I Knew About Azure Resource Tags</span>
          <span class="related-meta">2025-09-23</span>
        </a>
      </li>
      
    </ul>
  </aside>
  

  
  <nav class="post-nav">
    
      <a href="../chris-bowman-dashboard/index.html">‚Üê The Truth About Chris Bowman&#39;s Azure Cost Dashboard</a>
    
    
      <a href="../azure-ipam-tool/index.html">IP Address Management for Azure Subscription Consolidation - What Nobody Tells You About Cloud Mergers ‚Üí</a>
    
  </nav>

</article>

    </div>
  </main>

  <!-- EMAIL CAPTURE -->
  <section class="email-signup">
    <div class="wrap">
      <div class="email-box">
        <h3>Get Azure tips in your inbox</h3>
        <p>Join Azure pros getting practical KQL queries, cost optimization tips, and real-world solutions.</p>
        <script async data-uid="3dfad5c743" src="https://azure-noob.kit.com/3dfad5c743/index.js"></script>
      </div>
    </div>
  </section>

  <footer class="site-footer">
    <div class="wrap">
      <p>&copy; 2025 Azure Noob ‚Äî Don&#39;t be a Noob</p>
    </div>
  </footer>

  <!-- Copy code functionality -->
  <script src="../../static/copy-code.js"></script>
  <!-- Quest JS (SFX toggle, embers, typewriter) -->
</body>
</html>