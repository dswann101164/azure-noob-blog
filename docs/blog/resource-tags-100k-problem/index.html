<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  
  

  <!-- Primary SEO -->
  <title>The 100,000 Tag Problem in Enterprise Azure ¬∑ Azure Noob</title>
  <meta name="description" content="What happens when an enterprise ends up with 100,000+ tag variations, why it happens in the real world, and how to systematically clean it up without...">
  <link rel="canonical" href="https://azure-noob.com/blog/resource-tags-100k-problem" />

  <!-- Favicons -->
  <link rel="icon" href="/static/images/logo.png">

  <!-- Open Graph -->
  <meta property="og:title" content="The 100,000 Tag Problem in Enterprise Azure">
  <meta property="og:description" content="What happens when an enterprise ends up with 100,000+ tag variations, why it happens in the real world, and how to systematically clean it up without...">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://azure-noob.com/blog/resource-tags-100k-problem">
  <meta property="og:image" content="https://azure-noob.com/static/images/hero/azure-tags-100k.png">

  
    <meta property="article:published_time" content="2025-11-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-11-24T00:00:00+00:00">
    <meta property="article:author" content="David Swann">
    
      
        <meta property="article:tag" content="Azure">
      
        <meta property="article:tag" content="Compliance">
      
        <meta property="article:tag" content="FinOps">
      
        <meta property="article:tag" content="Governance">
      
        <meta property="article:tag" content="Tags">
      
        <meta property="article:tag" content="Technical Debt">
      
    
  

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="The 100,000 Tag Problem in Enterprise Azure">
  <meta name="twitter:description" content="What happens when an enterprise ends up with 100,000+ tag variations, why it happens in the real world, and how to systematically clean it up without...">
  <meta name="twitter:image" content="https://azure-noob.com/static/images/hero/azure-tags-100k.png">

  <!-- Styles -->
  <link rel="stylesheet" href="/static/styles.css">

  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="Azure Noob RSS Feed" href="https://azure-noob.com/rss.xml">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZNHGEB0BNZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZNHGEB0BNZ');
  </script>
</head>
<body>
  <header class="site-header">
    <div class="wrap nav-wrap">
      <div class="brand-block">
        <a href="/" class="brand-link">
          <img src="/static/images/logo.png" alt="Azure Noob logo" class="logo">
        </a>
        <span class="brand-text">
          <small>Official Website of</small>
          <strong>Azure Noob</strong>
        </span>
      </div>
      <nav class="nav">
        <a href="/">Home</a>
        <a href="/blog/">Blog</a>
        <a href="/hubs/" style="font-weight: 700;">Content Hubs</a>
        <a href="/start-here">Start Here</a>
        <a href="/blog/starter-kit/">Starter Kit</a>
        <a href="/about">About</a>
        <a href="/tags/">Tags</a>
        <a href="https://github.com/dswann101164" target="_blank" rel="noopener">GitHub</a>
        <a href="/search">Search</a>
      </nav>
    </div>
  </header>

  <main class="site-content">
    <div class="wrap">
      


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "The 100,000 Tag Problem in Enterprise Azure",
  "description": "What happens when an enterprise ends up with 100,000+ tag variations, why it happens in the real world, and how to systematically clean it up without...",
  "image": {
    "@type": "ImageObject",
    "url": "https://azure-noob.com/static/images/hero/azure-tags-100k.png",
    "width": 1200,
    "height": 630
  },
  "author": {
    "@type": "Person",
    "name": "David Swann",
    "url": "https://azure-noob.com/about/",
    "description": "Azure Architect specializing in enterprise cloud infrastructure",
    "jobTitle": "Azure Architect",
    "worksFor": {
      "@type": "Organization",
      "name": "Synovus"
    }
  },
  "publisher": {
    "@type": "Organization",
    "name": "Azure Noob",
    "url": "https://azure-noob.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://azure-noob.com/static/images/logo.png"
    }
  },
  "datePublished": "2025-11-24T00:00:00+00:00",
  "dateModified": "2025-11-24T00:00:00+00:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://azure-noob.com/blog/resource-tags-100k-problem"
  },
  "keywords": "Azure, Compliance, FinOps, Governance, Tags, Technical Debt",
  "articleSection": "Azure",
  "wordCount": "6290",
  "timeRequired": "PT31M",
  "inLanguage": "en-US",
  "isAccessibleForFree": "True",
  "about": {
    "@type": "Thing",
    "name": "Azure"
  }
}
</script>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://azure-noob.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Blog",
      "item": "https://azure-noob.com/blog/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "The 100,000 Tag Problem in Enterprise Azure",
      "item": "https://azure-noob.com/blog/resource-tags-100k-problem"
    }
  ]
}
</script>




<article class="post">

  
  
    
    <div class="hero">
      <img src="/static/images/hero/azure-tags-100k.png" alt="The 100,000 Tag Problem in Enterprise Azure" loading="eager">
    </div>
  

  <header class="post-header">
    <h1>The 100,000 Tag Problem in Enterprise Azure</h1>
    <p class="muted">
      2025-11-24 ¬∑ ~31 min read
      
    </p>
    
    
    <ul class="tags-list">
      
      <li><a href="/tags/Azure" class="tag-badge">Azure</a></li>
      
      <li><a href="/tags/Compliance" class="tag-badge">Compliance</a></li>
      
      <li><a href="/tags/FinOps" class="tag-badge">FinOps</a></li>
      
      <li><a href="/tags/Governance" class="tag-badge">Governance</a></li>
      
      <li><a href="/tags/Tags" class="tag-badge">Tags</a></li>
      
      <li><a href="/tags/Technical%20Debt" class="tag-badge">Technical Debt</a></li>
      
    </ul>
    
    
    
      <p class="summary">What happens when an enterprise ends up with 100,000+ tag variations, why it happens in the real world, and how to systematically clean it up without breaking production.</p>
    
  </header>

  
  <p class="post-actions" style="margin:.5rem 0 0; text-align: center;">
    <button class="btn"
            onclick="window.print(); return false;"
            title="Print this page"
            aria-label="Print this page"
            style="cursor: pointer; background: none; border: 2px solid var(--azure-blue);">
      üñ®Ô∏è Print this page
    </button>
  </p>

  
  <div class="post-body">
    <p>In my <a href="https://azure-noob.com/blog/azure-update-manager-reality-check/">last post about Azure Update Manager</a>, I showed you how our "1,791 VMs needing updates" was actually only 348 VMs that should be in Update Manager at all. We filtered out Citrix VDI, Databricks clusters, security appliances, and everything else that shouldn't be there.</p>
<p>But that post left a critical question unanswered: <strong>How do you actually DO that filtering at scale?</strong></p>
<p>The answer: <strong>Resource tags</strong>.</p>
<p>More specifically: <strong>The TYPE tag</strong> plus five other critical tags that create organizational context.</p>
<p>Without these tags, Azure's "one pane of glass" is just "one pane of chaos":<br />
- Can't tell servers from desktops from appliances<br />
- Can't separate production from dev/test<br />
- Can't allocate costs by business unit<br />
- Can't delegate patch management responsibility<br />
- Can't filter out systems that shouldn't be there</p>
<p>The absence of these tags just cost my organization $100,000. We bought Red Hat Satellite because we couldn't answer basic questions about 47 Linux servers. Questions that proper tagging would have answered in seconds.</p>
<p>This post is the resource tagging strategy I wish we'd implemented three years ago. It would have saved us six figures and countless hours of organizational paralysis.</p>
<h2>The Problem - Azure Shows Everything With No Context</h2>
<p>When you connect on-premises servers to Azure Arc, they appear in the Azure Portal immediately. Azure Resource Manager sees them. Azure Update Manager sees them. Cost Management sees them.</p>
<p><strong>But Azure has no idea what they actually are.</strong></p>
<p>Here's what happened in our environment:</p>
<p><strong>Azure Update Manager dashboard:</strong></p>
<div class="codehilite"><pre><span></span><code>Total machines: 1,791
Machines needing updates: 1,791
</code></pre></div>

<p><strong>What Azure thought we had:</strong><br />
- 1,791 machines that need patching</p>
<p><strong>What we actually had:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="mf">348</span><span class="w"> </span><span class="n">Windows</span><span class="o">/</span><span class="n">Linux</span><span class="w"> </span><span class="n">servers</span><span class="w"> </span><span class="p">(</span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">Manager</span><span class="p">)</span>
<span class="mf">900</span><span class="w"> </span><span class="n">Citrix</span><span class="w"> </span><span class="n">VDI</span><span class="w"> </span><span class="n">hosts</span><span class="w"> </span><span class="p">(</span><span class="n">managed</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="nb">Int</span><span class="n">une</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kr">go</span><span class="n">lden</span><span class="w"> </span><span class="n">images</span><span class="p">)</span>
<span class="mf">170</span><span class="w"> </span><span class="kd">Data</span><span class="n">bricks</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="p">(</span><span class="n">managed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="kd">Data</span><span class="n">bricks</span><span class="w"> </span><span class="n">service</span><span class="p">)</span>
<span class="mf">46</span><span class="w"> </span><span class="n">security</span><span class="w"> </span><span class="n">appliances</span><span class="w"> </span><span class="p">(</span><span class="n">Palo</span><span class="w"> </span><span class="n">Alto</span><span class="p">,</span><span class="w"> </span><span class="n">F5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="kr">to</span><span class="n">ols</span><span class="w"> </span><span class="kr">on</span><span class="n">ly</span><span class="p">)</span>
<span class="mf">44</span><span class="w"> </span><span class="n">Windows</span><span class="w"> </span><span class="mf">10</span><span class="o">/</span><span class="mf">11</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="n">workstations</span><span class="w"> </span><span class="p">(</span><span class="n">need</span><span class="w"> </span><span class="nb">Int</span><span class="n">une</span><span class="p">,</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">Manager</span><span class="p">)</span>
<span class="mf">20</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="n">appliances</span><span class="w"> </span><span class="p">(</span><span class="n">switches</span><span class="p">,</span><span class="w"> </span><span class="n">routers</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">vendor</span><span class="w"> </span><span class="n">managed</span><span class="p">)</span>
<span class="mf">7</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="n">appliances</span><span class="w"> </span><span class="p">(</span><span class="n">vendor</span><span class="w"> </span><span class="n">managed</span><span class="p">)</span>
<span class="n">Various</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">specialized</span><span class="w"> </span><span class="kr">sys</span><span class="n">tems</span>

<span class="kr">To</span><span class="n">tal</span><span class="p">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="mf">791</span><span class="w"> </span><span class="n">machines</span>
<span class="n">Actually</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">Manager</span><span class="p">:</span><span class="w"> </span><span class="mf">348</span><span class="w"> </span><span class="p">(</span><span class="mf">19</span><span class="err">%</span><span class="p">)</span>
</code></pre></div>

<p><strong>Azure couldn't tell the difference because we had no tags.</strong></p>
<p>Every compliance report was wrong. Every cost report was meaningless. Every attempt to delegate responsibility failed because we couldn't answer: "Which systems are yours?"</p>
<h2>The Real-World Cost - The $100K Satellite Purchase</h2>
<p>Here's how the absence of resource tags cost us $100,000.</p>
<p><strong>The scenario:</strong></p>
<p>We had 47 RHEL 6 servers running on-premises in VMware. RHEL 6 went end-of-life in November 2020. We needed a patching solution during our 2-3 year migration to RHEL 8.</p>
<p><strong>The organizational question:</strong></p>
<p>"Who's responsible for patching these servers, and how should we do it?"</p>
<p><strong>What we knew:</strong><br />
- The Linux admin owned the servers (clear responsibility)<br />
- The Cloud team already managed Azure Arc<br />
- Arc could connect on-prem servers for $5/month per server</p>
<p><strong>What we DIDN'T know (because no tags):</strong></p>
<p>We couldn't answer these basic questions:<br />
- <strong>What TYPE are these systems?</strong> (All servers? Any appliances mixed in?)<br />
- Which ones are production vs dev/test?<br />
- What applications run on them?<br />
- Which business units should pay?<br />
- Which can be migrated first vs last?<br />
- Which are critical vs expendable?</p>
<p><strong>The result:</strong></p>
<p>Three months of meetings trying to answer these questions. Nobody had visibility. The Linux admin didn't know. VMware just showed server names like "rhel6-prod-12" with no context. We couldn't query anything meaningful.</p>
<p><strong>Management's decision:</strong></p>
<p>"Just buy Red Hat Satellite for the Linux admin. Make it his tool. We don't have time for this."</p>
<p><strong>The cost:</strong></p>
<div class="codehilite"><pre><span></span><code>Satellite infrastructure: $12K/year
RHEL 6 Extended Life Cycle Support: $47K/year  
Total: $59K/year √ó 2 years = $118,000
</code></pre></div>

<p><strong>vs. the Arc solution the Cloud team proposed:</strong></p>
<div class="codehilite"><pre><span></span><code>Arc licensing (2025 pricing): $5/server/month √ó 35 servers √ó 12 months = $2,100/year
2-year Arc cost: $2,100 √ó 2 = $4,200
Savings we didn&#39;t get: $113,800
</code></pre></div>

<p><strong>Why Arc lost:</strong></p>
<p>We couldn't answer the most basic question: <strong>What TYPE of systems are these?</strong></p>
<p>Turns out, those "47 RHEL 6 servers" were actually:<br />
- 35 actual RHEL 6 servers (Type: Server)<br />
- 8 RHEL 6-based network monitoring appliances (Type: Appliance)<br />
- 4 RHEL 6 developer workstations (Type: Desktop)</p>
<p><strong>If we'd had TYPE tags, we would have known:</strong><br />
- The 35 servers: Could use Arc + archived repos during migration<br />
- The 8 appliances: Vendor-managed only (can't patch through Satellite anyway)<br />
- The 4 workstations: Different patching approach entirely</p>
<p><strong>Instead, we bought Satellite for all 47 at $100/server/year.</strong></p>
<p><strong>We needed it for maybe 35 actual servers. We wasted $5,640 on systems that shouldn't have been in the solution at all.</strong></p>
<p><strong>Tags would have saved $113,800.</strong></p>
<h2>The Enterprise Tagging Taxonomy</h2>
<p>Here's the complete tagging standard that would have prevented our $100K mistake.</p>
<h3>The Foundation: TYPE Tag</h3>
<p>Before anything else, you must classify what TYPE of resource you're dealing with.</p>
<p><strong>This is your primary filter. Everything else depends on it.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Tag</span><span class="o">:</span><span class="w"> </span><span class="n">Type</span>
<span class="n">Values</span><span class="o">:</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Desktop</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Appliance</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Database</span><span class="o">-</span><span class="n">Cluster</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">VDI</span><span class="o">-</span><span class="n">Host</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Container</span><span class="o">-</span><span class="n">Host</span>
<span class="n">Purpose</span><span class="o">:</span><span class="w"> </span><span class="n">Fundamental</span><span class="w"> </span><span class="n">classification</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">determines</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">management</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">apply</span>
<span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Server</span>
</code></pre></div>

<p><strong>Why TYPE is critical:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Server</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">Azure</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">Manager</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Should</span><span class="w"> </span><span class="n">appear</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">patching</span><span class="w"> </span><span class="n">reports</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Normal</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">OS</span><span class="w"> </span><span class="n">patching</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="n">apply</span>

<span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Desktop</span><span class="w">  </span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Cannot</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">Manager</span><span class="w"> </span><span class="o">(</span><span class="n">shows</span><span class="w"> </span><span class="s2">&quot;unsupported&quot;</span><span class="o">)</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Needs</span><span class="w"> </span><span class="n">Intune</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">SCCM</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Different</span><span class="w"> </span><span class="n">patching</span><span class="w"> </span><span class="n">schedule</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">servers</span>

<span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Appliance</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Cannot</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">Manager</span><span class="w"> </span><span class="o">(</span><span class="n">shows</span><span class="w"> </span><span class="s2">&quot;no updates data&quot;</span><span class="o">)</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Vendor</span><span class="o">-</span><span class="n">specific</span><span class="w"> </span><span class="n">management</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">required</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">filtered</span><span class="w"> </span><span class="n">OUT</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">Manager</span><span class="w"> </span><span class="n">entirely</span>

<span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Database</span><span class="o">-</span><span class="n">Cluster</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Managed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="o">(</span><span class="n">Databricks</span><span class="o">,</span><span class="w"> </span><span class="n">etc</span><span class="o">.)</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">filtered</span><span class="w"> </span><span class="n">OUT</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">Manager</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Different</span><span class="w"> </span><span class="n">cost</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">model</span>

<span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">VDI</span><span class="o">-</span><span class="n">Host</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Patched</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">golden</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">updates</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Different</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">servers</span>
<span class="err">‚Üí</span><span class="w"> </span><span class="n">Managed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">desktop</span><span class="w"> </span><span class="n">team</span><span class="o">,</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">team</span>
</code></pre></div>

<p><strong>This is why we saw 1,791 VMs in Update Manager instead of 348.</strong></p>
<p><strong>Without TYPE tags, Azure treated everything the same.</strong></p>
<h3>The Five Additional Critical Tags</h3>
<p>Once you know the TYPE, you need these five tags for complete organizational context:</p>
<h4>1. Owner (Who's responsible)</h4>
<div class="codehilite"><pre><span></span><code><span class="n">Tag</span><span class="o">:</span><span class="w"> </span><span class="n">Owner</span>
<span class="n">Values</span><span class="o">:</span><span class="w"> </span><span class="n">Finance</span><span class="o">-</span><span class="n">Team</span><span class="o">,</span><span class="w"> </span><span class="n">Marketing</span><span class="o">-</span><span class="n">Team</span><span class="o">,</span><span class="w"> </span><span class="n">Engineering</span><span class="o">-</span><span class="n">Team</span><span class="o">,</span><span class="w"> </span><span class="n">IT</span><span class="o">-</span><span class="n">Infrastructure</span><span class="o">,</span><span class="w"> </span><span class="n">Security</span><span class="o">-</span><span class="n">Team</span>
<span class="n">Purpose</span><span class="o">:</span><span class="w"> </span><span class="n">Who</span><span class="w"> </span><span class="n">owns</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">decisions</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">it</span>
<span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="n">Owner</span><span class="o">:</span><span class="w"> </span><span class="n">Finance</span><span class="o">-</span><span class="n">Team</span>

<span class="n">Why</span><span class="w"> </span><span class="n">critical</span><span class="o">:</span><span class="w"> </span><span class="n">Delegation</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">accountability</span>
</code></pre></div>

<h4>2. Application (What runs on it)</h4>
<div class="codehilite"><pre><span></span><code><span class="n">Tag</span><span class="p">:</span><span class="w"> </span><span class="n">Application</span><span class="w">  </span>
<span class="n">Values</span><span class="p">:</span><span class="w"> </span><span class="n">ERP</span><span class="o">-</span><span class="n">System</span><span class="p">,</span><span class="w"> </span><span class="n">CRM</span><span class="p">,</span><span class="w"> </span><span class="n">Databricks</span><span class="p">,</span><span class="w"> </span><span class="n">Citrix</span><span class="o">-</span><span class="n">VDI</span><span class="p">,</span><span class="w"> </span><span class="n">Palo</span><span class="o">-</span><span class="n">Alto</span><span class="o">-</span><span class="n">Firewall</span><span class="p">,</span><span class="w"> </span><span class="n">SQL</span><span class="o">-</span><span class="n">Server</span><span class="p">,</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span>
<span class="n">Purpose</span><span class="p">:</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">workload</span><span class="o">/</span><span class="n">application</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">supports</span>
<span class="n">Example</span><span class="p">:</span><span class="w"> </span><span class="n">Application</span><span class="p">:</span><span class="w"> </span><span class="n">ERP</span><span class="o">-</span><span class="n">System</span>

<span class="n">Why</span><span class="w"> </span><span class="n">critical</span><span class="p">:</span><span class="w"> </span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">reporting</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">mapping</span>
<span class="o">-</span><span class="w"> </span><span class="n">Migration</span><span class="w"> </span><span class="n">planning</span><span class="w"> </span><span class="p">(</span><span class="n">which</span><span class="w"> </span><span class="n">apps</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">move</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Azure</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">License</span><span class="w"> </span><span class="n">tracking</span><span class="w"> </span><span class="p">(</span><span class="n">SQL</span><span class="w"> </span><span class="n">Server</span><span class="p">,</span><span class="w"> </span><span class="n">Oracle</span><span class="p">,</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Disaster</span><span class="w"> </span><span class="n">recovery</span><span class="w"> </span><span class="n">grouping</span>
</code></pre></div>

<p><strong>The Application tag unlocks migration planning:</strong></p>
<p>When you're planning Azure migration, the Application tag tells you which applications CAN'T migrate:</p>
<div class="codehilite"><pre><span></span><code><span class="c">// Find applications that must stay on-premises</span>
<span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">Application</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Palo-Alto-Firewall&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;F5-Load-Balancer&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Legacy-Mainframe&quot;</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">count</span><span class="p">()</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">app</span>
</code></pre></div>

<p>And which applications SHOULD migrate first:</p>
<div class="codehilite"><pre><span></span><code><span class="c">// Find modern applications ready for Azure</span>
<span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span>
<span class="w">    </span><span class="n">app</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">Application</span><span class="p">),</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">osName</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">osName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;Windows Server 2019&quot;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">osName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;Windows Server 2022&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="err">!</span><span class="n">in</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Palo-Alto-Firewall&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;F5-Load-Balancer&quot;</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">count</span><span class="p">()</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">app</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

<p><strong>Migration planning with cost impact:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c">// Which migration waves have highest cost impact</span>
<span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">tags</span><span class="err">.</span><span class="n">Type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Server&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span>
<span class="w">    </span><span class="n">app</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">Application</span><span class="p">),</span>
<span class="w">    </span><span class="n">wave</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">MigrationWave</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">kind</span><span class="p">=</span><span class="n">leftouter</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">ConsumptionUsageDetails</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">ChargeType</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Usage&quot;</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">MonthlyCost</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">CostInBillingCurrency</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">ResourceId</span>
<span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">$</span><span class="n">left</span><span class="err">.</span><span class="n">id</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="err">$</span><span class="n">right</span><span class="err">.</span><span class="n">ResourceId</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span>
<span class="w">    </span><span class="n">VMCount</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">count</span><span class="p">(),</span>
<span class="w">    </span><span class="n">TotalMonthlyCost</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">MonthlyCost</span><span class="p">)</span>
<span class="k">by</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">wave</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">wave</span><span class="w"> </span><span class="n">asc</span><span class="p">,</span><span class="w"> </span><span class="n">TotalMonthlyCost</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

<p><strong>The Application tag turns chaos into a migration roadmap.</strong></p>
<h4>3. Environment (Production vs Dev vs Test)</h4>
<div class="codehilite"><pre><span></span><code><span class="n">Tag</span><span class="o">:</span><span class="w"> </span><span class="n">Environment</span>
<span class="n">Values</span><span class="o">:</span><span class="w"> </span><span class="n">Production</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Development</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Staging</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DR</span>
<span class="n">Purpose</span><span class="o">:</span><span class="w"> </span><span class="n">Deployment</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">scheduling</span>
<span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="n">Environment</span><span class="o">:</span><span class="w"> </span><span class="n">Production</span>

<span class="n">Why</span><span class="w"> </span><span class="n">critical</span><span class="o">:</span><span class="w"> </span>
<span class="o">-</span><span class="w"> </span><span class="n">Production</span><span class="w"> </span><span class="n">patches</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">(</span><span class="n">or</span><span class="w"> </span><span class="n">last</span><span class="o">,</span><span class="w"> </span><span class="n">depending</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">risk</span><span class="w"> </span><span class="n">tolerance</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Dev</span><span class="o">/</span><span class="n">Test</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">aggressive</span><span class="w"> </span><span class="n">patching</span><span class="w"> </span><span class="n">schedules</span>
<span class="o">-</span><span class="w"> </span><span class="n">Cost</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="o">(</span><span class="n">prod</span><span class="w"> </span><span class="n">vs</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">prod</span><span class="o">)</span>
</code></pre></div>

<h4>4. CostCenter (Who pays)</h4>
<div class="codehilite"><pre><span></span><code><span class="n">Tag</span><span class="o">:</span><span class="w"> </span><span class="n">CostCenter</span>
<span class="n">Values</span><span class="o">:</span><span class="w"> </span><span class="mi">680</span><span class="o">-</span><span class="mi">5019</span><span class="o">,</span><span class="w"> </span><span class="mi">680</span><span class="o">-</span><span class="mi">5056</span><span class="o">,</span><span class="w"> </span><span class="mi">680</span><span class="o">-</span><span class="mi">5101</span><span class="w"> </span><span class="o">(</span><span class="n">your</span><span class="w"> </span><span class="n">accounting</span><span class="w"> </span><span class="n">codes</span><span class="o">)</span>
<span class="n">Purpose</span><span class="o">:</span><span class="w"> </span><span class="n">Which</span><span class="w"> </span><span class="n">budget</span><span class="o">/</span><span class="n">department</span><span class="w"> </span><span class="n">pays</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">resource</span>
<span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="n">CostCenter</span><span class="o">:</span><span class="w"> </span><span class="mi">680</span><span class="o">-</span><span class="mi">5019</span>

<span class="n">Why</span><span class="w"> </span><span class="n">critical</span><span class="o">:</span><span class="w"> </span>
<span class="o">-</span><span class="w"> </span><span class="n">Chargeback</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">business</span><span class="w"> </span><span class="n">units</span>
<span class="o">-</span><span class="w"> </span><span class="n">Budget</span><span class="w"> </span><span class="n">planning</span>
<span class="o">-</span><span class="w"> </span><span class="n">Cost</span><span class="w"> </span><span class="n">optimization</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">department</span>
</code></pre></div>

<h4>5. PatchingMethod (How it gets patched)</h4>
<div class="codehilite"><pre><span></span><code><span class="n">Tag</span><span class="o">:</span><span class="w"> </span><span class="n">PatchingMethod</span>
<span class="n">Values</span><span class="o">:</span><span class="w"> </span><span class="n">Azure</span><span class="o">-</span><span class="n">Update</span><span class="o">-</span><span class="n">Manager</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SCCM</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Intune</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Vendor</span><span class="o">-</span><span class="n">Managed</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Golden</span><span class="o">-</span><span class="n">Image</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Manual</span>
<span class="n">Purpose</span><span class="o">:</span><span class="w"> </span><span class="n">Which</span><span class="w"> </span><span class="n">tool</span><span class="o">/</span><span class="n">process</span><span class="w"> </span><span class="n">patches</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">resource</span>
<span class="n">Example</span><span class="o">:</span><span class="w"> </span><span class="n">PatchingMethod</span><span class="o">:</span><span class="w"> </span><span class="n">Azure</span><span class="o">-</span><span class="n">Update</span><span class="o">-</span><span class="n">Manager</span>

<span class="n">Why</span><span class="w"> </span><span class="n">critical</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Determines</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">tool</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span>
<span class="o">-</span><span class="w"> </span><span class="n">Prevents</span><span class="w"> </span><span class="n">conflicts</span><span class="w"> </span><span class="o">(</span><span class="n">two</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">trying</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">system</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Clear</span><span class="w"> </span><span class="n">operational</span><span class="w"> </span><span class="n">responsibility</span>

<span class="n">Combined</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">Type</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Server</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PatchingMethod</span><span class="o">:</span><span class="w"> </span><span class="n">Azure</span><span class="o">-</span><span class="n">Update</span><span class="o">-</span><span class="n">Manager</span><span class="w"> </span><span class="o">(</span><span class="n">correct</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Desktop</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PatchingMethod</span><span class="o">:</span><span class="w"> </span><span class="n">Intune</span><span class="w"> </span><span class="o">(</span><span class="n">correct</span><span class="o">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Type</span><span class="o">:</span><span class="w"> </span><span class="n">Appliance</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PatchingMethod</span><span class="o">:</span><span class="w"> </span><span class="n">Vendor</span><span class="o">-</span><span class="n">Managed</span><span class="w"> </span><span class="o">(</span><span class="n">correct</span><span class="o">)</span>
</code></pre></div>

<h3>Additional Useful Tags</h3>
<div class="codehilite"><pre><span></span><code><span class="n">PatchingOwner</span><span class="p">:</span><span class="w"> </span><span class="n">Cloud</span><span class="o">-</span><span class="n">Team</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SCCM</span><span class="o">-</span><span class="n">Team</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Linux</span><span class="o">-</span><span class="n">Admin</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Security</span><span class="o">-</span><span class="n">Team</span>
<span class="n">MaintenanceWindow</span><span class="p">:</span><span class="w"> </span><span class="n">Sunday</span><span class="o">-</span><span class="mi">2</span><span class="n">AM</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Wednesday</span><span class="o">-</span><span class="n">Midnight</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Saturday</span><span class="o">-</span><span class="mi">3</span><span class="n">AM</span>
<span class="n">Criticality</span><span class="p">:</span><span class="w"> </span><span class="n">Critical</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">High</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Medium</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Low</span>
<span class="n">Compliance</span><span class="p">:</span><span class="w"> </span><span class="n">PCI</span><span class="o">-</span><span class="n">DSS</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">HIPAA</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SOX</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">  </span>
<span class="n">BackupPolicy</span><span class="p">:</span><span class="w"> </span><span class="n">Daily</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Weekly</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">None</span>
<span class="n">DataClassification</span><span class="p">:</span><span class="w"> </span><span class="n">Public</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Internal</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Confidential</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Restricted</span>

<span class="n">Migration</span><span class="o">-</span><span class="n">specific</span><span class="w"> </span><span class="n">tags</span><span class="p">:</span>
<span class="n">MigrationWave</span><span class="p">:</span><span class="w"> </span><span class="n">Wave</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Wave</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Wave</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Stay</span><span class="o">-</span><span class="n">OnPrem</span>
<span class="n">AzureReady</span><span class="p">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Needs</span><span class="o">-</span><span class="n">Assessment</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Vendor</span><span class="o">-</span><span class="n">Validation</span><span class="o">-</span><span class="n">Required</span>
<span class="n">MigrationBlocker</span><span class="p">:</span><span class="w"> </span><span class="n">None</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Legacy</span><span class="o">-</span><span class="n">App</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Licensing</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Hardware</span><span class="o">-</span><span class="n">Dependency</span>

<span class="n">Future</span><span class="o">-</span><span class="n">proofing</span><span class="w"> </span><span class="p">(</span><span class="mi">2025</span><span class="o">+</span><span class="w"> </span><span class="n">trends</span><span class="p">):</span>
<span class="n">Workload</span><span class="p">:</span><span class="w"> </span><span class="n">Traditional</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">AI</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">GenAI</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ML</span><span class="o">-</span><span class="n">Training</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ML</span><span class="o">-</span><span class="n">Inference</span>
<span class="n">SustainabilityTracking</span><span class="p">:</span><span class="w"> </span><span class="n">Yes</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">No</span>
<span class="n">DataResidency</span><span class="p">:</span><span class="w"> </span><span class="n">US</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">EU</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">APAC</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Multi</span><span class="o">-</span><span class="n">Region</span>
</code></pre></div>

<h2>The Hard Truth - Discovery is Manual Work</h2>
<p><strong>Here's what I need to tell you upfront:</strong></p>
<p><strong>Azure Arc gives you visibility into your on-premises VMs. It does NOT give you context.</strong></p>
<p>When you install the Arc agent on a VM:<br />
- ‚úÖ VM appears in Azure Portal<br />
- ‚úÖ You can see it exists<br />
- ‚ùå It has NO tags<br />
- ‚ùå Azure doesn't know what TYPE it is<br />
- ‚ùå Azure doesn't know who owns it<br />
- ‚ùå Azure doesn't know what app runs on it</p>
<p><strong>You must do discovery and classification manually.</strong></p>
<p>This takes weeks or months, depending on your environment size. There's no magic button.</p>
<h3>The Discovery Process</h3>
<h4>Phase 1: Technical Inventory (Week 1-2)</h4>
<p><strong>Once Arc agents are connected, use KQL to see what you have:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c">// Complete inventory of Arc-connected machines</span>
<span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span>
<span class="w">    </span><span class="n">osType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">osType</span><span class="p">),</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">osName</span><span class="p">),</span>
<span class="w">    </span><span class="n">osVersion</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">osVersion</span><span class="p">),</span>
<span class="w">    </span><span class="n">cpuCount</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">toint</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">detectedProperties</span><span class="err">.</span><span class="n">coreCount</span><span class="p">),</span>
<span class="w">    </span><span class="n">memoryGB</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">toint</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">detectedProperties</span><span class="err">.</span><span class="n">totalPhysicalMemoryInBytes</span><span class="p">)</span><span class="w"> </span><span class="p">/</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="p">/</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="p">/</span><span class="w"> </span><span class="mi">1024</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span>
<span class="w">    </span><span class="n">name</span><span class="p">,</span>
<span class="w">    </span><span class="n">resourceGroup</span><span class="p">,</span>
<span class="w">    </span><span class="n">osType</span><span class="p">,</span>
<span class="w">    </span><span class="n">osName</span><span class="p">,</span>
<span class="w">    </span><span class="n">osVersion</span><span class="p">,</span>
<span class="w">    </span><span class="n">cpuCount</span><span class="p">,</span>
<span class="w">    </span><span class="n">memoryGB</span><span class="p">,</span>
<span class="w">    </span><span class="n">tags</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">asc</span>
</code></pre></div>

<p><strong>This shows you every Arc-connected VM with technical details, but no business context.</strong></p>
<p><strong>Identify potential TYPE based on OS name:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">osName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">osName</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">potentialType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">case</span><span class="p">(</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;windows-server&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Server&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;Red Hat Enterprise Linux&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Server&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;Ubuntu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Server&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;CentOS&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Server&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;Windows 10&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Desktop&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="k">contains</span><span class="w"> </span><span class="s">&quot;Windows 11&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Desktop&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Unknown - Investigate&quot;</span>
<span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="k">count</span><span class="p">()</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">potentialType</span><span class="p">,</span><span class="w"> </span><span class="n">osName</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">count_</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

<p><strong>The "Unknown - Investigate" entries need manual review - this is where you start your manual classification.</strong></p>
<h4>Phase 2: Classification (Week 3-4)</h4>
<p><strong>Now the manual work: Classify each VM by TYPE</strong></p>
<p>Create a spreadsheet and start classifying based on OS, role, and naming patterns.</p>
<p><strong>Track classification progress with KQL:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">isnull</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">Type</span><span class="p">)</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">tags</span><span class="err">.</span><span class="n">Type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">osName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">osName</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">resourceGroup</span><span class="p">,</span><span class="w"> </span><span class="n">osName</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">asc</span>
</code></pre></div>

<p><strong>This becomes your daily "TODO list" - which VMs still need classification.</strong></p>
<p><strong>Pattern analysis to help with classification:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c">// Group by naming patterns</span>
<span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span>
<span class="w">    </span><span class="n">prefix</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">substring</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">indexof</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">)),</span>
<span class="w">    </span><span class="n">osName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">properties</span><span class="err">.</span><span class="n">osName</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span>
<span class="w">    </span><span class="k">count</span><span class="p">(),</span>
<span class="w">    </span><span class="n">OSTypes</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">make_set</span><span class="p">(</span><span class="n">osName</span><span class="p">)</span>
<span class="k">by</span><span class="w"> </span><span class="n">prefix</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">count_</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

<p><strong>This helps you classify in bulk - VMs with similar prefixes often have the same TYPE.</strong></p>
<h4>Phase 3: Ownership Discovery (Week 5-6)</h4>
<p><strong>Figure out who owns each VM through interviews, resource organization analysis, network segments, and Finance cost center mapping.</strong></p>
<p>This is time-consuming but essential. You need to talk to application owners and business stakeholders.</p>
<h4>Phase 4: Application Mapping (Week 7-8)</h4>
<p><strong>Map applications to VMs for migration planning and dependency tracking.</strong></p>
<p>Use naming conventions, Azure Migrate dependency mapping, and application owner interviews to document which VMs belong to which applications.</p>
<h4>Phase 5: Create the Master Spreadsheet (Week 9-10)</h4>
<p><strong>Combine all discovery into one classification spreadsheet:</strong></p>
<table>
<thead>
<tr>
<th>VM Name</th>
<th>Type</th>
<th>Owner</th>
<th>Application</th>
<th>Environment</th>
<th>CostCenter</th>
<th>PatchingMethod</th>
</tr>
</thead>
<tbody>
<tr>
<td>sql-prod-01</td>
<td>Server</td>
<td>Finance-Team</td>
<td>ERP-System</td>
<td>Production</td>
<td>680-5019</td>
<td>Azure-Update-Manager</td>
</tr>
<tr>
<td>fw-palo-01</td>
<td>Appliance</td>
<td>Security-Team</td>
<td>Palo-Alto-Firewall</td>
<td>Production</td>
<td>680-5101</td>
<td>Vendor-Managed</td>
</tr>
<tr>
<td>win11-dev-23</td>
<td>Desktop</td>
<td>Engineering-Team</td>
<td>Developer-Workstation</td>
<td>Development</td>
<td>680-5101</td>
<td>Intune</td>
</tr>
<tr>
<td>databricks-w01</td>
<td>Database-Cluster</td>
<td>Data-Team</td>
<td>Databricks</td>
<td>Production</td>
<td>680-5101</td>
<td>Vendor-Managed</td>
</tr>
</tbody>
</table>
<p><strong>This spreadsheet is the result of 8-10 weeks of work. This is the hard part. There's no automation for this.</strong></p>
<h2>Bulk Tagging Implementation</h2>
<p><strong>Now that you have the classification spreadsheet, apply tags with PowerShell:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c"># Import your classification spreadsheet</span>
<span class="nv">$vmClassification</span> <span class="p">=</span> <span class="nb">Import-Csv</span> <span class="n">-Path</span> <span class="s2">&quot;C:\VM-Classification-Complete.csv&quot;</span>

<span class="c"># Connect to Azure</span>
<span class="nb">Connect-AzAccount</span>

<span class="nv">$successCount</span> <span class="p">=</span> <span class="n">0</span>
<span class="nv">$failCount</span> <span class="p">=</span> <span class="n">0</span>
<span class="nv">$errors</span> <span class="p">=</span> <span class="p">@()</span>

<span class="c"># Bulk apply tags to Arc-connected machines</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$vm</span> <span class="k">in</span> <span class="nv">$vmClassification</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nv">$arcMachine</span> <span class="p">=</span> <span class="nb">Get-AzConnectedMachine</span> <span class="n">-Name</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">VMName</span> <span class="n">-ErrorAction</span> <span class="n">Stop</span>

        <span class="nv">$tags</span> <span class="p">=</span> <span class="p">@{</span>
            <span class="nb">Type </span><span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="nb">Type</span>
            <span class="n">Owner</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Owner</span>
            <span class="n">Application</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Application</span>
            <span class="n">Environment</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">Environment</span>
            <span class="n">CostCenter</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">CostCenter</span>
            <span class="n">PatchingMethod</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">PatchingMethod</span>
        <span class="p">}</span>

        <span class="nb">Update-AzTag</span> <span class="n">-ResourceId</span> <span class="nv">$arcMachine</span><span class="p">.</span><span class="n">Id</span> <span class="n">-Tag</span> <span class="nv">$tags</span> <span class="n">-Operation</span> <span class="n">Merge</span> <span class="n">-ErrorAction</span> <span class="n">Stop</span>

        <span class="nb">Write-Host</span> <span class="s2">&quot;‚úì Tagged: </span><span class="p">$(</span><span class="nv">$vm</span><span class="p">.</span><span class="n">VMName</span><span class="p">)</span><span class="s2">&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
        <span class="nv">$successCount</span><span class="p">++</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">{</span>
        <span class="nb">Write-Warning</span> <span class="s2">&quot;‚úó Failed: </span><span class="p">$(</span><span class="nv">$vm</span><span class="p">.</span><span class="n">VMName</span><span class="p">)</span><span class="s2"> - </span><span class="p">$(</span><span class="nv">$_</span><span class="p">.</span><span class="n">Exception</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span><span class="s2">&quot;</span>
        <span class="nv">$errors</span> <span class="p">+=</span> <span class="no">[PSCustomObject]</span><span class="p">@{</span>
            <span class="n">VMName</span> <span class="p">=</span> <span class="nv">$vm</span><span class="p">.</span><span class="n">VMName</span>
            <span class="n">Error</span> <span class="p">=</span> <span class="nv">$_</span><span class="p">.</span><span class="n">Exception</span><span class="p">.</span><span class="n">Message</span>
        <span class="p">}</span>
        <span class="nv">$failCount</span><span class="p">++</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nb">Write-Host</span> <span class="s2">&quot;</span><span class="se">`n</span><span class="s2">Tagging Complete:&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Cyan</span>
<span class="nb">Write-Host</span> <span class="s2">&quot;  Success: $successCount VMs&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Green</span>
<span class="nb">Write-Host</span> <span class="s2">&quot;  Failed: $failCount VMs&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Red</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$errors</span><span class="p">.</span><span class="n">Count</span> <span class="o">-gt</span> <span class="n">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span> <span class="p">|</span> <span class="nb">Export-Csv</span> <span class="n">-Path</span> <span class="s2">&quot;C:\Tagging-Errors.csv&quot;</span> <span class="n">-NoTypeInformation</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;</span><span class="se">`n</span><span class="s2">Errors exported to: C:\Tagging-Errors.csv&quot;</span> <span class="n">-ForegroundColor</span> <span class="n">Yellow</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Validate tagging coverage and compliance:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span>
<span class="w">    </span><span class="n">hasType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">isnotnull</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">Type</span><span class="p">),</span>
<span class="w">    </span><span class="n">hasOwner</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">isnotnull</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">Owner</span><span class="p">),</span>
<span class="w">    </span><span class="n">hasEnvironment</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">isnotnull</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">Environment</span><span class="p">),</span>
<span class="w">    </span><span class="n">hasCostCenter</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">isnotnull</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">CostCenter</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">Compliance</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">iff</span><span class="p">(</span><span class="n">hasType</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">hasOwner</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">hasEnvironment</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">hasCostCenter</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Compliant&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Non-Compliant&quot;</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span>
<span class="w">    </span><span class="n">TotalVMs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">count</span><span class="p">(),</span>
<span class="w">    </span><span class="n">CompliantVMs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">countif</span><span class="p">(</span><span class="n">Compliance</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Compliant&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">NonCompliantVMs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">countif</span><span class="p">(</span><span class="n">Compliance</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Non-Compliant&quot;</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">ComplianceRate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">round</span><span class="p">(</span><span class="mf">100.0</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">CompliantVMs</span><span class="w"> </span><span class="p">/</span><span class="w"> </span><span class="n">TotalVMs</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span><span class="n">TotalVMs</span><span class="p">,</span><span class="w"> </span><span class="n">CompliantVMs</span><span class="p">,</span><span class="w"> </span><span class="n">NonCompliantVMs</span><span class="p">,</span><span class="w"> </span><span class="n">ComplianceRate</span>
</code></pre></div>

<p><strong>Target: 95%+ compliance rate</strong></p>
<h2>Enforcement - Azure Policy Prevents Tag Drift</h2>
<p><strong>The problem with manual tagging:</strong></p>
<p>You spend 8-12 weeks tagging everything perfectly. Six months later, it's chaos again because:<br />
- New Arc VMs connect without tags<br />
- Different admins don't follow tagging standards<br />
- Urgent deployments skip tagging ("we'll tag it later")</p>
<p><strong>The solution: Azure Policy enforces tags at connection time.</strong></p>
<h3>Deny Arc Connection Without Required Tags</h3>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Indexed&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;policyRule&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;allOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;type&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Microsoft.HybridCompute/machines&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;anyOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tags[&#39;Type&#39;]&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;exists&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;false&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tags[&#39;Owner&#39;]&quot;</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;exists&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;false&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;then&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;deny&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>What this does:</strong><br />
- Blocks Arc agent connection if VM doesn't have Type and Owner tags<br />
- Forces tagging at creation time<br />
- No more "we'll tag it later"</p>
<p><strong>Deploy via PowerShell:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nb">New-AzPolicyDefinition</span> <span class="p">`</span>
  <span class="n">-Name</span> <span class="s2">&quot;require-tags-on-arc-vms&quot;</span> <span class="p">`</span>
  <span class="n">-DisplayName</span> <span class="s2">&quot;Require Type and Owner tags on Arc machines&quot;</span> <span class="p">`</span>
  <span class="n">-Policy</span> <span class="p">(</span><span class="nb">Get-Content</span> <span class="n">-Path</span> <span class="s2">&quot;.\require-arc-tags-policy.json&quot;</span> <span class="n">-Raw</span><span class="p">)</span>

<span class="nb">New-AzPolicyAssignment</span> <span class="p">`</span>
  <span class="n">-Name</span> <span class="s2">&quot;enforce-arc-tagging&quot;</span> <span class="p">`</span>
  <span class="n">-Scope</span> <span class="s2">&quot;/subscriptions/{subscription-id}&quot;</span> <span class="p">`</span>
  <span class="n">-PolicyDefinition</span> <span class="p">(</span><span class="nb">Get-AzPolicyDefinition</span> <span class="n">-Name</span> <span class="s2">&quot;require-tags-on-arc-vms&quot;</span><span class="p">)</span>
</code></pre></div>

<p><strong>This ensures your 8-12 weeks of tagging work STAYS clean.</strong></p>
<p><em>Full policy implementation covered in next post: "Azure Policy for On-Premises: How to Maintain Your Tagging Investment"</em></p>
<h2>Filtering Update Manager with Tags</h2>
<p><strong>Now that everything is tagged, you can filter properly:</strong></p>
<p><strong>Show Only Servers That Should Use Update Manager:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span><span class="w"> </span>
<span class="w">    </span><span class="k">or</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">tags</span><span class="err">.</span><span class="n">Type</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Server&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">tags</span><span class="err">.</span><span class="n">PatchingMethod</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Azure-Update-Manager&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">project</span><span class="w"> </span>
<span class="w">    </span><span class="n">name</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">resourceGroup</span><span class="p">,</span>
<span class="w">    </span><span class="n">Type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tags</span><span class="err">.</span><span class="n">Type</span><span class="p">,</span>
<span class="w">    </span><span class="n">Owner</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tags</span><span class="err">.</span><span class="n">Owner</span><span class="p">,</span>
<span class="w">    </span><span class="n">Environment</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tags</span><span class="err">.</span><span class="n">Environment</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">asc</span>
</code></pre></div>

<p><strong>Result: 348 VMs (not 1,791)</strong></p>
<p><strong>Show all VMs by TYPE:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">vmType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">Type</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="k">count</span><span class="p">()</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">vmType</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">count_</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

<h2>Cost Allocation with Tags</h2>
<p><strong>Tags enable accurate cost allocation and chargeback:</strong></p>
<p><strong>Cost by Business Unit:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.compute/virtualmachines&quot;</span><span class="w"> </span>
<span class="w">    </span><span class="k">or</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">costCenter</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">CostCenter</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">kind</span><span class="p">=</span><span class="n">leftouter</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">ConsumptionUsageDetails</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">ChargeType</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Usage&quot;</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">MonthlyCost</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">CostInBillingCurrency</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">ResourceId</span>
<span class="p">)</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">$</span><span class="n">left</span><span class="err">.</span><span class="n">id</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="err">$</span><span class="n">right</span><span class="err">.</span><span class="n">ResourceId</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">TotalCost</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">sum</span><span class="p">(</span><span class="n">MonthlyCost</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">costCenter</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">TotalCost</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

<p><strong>Now Finance can see their infrastructure costs. HR can see theirs. Accountability established.</strong></p>
<p><strong>Patching Costs by Method:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">Resources</span><span class="w">  </span>
<span class="p">|</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=~</span><span class="w"> </span><span class="s">&quot;microsoft.hybridcompute/machines&quot;</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">patchMethod</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">tostring</span><span class="p">(</span><span class="n">tags</span><span class="err">.</span><span class="n">PatchingMethod</span><span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">summarize</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">count</span><span class="p">()</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">patchMethod</span>
<span class="p">|</span><span class="w"> </span><span class="k">extend</span><span class="w"> </span><span class="n">EstimatedMonthlyCost</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">case</span><span class="p">(</span>
<span class="w">    </span><span class="n">patchMethod</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Azure-Update-Manager&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="n">patchMethod</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;Satellite&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">    </span><span class="n">patchMethod</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;sccm&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="n">patchMethod</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="s">&quot;intune&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">VMCount</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span>
<span class="p">)</span>
<span class="p">|</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">EstimatedMonthlyCost</span><span class="w"> </span><span class="n">desc</span>
</code></pre></div>

<p><strong>This query would have shown: Satellite costs 2.7x more than Arc for fewer servers!</strong></p>
<h2>What We Should Have Done (The $100K Lesson Revisited)</h2>
<p><strong>If we'd implemented tagging before the RHEL 6 EOL crisis:</strong></p>
<p><strong>What we would have discovered:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="mf">35</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="n">servers</span><span class="w"> </span><span class="p">(</span><span class="n">Type</span><span class="p">:</span><span class="w"> </span><span class="n">Server</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="p">:</span><span class="w"> </span><span class="n">ERP</span><span class="o">-</span><span class="kr">Sys</span><span class="n">tem</span><span class="w"> </span><span class="p">(</span><span class="mf">23</span><span class="w"> </span><span class="n">servers</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Finance</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="p">:</span><span class="w"> </span><span class="n">HR</span><span class="o">-</span><span class="n">Portal</span><span class="w"> </span><span class="p">(</span><span class="mf">8</span><span class="w"> </span><span class="n">servers</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">HR</span><span class="w">  </span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="p">:</span><span class="w"> </span><span class="n">Development</span><span class="o">-</span><span class="kr">To</span><span class="n">ols</span><span class="w"> </span><span class="p">(</span><span class="mf">4</span><span class="w"> </span><span class="n">servers</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">IT</span>

<span class="mf">8</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="mf">6</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">appliances</span><span class="w"> </span><span class="p">(</span><span class="n">Type</span><span class="p">:</span><span class="w"> </span><span class="n">Appliance</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="p">:</span><span class="w"> </span><span class="n">SolarWinds</span><span class="o">-</span><span class="n">Monitor</span><span class="w"> </span><span class="p">(</span><span class="mf">3</span><span class="w"> </span><span class="n">appliances</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="p">:</span><span class="w"> </span><span class="n">Network</span><span class="o">-</span><span class="n">Management</span><span class="w"> </span><span class="p">(</span><span class="mf">5</span><span class="w"> </span><span class="n">appliances</span><span class="p">)</span>

<span class="mf">4</span><span class="w"> </span><span class="n">RHEL</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="n">workstations</span><span class="w"> </span><span class="p">(</span><span class="n">Type</span><span class="p">:</span><span class="w"> </span><span class="n">Desktop</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Application</span><span class="p">:</span><span class="w"> </span><span class="n">Developer</span><span class="o">-</span><span class="n">Workstation</span><span class="w"> </span><span class="p">(</span><span class="mf">4</span><span class="w"> </span><span class="n">workstations</span><span class="p">)</span>
</code></pre></div>

<p><strong>Decision with Application tags - Migration planning:</strong></p>
<p><strong>Wave 1 (Month 1-3): Migrate Development-Tools (4 VMs)</strong><br />
- Lowest risk (development environment)<br />
- Test Arc + Update Manager approach<br />
- Cost: $5/server/month √ó 4 = $20/month</p>
<p><strong>Wave 2 (Month 4-6): Migrate HR-Portal (8 VMs)</strong><br />
- Medium complexity (production, but non-critical)<br />
- Cost: $5/server/month √ó 8 = $40/month</p>
<p><strong>Wave 3 (Month 7-12): Migrate or maintain ERP-System (23 VMs)</strong><br />
- High complexity (critical production)<br />
- Requires vendor validation<br />
- Option A: Migrate to RHEL 8 in Azure ($5/server/month √ó 23 = $115/month)<br />
- Option B: Keep on-prem with Satellite until vendor ready</p>
<p><strong>Total 2-year cost with Application-based migration plan:</strong><br />
- Best case (all migrate to Arc): $4,200 total<br />
- Worst case (ERP stays on Satellite): $31,200 total<br />
- <strong>What we actually paid: $118,000</strong></p>
<p><strong>The Application tag enabled migration planning that would have saved $86,800 to $113,800.</strong></p>
<p><strong>Without Application tags, we couldn't create a migration wave strategy. We treated all 47 "servers" the same and bought the expensive solution for all of them.</strong></p>
<h2>Getting Started - Your Tagging Implementation Plan</h2>
<p><strong>Week 1-2:</strong> Inventory &amp; Technical Discovery<br />
<strong>Week 3-4:</strong> TYPE Classification<br />
<strong>Week 5-6:</strong> Ownership Discovery<br />
<strong>Week 7-8:</strong> Application Mapping<br />
<strong>Week 9-10:</strong> Tagging Implementation<br />
<strong>Week 11-12:</strong> Validation &amp; Reporting</p>
<h2>The Bottom Line</h2>
<p><strong>Resource tags are not optional metadata.</strong></p>
<p><strong>They're the organizational structure that makes Azure's "one pane of glass" actually work.</strong></p>
<p><strong>Without tags (especially TYPE):</strong><br />
- Azure shows everything with no context (1,791 VMs)<br />
- Can't tell servers from desktops from appliances<br />
- Can't delegate responsibility<br />
- Can't allocate costs accurately<br />
- Can't filter Update Manager properly<br />
- Teams buy duplicate expensive tools ($100K+ waste)<br />
- Every decision requires manual investigation and meetings</p>
<p><strong>With proper tags:</strong><br />
- Clear filtering (348 servers, 44 desktops, 46 appliances - each managed correctly)<br />
- Type-appropriate tool selection<br />
- Accurate cost allocation<br />
- Migration planning capability<br />
- No $100K mistakes<br />
- Instant answers via queries</p>
<p><strong>The tagging work takes 8-12 weeks.</strong></p>
<p><strong>It's manual work. There's no magic button.</strong></p>
<p><strong>But the benefits last forever.</strong></p>
<p><strong>The first duplicate tool purchase you avoid pays for the tagging project 20x over.</strong></p>
<p><strong>Start with TYPE. Everything else follows from there.</strong></p>
<hr />
<p><strong>Next in this series:</strong> "Azure Policy for On-Premises: How to Maintain Your Tagging Investment (So It Doesn't Decay Back to Chaos)"</p>
  </div>

  
  <section class="starter-kit-callout" style="
    max-width: 800px;
    margin: 3rem auto 2rem;
    padding: 2rem;
    border-radius: 12px;
    background: var(--bg-light);
    border: 1px solid var(--border);
    text-align: left;
  ">
    <h3 style="margin-top: 0;">Azure Admin Starter Kit (Free Download)</h3>
    <p style="margin-bottom: 1rem;">
      Get my KQL cheat sheet, 50 Windows + 50 Linux commands, and an Azure RACI template in one free bundle.
    </p>
    <a href="/blog/starter-kit/" class="btn">Get the Starter Kit ‚Üí</a>
  </section>

  
  <div class="inline-subscribe" style="
    max-width: 800px;
    margin: 3rem auto;
    padding: 2.5rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 12px;
    text-align: center;
    color: white;
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
  ">
    <h3 style="margin: 0 0 1rem; font-size: 1.75rem; color: white;">Get more Azure content like this</h3>
    <p style="margin: 0 0 1.5rem; font-size: 1.1rem; opacity: 0.95%;">
      Join Azure pros getting practical KQL queries, cost optimization tips, and real-world solutions delivered weekly.
    </p>
    <form action="https://magic.beehiiv.com/v1/3827b09b-c887-4929-a724-f6c97cef1c94" method="GET" class="subscribe-form" style="max-width: 500px; margin: 0 auto;">
      <input type="email" name="email" placeholder="your@email.com" required style="
        flex: 1;
        padding: 0.75rem 1rem;
        border: 2px solid rgba(255,255,255,0.3);
        border-radius: 6px;
        font-size: 1rem;
        background: rgba(255,255,255,0.9);
      ">
      <button type="submit" style="
        padding: 0.75rem 1.5rem;
        background: white;
        color: #667eea;
        border: none;
        border-radius: 6px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s ease;
      ">Subscribe</button>
    </form>
  </div>

  
  
  <aside class="related-posts" style="max-width: 800px; margin: 3rem auto; padding: 2rem; background: var(--bg-light); border-radius: 12px;">
    <h3 style="margin-top: 0;">Related Posts</h3>
    <ul style="list-style: none; padding: 0;">
      
      <li style="margin: 1rem 0;">
        <a href="/blog/azure-tag-governance-policy" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Azure Tag Governance: Policy Patterns That Actually Work</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-10-31</span>
        </a>
      </li>
      
      <li style="margin: 1rem 0;">
        <a href="/blog/azure-hybrid-benefit-complete" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Azure Hybrid Benefit vs. Cloud License: The $50K Licensing Mistake Every Azure Admin Must Avoid</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-12-11</span>
        </a>
      </li>
      
      <li style="margin: 1rem 0;">
        <a href="/blog/azure-chargeback-tags-model" style="display: block; padding: 1rem; background: white; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease;">
          <span class="related-title" style="font-weight: 700; display: block; color: var(--text-dark);">Designing an Azure Chargeback Model with Tags</span>
          <span class="related-meta" style="color: var(--text-muted); font-size: 0.9rem;">2025-10-16</span>
        </a>
      </li>
      
    </ul>
  </aside>
  

  
  
  
    <!-- CTA: FinOps Resources -->
<div class="cta-block" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 2rem; border-radius: 8px; margin: 3rem 0; text-align: center; color: white;">
  <h3 style="margin: 0 0 1rem; font-size: 1.75rem; color: white;">üí∞ Stop Guessing at Azure Costs</h3>
  <p style="margin: 0 0 1.5rem; font-size: 1.1rem; line-height: 1.6;">
    Get the <strong>Azure FinOps Framework</strong> with cost allocation templates, tag governance policies, 
    and showback dashboards that finance actually understands.
  </p>
  <a href="/static/downloads/Azure-Integration-Assessment-Framework.xlsx" 
     download
     style="display: inline-block; padding: 0.75rem 2rem; background: white; color: #667eea; text-decoration: none; border-radius: 6px; font-weight: 700; font-size: 1.1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: all 0.3s ease;"
     onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,0,0,0.2)'"
     onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)'">
    Download FinOps Framework
  </a>
  <p style="margin: 1rem 0 0; font-size: 0.9rem; opacity: 0.9;">
    Excel template ‚Ä¢ KQL queries included ‚Ä¢ No email required
  </p>
</div>
  

  
  <nav class="post-nav">
    
      <a href="/blog/sql-server-2025-vector-database-production-reality">
        <span style="opacity: 0.7; font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">‚Üê Previous</span>
        <strong>SQL Server 2025 Vector Database: What Microsoft Doesn&#39;t Tell You About Production Deployments</strong>
      </a>
    
    
      <a href="/blog/azure-arc-vcenter-implementation-guide" style="text-align: right;">
        <span style="opacity: 0.7; font-size: 0.85rem; display: block; margin-bottom: 0.25rem;">Next ‚Üí</span>
        <strong>The Azure Arc Multi-vCenter Implementation Guide That Actually Works</strong>
      </a>
    
  </nav>

</article>

    </div>
  </main>

  <!-- EMAIL CAPTURE SECTION -->
  <section class="email-signup" id="subscribe">
    <div class="wrap">
      <h3>Get Azure tips in your inbox</h3>
      <p>Join Azure pros getting practical KQL queries, cost optimization tips, and real-world solutions.</p>
      <form action="https://magic.beehiiv.com/v1/3827b09b-c887-4929-a724-f6c97cef1c94" method="GET" class="subscribe-form">
        <input type="email" name="email" placeholder="your@email.com" required>
        <button type="submit">Subscribe</button>
      </form>
    </div>
  </section>

  <footer class="site-footer">
    <div class="wrap">
      <p>&copy; 2025 Azure Noob ‚Äî Don&#39;t be a Noob</p>
      <p style="margin-top: 0.5rem; font-size: 0.9rem;">
        <a href="/rss.xml" title="Subscribe via RSS">RSS Feed</a> ¬∑ 
        <a href="https://github.com/dswann101164" target="_blank" rel="noopener">GitHub</a>
      </p>
      <p style="margin-top: 1.5rem; font-size: 0.85rem; opacity: 0.7; font-style: italic;">
        "Trust in the Lord with all your heart, and lean not on your own understanding;<br>
        in all your ways acknowledge Him, and He will make your paths straight" ‚Äî Proverbs 3:5-6
      </p>
    </div>
  </footer>

  <!-- Copy code functionality -->
  <script src="/static/copy-code.js"></script>
</body>
</html>