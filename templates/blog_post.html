<header class="post-header">
  <h1>{{ post.title }}</h1>
  <p class="muted">{{ post.date|ymd }} Â· {{ reading_min }} min read</p>
</header>

<div class="post-body" id="post-content">
  {{ content|safe }}
</div>

<script>
(function () {
  const root = document.getElementById('post-content');
  if (!root) return;
  // Wrap wide tables for horizontal scroll
  root.querySelectorAll('table').forEach(tbl => {
    if (tbl.parentElement?.classList.contains('table-wrap')) return;
    const wrap = document.createElement('div');
    wrap.className = 'table-wrap';
    tbl.replaceWith(wrap); wrap.appendChild(tbl);
  });
  // Convert a UL immediately following a "Jump to a section" heading into chips
  root.querySelectorAll('h2, h3').forEach(h => {
    if (/jump to a section/i.test(h.textContent.trim())) {
      const next = h.nextElementSibling;
      if (next && next.tagName === 'UL') next.classList.add('toc-chips');
    }
  });
})();
</script>
