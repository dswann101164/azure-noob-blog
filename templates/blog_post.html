<div class="post-body" id="post-content">
  {{ content|safe }}
</div>
<script>
(function () {
  const root = document.getElementById('post-content');
  if (!root) return;
  root.querySelectorAll('table').forEach(tbl => {
    if (tbl.parentElement && tbl.parentElement.classList.contains('table-wrap')) return;
    const wrap = document.createElement('div');
    wrap.className = 'table-wrap';
    tbl.replaceWith(wrap);
    wrap.appendChild(tbl);
  });
})();
</script>
