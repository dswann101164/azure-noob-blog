{% extends "base.html" %}

{% block content %}
<article class="post">

  {# --- HERO IMAGE (use normalized cover_url from app.py) --- #}
  {% if post.animated_hero %}
    {# Animated hero for special posts #}
    <link rel="stylesheet" href="{{ url_for('static', filename='hero-animated.css') }}">
    <div class="hero-animated">
      <div class="grid-bg"></div>
      <div class="glow"></div>
      <div class="glow"></div>
      
      <div class="question-mark">?</div>
      <div class="question-mark">?</div>
      <div class="question-mark">?</div>
      
      <div class="arrow"></div>
      <div class="arrow"></div>
      <div class="arrow"></div>
      <div class="arrow"></div>
      
      <div class="tool-badge wsus">WSUS</div>
      <div class="tool-badge sccm">SCCM</div>
      <div class="tool-badge azure">Azure Update Manager</div>
      <div class="tool-badge intune">Intune</div>
      
      <div class="content">
        <div class="question">Three Microsoft reps, three different answers</div>
        <h1>Which One?</h1>
        <div class="subtitle">
          SCCM, WSUS, Azure Update Manager, Intune‚Äî<br>
          <span class="highlight">nobody will tell you which tool to actually use</span>
        </div>
      </div>
    </div>
  {% elif cover_url %}
    {# Static hero image #}
    <div class="hero">
      <img src="{{ cover_url }}" alt="{{ post.title }}">
    </div>
  {% endif %}

  <header class="post-header">
    <h1>{{ post.title }}</h1>
    <p class="muted">
      {{ post.date|ymd }} ¬∑ ~{{ reading_min }} min read
      {% if post.tags and post.tags|length %} ¬∑ {{ post.tags|join(", ") }}{% endif %}
    </p>
    {% if post.summary %}
      <p class="summary">{{ post.summary }}</p>
    {% endif %}
  </header>

  {# ---- POST ACTIONS (print) ---- #}
  <p class="post-actions" style="margin:.5rem 0 0;">
    <button class="btn print-trigger"
            onclick="window.print(); return false;"
            title="Print this page"
            aria-label="Print this page">üñ®Ô∏è Print this page</button>
  </p>

  {# ---- MAIN POST BODY ---- #}
  <div class="post-body">
    {{ content|safe }}
  </div>

  {# ---- RELATED POSTS ---- #}
  {% if related_posts %}
  <aside class="related-posts">
    <h3>Related Posts</h3>
    <ul>
      {% for related in related_posts %}
      <li>
        <a href="{{ url_for('blog_post', slug=related.slug) }}">
          <span class="related-title">{{ related.title }}</span>
          <span class="related-meta">{{ related.date|ymd }}</span>
        </a>
      </li>
      {% endfor %}
    </ul>
  </aside>
  {% endif %}

  {# ---- PREV/NEXT ---- #}
  <nav class="post-nav">
    {% if prev_post %}
      <a href="{{ url_for('blog_post', slug=prev_post.slug) }}">‚Üê {{ prev_post.title }}</a>
    {% else %}
      <span></span>
    {% endif %}
    {% if next_post %}
      <a href="{{ url_for('blog_post', slug=next_post.slug) }}">{{ next_post.title }} ‚Üí</a>
    {% endif %}
  </nav>

</article>
{% endblock %}
