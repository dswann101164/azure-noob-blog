{% extends "base.html" %}

{% block content %}

<!-- HUB HERO SECTION -->
<div class="hub-hero" style="
  background: linear-gradient(135deg, {{ hub.gradient_start }} 0%, {{ hub.gradient_end }} 100%);
  padding: 3rem 0;
  margin: -1rem -1.5rem 3rem;
  color: white;
  text-align: center;
  border-radius: 0 0 16px 16px;
">
  <div class="wrap">
    <div style="display: inline-block; background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 8px; margin-bottom: 1rem; font-weight: 700; font-size: 0.9rem;">
      {{ hub.icon }} {{ hub.category }}
    </div>
    <h1 style="font-size: 2.75rem; margin: 0 0 1rem; font-weight: 800;">{{ hub.title }}</h1>
    <p style="font-size: 1.3rem; max-width: 700px; margin: 0 auto; opacity: 0.95; line-height: 1.6;">{{ hub.subtitle }}</p>
  </div>
</div>

<!-- PHILOSOPHY SECTION -->
<section style="max-width: 800px; margin: 0 auto 3rem;">
  <h2 style="font-size: 1.75rem; margin-bottom: 1rem; color: #1a202c;">{{ hub.philosophy_title }}</h2>
  <div style="font-size: 1.125rem; line-height: 1.8; color: #2d3748;">
    {{ hub.philosophy_content|safe }}
  </div>
</section>

<!-- CURATED CONTENT SECTIONS -->
{% for section in sections %}
<section style="max-width: 900px; margin: 0 auto 3rem;">
  <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem;">
    <span style="font-size: 2rem;">{{ section.icon }}</span>
    <div>
      <h2 style="font-size: 1.75rem; margin: 0; color: #1a202c;">{{ section.title }}</h2>
      <p style="margin: 0.25rem 0 0; color: #718096; font-size: 1rem;">{{ section.description }}</p>
    </div>
  </div>

  <div style="display: grid; gap: 1.5rem;">
    {% for post in section.posts %}
    <article style="
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;
      display: flex;
      gap: 1.5rem;
      align-items: start;
    " onmouseover="this.style.borderColor='#0078d4'; this.style.transform='translateX(4px)'" onmouseout="this.style.borderColor='#e2e8f0'; this.style.transform='translateX(0)'">
      
      {% if post.cover_url %}
      <div style="flex-shrink: 0; width: 120px; height: 80px; overflow: hidden; border-radius: 8px;">
        <img src="{{ url_for('static', filename=post.cover_url.lstrip('/').replace('static/', '')) }}" 
             alt="{{ post.title }}" 
             style="width: 100%; height: 100%; object-fit: cover;">
      </div>
      {% endif %}

      <div style="flex: 1;">
        <h3 style="margin: 0 0 0.5rem; font-size: 1.3rem;">
          <a href="{{ url_for('blog_post', slug=post.slug) }}" style="color: #1a202c; text-decoration: none;">
            {{ post.title }}
          </a>
        </h3>
        <p style="color: #718096; font-size: 0.95rem; margin: 0 0 0.75rem;">{{ post.date|ymd }}</p>
        <p style="color: #4a5568; line-height: 1.6; margin: 0;">{{ post.summary }}</p>
        
        {% if post.tags %}
        <div style="margin-top: 0.75rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
          {% for tag in post.tags[:3] %}
          <span class="tag-badge" style="font-size: 0.8rem;">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}
      </div>

      <div style="flex-shrink: 0;">
        <a href="{{ url_for('blog_post', slug=post.slug) }}" class="btn" style="white-space: nowrap;">Read â†’</a>
      </div>
    </article>
    {% endfor %}
  </div>
</section>
{% endfor %}

<!-- GITHUB RESOURCES SECTION -->
{% if hub.github_resources %}
<section style="max-width: 900px; margin: 0 auto 3rem;">
  <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem;">
    <span style="font-size: 2rem;">ðŸ’»</span>
    <div>
      <h2 style="font-size: 1.75rem; margin: 0; color: #1a202c;">GitHub Resources</h2>
      <p style="margin: 0.25rem 0 0; color: #718096; font-size: 1rem;">Production-ready code and tools</p>
    </div>
  </div>

  <div style="display: grid; gap: 1rem;">
    {% for resource in hub.github_resources %}
    <a href="{{ resource.url }}" target="_blank" rel="noopener" style="
      background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
      border: 2px solid #cbd5e1;
      border-left: 6px solid #0078d4;
      border-radius: 12px;
      padding: 1.25rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      text-decoration: none;
      transition: all 0.3s ease;
    " onmouseover="this.style.transform='translateX(4px)'; this.style.boxShadow='0 4px 12px rgba(0,120,212,0.2)'" onmouseout="this.style.transform='translateX(0)'; this.style.boxShadow='none'">
      <div>
        <div style="font-weight: 700; font-size: 1.15rem; color: #1a202c; margin-bottom: 0.25rem;">{{ resource.name }}</div>
        <div style="color: #718096; font-size: 0.95rem;">{{ resource.description }}</div>
      </div>
      <span style="color: #0078d4; font-size: 1.5rem;">â†’</span>
    </a>
    {% endfor %}
  </div>
</section>
{% endif %}

<!-- RELATED HUBS -->
{% if hub.related_hubs %}
<section style="max-width: 900px; margin: 0 auto 3rem; padding-top: 2rem; border-top: 2px solid #e2e8f0;">
  <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; color: #1a202c; text-align: center;">Explore Related Topics</h2>
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
    {% for related in hub.related_hubs %}
    <a href="{{ url_for('hub_page', slug=related.slug) }}" style="
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      text-decoration: none;
      transition: all 0.3s ease;
    " onmouseover="this.style.borderColor='#0078d4'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#e2e8f0'; this.style.transform='translateY(0)'">
      <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">{{ related.icon }}</div>
      <div style="font-weight: 700; font-size: 1.15rem; color: #1a202c; margin-bottom: 0.25rem;">{{ related.title }}</div>
      <div style="color: #718096; font-size: 0.9rem;">{{ related.post_count }} articles</div>
    </a>
    {% endfor %}
  </div>
</section>
{% endif %}

<!-- CTA SECTION -->
<section style="
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 3rem;
  margin-top: 4rem;
  border-radius: 16px;
  text-align: center;
  color: white;
">
  <h2 style="font-size: 2rem; margin: 0 0 1rem; color: white;">Want Deep Dives on {{ hub.category }}?</h2>
  <p style="font-size: 1.15rem; margin: 0 0 1.5rem; opacity: 0.95; max-width: 600px; margin-left: auto; margin-right: auto;">
    Join Azure architects getting practical {{ hub.category|lower }} strategies, real KQL queries, and solutions that actually work in production.
  </p>
  <a href="#subscribe" class="btn-subscribe">Subscribe for {{ hub.category }} Insights</a>
</section>

{% endblock %}
