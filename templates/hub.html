{% extends "base.html" %}

{% block content %}

<!-- HUB HERO SECTION -->
<div class="hub-hero" style="
  background: linear-gradient(135deg, {{ hub.gradient_start }} 0%, {{ hub.gradient_end }} 100%);
  padding: 3rem 0;
  margin: -1rem -1.5rem 3rem;
  color: white;
  text-align: center;
  border-radius: 0 0 16px 16px;
">
  <div class="wrap">
    <div style="display: inline-block; background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 8px; margin-bottom: 1rem; font-weight: 700; font-size: 0.9rem;">
      {{ hub.icon }} {{ hub.category }}
    </div>
    <h1 style="font-size: 2.75rem; margin: 0 0 1rem; font-weight: 800;">{{ hub.title }}</h1>
    <p style="font-size: 1.3rem; max-width: 700px; margin: 0 auto; opacity: 0.95; line-height: 1.6;">{{ hub.subtitle }}</p>
  </div>
</div>

<!-- PHILOSOPHY SECTION -->
<section style="max-width: 800px; margin: 0 auto 3rem;">
  <h2 style="font-size: 1.75rem; margin-bottom: 1rem; color: #1a202c;">{{ hub.philosophy_title }}</h2>
  <div style="font-size: 1.125rem; line-height: 1.8; color: #2d3748;">
    {{ hub.philosophy_content|safe }}
  </div>
</section>

<!-- CURATED CONTENT SECTIONS -->
{% for section in sections %}
<section style="max-width: 900px; margin: 0 auto 3rem;">
  <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem;">
    <span style="font-size: 2rem;">{{ section.icon }}</span>
    <div>
      <h2 style="font-size: 1.75rem; margin: 0; color: #1a202c;">{{ section.title }}</h2>
      <p style="margin: 0.25rem 0 0; color: #718096; font-size: 1rem;">{{ section.description }}</p>
    </div>
  </div>

  <div style="display: grid; gap: 1.5rem;">
    {% for post in section.posts %}
    <article style="
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;
      display: flex;
      gap: 1.5rem;
      align-items: start;
    " onmouseover="this.style.borderColor='#0078d4'; this.style.transform='translateX(4px)'" onmouseout="this.style.borderColor='#e2e8f0'; this.style.transform='translateX(0)'">
      
      {% if post.cover_url %}
      <div style="flex-shrink: 0; width: 120px; height: 80px; overflow: hidden; border-radius: 8px;">
        <img src="{{ url_for('static', filename=post.cover_url.lstrip('/').replace('static/', '')) }}" 
             alt="{{ post.title }}" 
             style="width: 100%; height: 100%; object-fit: cover;">
      </div>
      {% endif %}

      <div style="flex: 1;">
        <h3 style="margin: 0 0 0.5rem; font-size: 1.3rem;">
          <a href="{{ url_for('blog_post', slug=post.slug) }}" style="color: #1a202c; text-decoration: none;">
            {{ post.title }}
          </a>
        </h3>
        <p style="color: #718096; font-size: 0.95rem; margin: 0 0 0.75rem;">{{ post.date|ymd }}</p>
        <p style="color: #4a5568; line-height: 1.6; margin: 0;">{{ post.summary }}</p>
        
        {% if post.tags %}
        <div style="margin-top: 0.75rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
          {% for tag in post.tags[:3] %}
          <span class="tag-badge" style="font-size: 0.8rem;">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}
      </div>

      <div style="flex-shrink: 0;">
        <a href="{{ url_for('blog_post', slug=post.slug) }}" class="btn" style="white-space: nowrap;">Read ‚Üí</a>
      </div>
    </article>
    {% endfor %}
  </div>
</section>
{% endfor %}

<!-- GITHUB RESOURCES SECTION -->
{% if hub.github_resources %}
<section style="max-width: 900px; margin: 0 auto 3rem;">
  <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem;">
    <span style="font-size: 2rem;">üíª</span>
    <div>
      <h2 style="font-size: 1.75rem; margin: 0; color: #1a202c;">GitHub Resources</h2>
      <p style="margin: 0.25rem 0 0; color: #718096; font-size: 1rem;">Production-ready code and tools</p>
    </div>
  </div>

  <div style="display: grid; gap: 1rem;">
    {% for resource in hub.github_resources %}
    <a href="{{ resource.url }}" target="_blank" rel="noopener" style="
      background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
      border: 2px solid #cbd5e1;
      border-left: 6px solid #0078d4;
      border-radius: 12px;
      padding: 1.25rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      text-decoration: none;
      transition: all 0.3s ease;
    " onmouseover="this.style.transform='translateX(4px)'; this.style.boxShadow='0 4px 12px rgba(0,120,212,0.2)'" onmouseout="this.style.transform='translateX(0)'; this.style.boxShadow='none'">
      <div>
        <div style="font-weight: 700; font-size: 1.15rem; color: #1a202c; margin-bottom: 0.25rem;">{{ resource.name }}</div>
        <div style="color: #718096; font-size: 0.95rem;">{{ resource.description }}</div>
      </div>
      <span style="color: #0078d4; font-size: 1.5rem;">‚Üí</span>
    </a>
    {% endfor %}
  </div>
</section>
{% endif %}

<!-- RELATED HUBS -->
{% if hub.related_hubs %}
<section style="max-width: 900px; margin: 0 auto 3rem; padding-top: 2rem; border-top: 2px solid #e2e8f0;">
  <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; color: #1a202c; text-align: center;">Explore Related Topics</h2>
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
    {% for related in hub.related_hubs %}
    <a href="{{ url_for('hub_page', slug=related.slug) }}" style="
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      text-decoration: none;
      transition: all 0.3s ease;
    " onmouseover="this.style.borderColor='#0078d4'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#e2e8f0'; this.style.transform='translateY(0)'">
      <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">{{ related.icon }}</div>
      <div style="font-weight: 700; font-size: 1.15rem; color: #1a202c; margin-bottom: 0.25rem;">{{ related.title }}</div>
      <div style="color: #718096; font-size: 0.9rem;">{{ related.post_count }} articles</div>
    </a>
    {% endfor %}
  </div>
</section>
{% endif %}

<!-- SMART LEAD MAGNET CTA -->
{% set hub_slug = hub.slug %}
{% set cta_data = {
  'migration': {
    'icon': 'üìã',
    'title': 'Avoid the $2M Migration Disaster',
    'subtitle': 'Download the Azure Integration Assessment Framework',
    'bullets': [
      '55 questions that expose readiness gaps before you spend money on Azure Migrate',
      'Used by enterprise architects managing 100+ application migrations',
      'Prevents budget overruns, timeline disasters, and post-migration chaos'
    ],
    'cta_text': 'üì• Download Free Assessment (Excel)',
    'cta_url': '/static/downloads/Azure-Integration-Assessment-Framework.xlsx',
    'reassurance': 'No email required. Instant download.',
    'gradient_start': '#10b981',
    'gradient_end': '#059669',
    'cta_color': '#059669'
  },
  'governance': {
    'icon': 'üéØ',
    'title': 'Stop Begging for Compliance',
    'subtitle': 'Get the Azure Integration Assessment Framework',
    'bullets': [
      'Governance questions that expose institutional knowledge gaps before migration',
      'Compliance, licensing, ownership, and dependency assessment in one spreadsheet',
      'If you can\'t answer 50% with high confidence, you\'re not ready to migrate'
    ],
    'cta_text': 'üì• Download Governance Assessment (Free)',
    'cta_url': '/static/downloads/Azure-Integration-Assessment-Framework.xlsx',
    'reassurance': 'Excel template ‚Ä¢ No email required',
    'gradient_start': '#0078d4',
    'gradient_end': '#003d6b',
    'cta_color': '#0078d4'
  },
  'finops': {
    'icon': 'üí∞',
    'title': 'Before You Migrate, Know What It\'ll Cost',
    'subtitle': 'Download the Azure Integration Assessment Framework',
    'bullets': [
      'Cost questions that reveal whether Azure will actually save you money',
      'Azure cost vs. current cost conversation happens BEFORE migration, not after',
      'Most organizations discover cloud costs 3x more than expected‚Äîdon\'t be one of them'
    ],
    'cta_text': 'üì• Get the Cost Reality Check (Free)',
    'cta_url': '/static/downloads/Azure-Integration-Assessment-Framework.xlsx',
    'reassurance': 'Excel template ‚Ä¢ Instant download',
    'gradient_start': '#10b981',
    'gradient_end': '#059669',
    'cta_color': '#059669'
  },
  'kql': {
    'icon': 'üîç',
    'title': '45+ Production-Ready KQL Queries',
    'subtitle': 'Download the Complete KQL Query Library',
    'bullets': [
      'Copy-paste queries for Azure Resource Graph, Log Analytics, and cost analysis',
      'Inventory queries, compliance checks, cost breakdowns, and dependency mapping',
      'Every query tested in enterprise Azure environments with 31,000+ resources'
    ],
    'cta_text': 'üì• Download KQL Library (PDF)',
    'cta_url': '/static/downloads/KQL-Query-Library.pdf',
    'reassurance': 'No email required ‚Ä¢ 45+ queries',
    'gradient_start': '#7c3aed',
    'gradient_end': '#5b21b6',
    'cta_color': '#5b21b6'
  },
  'monitoring': {
    'icon': 'üìä',
    'title': 'Build Dashboards That Answer Questions',
    'subtitle': 'Get the KQL Query Library',
    'bullets': [
      'Queries that power Azure Monitor workbooks, dashboards, and alerting at scale',
      '45+ production queries for resource inventory, cost tracking, and compliance reporting',
      'Stop guessing what to monitor‚Äîuse queries that actually work in production'
    ],
    'cta_text': 'üì• Download Monitoring Queries (Free)',
    'cta_url': '/static/downloads/KQL-Query-Library.pdf',
    'reassurance': 'PDF format ‚Ä¢ Ready to use',
    'gradient_start': '#f59e0b',
    'gradient_end': '#d97706',
    'cta_color': '#d97706'
  },
  'automation': {
    'icon': '‚ö°',
    'title': 'Automate Azure Operations with KQL',
    'subtitle': 'Download the KQL Query Library',
    'bullets': [
      'Queries that power automation, inventory tools, and Logic App workflows',
      'Stop building custom PowerShell scripts for everything',
      'Use KQL to query Azure Resource Graph and trigger automation based on real resource state'
    ],
    'cta_text': 'üì• Get Automation Queries (Free)',
    'cta_url': '/static/downloads/KQL-Query-Library.pdf',
    'reassurance': '45+ queries ‚Ä¢ PDF download',
    'gradient_start': '#ef4444',
    'gradient_end': '#b91c1c',
    'cta_color': '#b91c1c'
  },
  'arc': {
    'icon': 'üåâ',
    'title': 'Manage Hybrid Infrastructure Like Azure',
    'subtitle': 'Get the Azure Integration Assessment Framework',
    'bullets': [
      'Inventory reconciliation checklist that prevents Arc ghost registration disasters',
      'Dependency gaps and installation media issues exposed before Arc deployment',
      'Reconcile VMware inventory with Arc before governance data becomes fiction'
    ],
    'cta_text': 'üì• Download Hybrid Assessment (Free)',
    'cta_url': '/static/downloads/Azure-Integration-Assessment-Framework.xlsx',
    'reassurance': 'Excel template ‚Ä¢ No email required',
    'gradient_start': '#8b5cf6',
    'gradient_end': '#6d28d9',
    'cta_color': '#6d28d9'
  },
  'ai': {
    'icon': 'ü§ñ',
    'title': 'AI Won\'t Replace You‚ÄîBut You Need the Right Tools',
    'subtitle': 'Download the KQL Query Library',
    'bullets': [
      'The queries AI assistants can\'t write because they don\'t understand your Azure environment',
      '45+ production KQL queries for cost analysis, compliance, and inventory',
      'AI can help you modify them, but you need working templates first'
    ],
    'cta_text': 'üì• Get Production Queries (Free)',
    'cta_url': '/static/downloads/KQL-Query-Library.pdf',
    'reassurance': 'PDF library ‚Ä¢ Ready to use with AI',
    'gradient_start': '#ec4899',
    'gradient_end': '#9333ea',
    'cta_color': '#9333ea'
  }
}[hub_slug] %}

<section style="
  background: linear-gradient(135deg, {{ cta_data.gradient_start }} 0%, {{ cta_data.gradient_end }} 100%);
  padding: 3rem 2rem;
  margin: 4rem 0;
  border-radius: 16px;
  text-align: center;
  color: white;
  box-shadow: 0 10px 40px rgba(0,0,0,0.1);
">
  <div style="max-width: 700px; margin: 0 auto;">
    <div style="font-size: 3rem; margin-bottom: 1rem;">{{ cta_data.icon }}</div>
    <h2 style="font-size: 2.25rem; margin: 0 0 1rem; color: white; font-weight: 700;">
      {{ cta_data.title }}
    </h2>
    <p style="font-size: 1.2rem; margin: 0 0 1.5rem; opacity: 0.95; line-height: 1.6;">
      {{ cta_data.subtitle }}
    </p>
    <ul style="text-align: left; max-width: 600px; margin: 0 auto 2rem; list-style: none; padding: 0;">
      {% for bullet in cta_data.bullets %}
      <li style="font-size: 1rem; margin-bottom: 0.75rem; opacity: 0.95; padding-left: 1.5rem; position: relative;">
        <span style="position: absolute; left: 0; top: 0;">‚úì</span>
        {{ bullet }}
      </li>
      {% endfor %}
    </ul>
    <a href="{{ cta_data.cta_url }}" download style="
      display: inline-block;
      background: white;
      color: {{ cta_data.cta_color }};
      padding: 1rem 2.5rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)'">
      {{ cta_data.cta_text }}
    </a>
    <p style="font-size: 0.9rem; margin-top: 1rem; opacity: 0.85;">
      {{ cta_data.reassurance }}
    </p>
  </div>
</section>

<!-- SUBSCRIPTION CTA -->
<section style="
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 3rem;
  margin-top: 4rem;
  border-radius: 16px;
  text-align: center;
  color: white;
">
  <h2 style="font-size: 2rem; margin: 0 0 1rem; color: white;">Want Deep Dives on {{ hub.category }}?</h2>
  <p style="font-size: 1.15rem; margin: 0 0 1.5rem; opacity: 0.95; max-width: 600px; margin-left: auto; margin-right: auto;">
    Join Azure architects getting practical {{ hub.category|lower }} strategies, real KQL queries, and solutions that actually work in production.
  </p>
  <a href="#subscribe" class="btn-subscribe">Subscribe for {{ hub.category }} Insights</a>
</section>

{% endblock %}
