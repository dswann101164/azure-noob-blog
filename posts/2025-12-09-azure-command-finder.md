---
title: "Azure Command Finder (Interactive Tool)"
date: 2025-12-09
summary: "Interactive troubleshooting tool - select your Azure problem, get the exact commands to fix it. Copy-paste ready workflows for RDP issues, domain join, Group Policy, costs, and more."
tags: ["azure", "troubleshooting", "commands", "tools", "powershell", "azure-cli"]
cover: "/static/images/hero/azure-admin-starter-kit.png"
hub: ai
related_posts:
  - will-ai-replace-azure-administrators-by-2030
  - the-ai-admin
  - three-ai-roles
---
**Interactive troubleshooting tool** — select your problem, get step-by-step commands with copy-paste buttons.


This guide is part of our [AI-Assisted Azure Operations hub](/hub/ai/) exploring how AI tools transform cloud administration and productivity workflows.

<style>
.command-finder {
    margin: 2rem 0;
}

.button-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin: 2rem 0;
}

.problem-btn {
    padding: 1.25rem;
    background: #f5f5f5;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
    font-size: 1rem;
}

.problem-btn:hover {
    background: #e8f4fd;
    border-color: #0078d4;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,120,212,0.2);
}

.problem-btn.active {
    background: #0078d4;
    color: white;
    border-color: #0078d4;
}

.problem-title {
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.problem-desc {
    font-size: 0.9rem;
    opacity: 0.7;
}

.solution-box {
    display: none;
    background: #f8f9fa;
    border-left: 4px solid #0078d4;
    padding: 1.5rem;
    border-radius: 4px;
    margin-top: 1.5rem;
}

.solution-box.active {
    display: block;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.solution-box h3 {
    color: #0078d4;
    margin-bottom: 1rem;
}

.command-step {
    background: #2d2d2d;
    color: #f0f0f0;
    padding: 1rem;
    border-radius: 4px;
    margin: 0.75rem 0;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    position: relative;
    overflow-x: auto;
}

.command-step pre {
    margin: 0;
    white-space: pre-wrap;
}

.step-number {
    display: inline-block;
    background: #0078d4;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    text-align: center;
    line-height: 24px;
    font-size: 0.8rem;
    font-weight: bold;
    margin-right: 0.5rem;
}

.step-description {
    margin-bottom: 0.5rem;
    color: #333;
}

.copy-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: #0078d4;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.8rem;
    transition: background 0.3s;
}

.copy-btn:hover {
    background: #005a9e;
}

.tip {
    background: #fff3cd;
    border-left: 4px solid #ffc107;
    padding: 1rem;
    margin: 1rem 0;
    border-radius: 4px;
}

.tip strong {
    color: #856404;
}
</style>

<div class="command-finder">
    <h2>Choose Your Problem:</h2>
    <div class="button-grid" id="problemButtons">
        <!-- Buttons generated by JavaScript -->
    </div>
    
    <div id="solutionArea">
        <!-- Solutions displayed here -->
    </div>
</div>

<script>
const problems = {
    'rdp-failed': {
        title: 'Can\'t RDP to VM',
        desc: 'RDP connection refused or times out',
        solution: {
            title: 'RDP Troubleshooting Workflow',
            steps: [
                {
                    desc: 'Check NSG inbound rules for port 3389:',
                    command: 'az network nsg rule list --resource-group MyRG --nsg-name MyNSG --query "[?destinationPortRange==\'3389\'].{Name:name, Access:access, Priority:priority}" --output table'
                },
                {
                    desc: 'Test RDP port connectivity:',
                    command: 'Test-NetConnection -ComputerName <vm-ip> -Port 3389'
                },
                {
                    desc: 'Check VM is running:',
                    command: 'az vm get-instance-view --resource-group MyRG --name MyVM --query instanceView.statuses[1] --output table'
                },
                {
                    desc: 'Use Azure Serial Console (if RDP completely fails):',
                    command: '# In Azure Portal: VM > Support + troubleshooting > Serial Console\n# Then run:\nsc query TermService\nsc start TermService\nnetsh advfirewall firewall set rule group="remote desktop" new enable=Yes'
                }
            ],
            tip: 'If Serial Console shows "TermService" is stopped, that\'s your issue. Start the service and enable the firewall rule.'
        }
    },
    'domain-join': {
        title: 'Domain Join Fails',
        desc: 'VM won\'t join Active Directory',
        solution: {
            title: 'Active Directory Domain Join Troubleshooting',
            steps: [
                {
                    desc: 'Verify DNS points to domain controller:',
                    command: 'Get-DnsClientServerAddress\nResolve-DnsName dc01.contoso.com\nnslookup _ldap._tcp.dc._msdcs.CONTOSO.COM'
                },
                {
                    desc: 'Test connectivity to DC on required ports:',
                    command: 'Test-NetConnection dc01.contoso.com -Port 389  # LDAP\nTest-NetConnection dc01.contoso.com -Port 88   # Kerberos\nTest-NetConnection dc01.contoso.com -Port 445  # SMB'
                },
                {
                    desc: 'Check time sync (must be within 5 minutes):',
                    command: 'w32tm /query /status\nw32tm /resync /force'
                },
                {
                    desc: 'Attempt domain join:',
                    command: 'Add-Computer -DomainName CONTOSO.COM -Credential (Get-Credential) -Restart'
                },
                {
                    desc: 'If join succeeded, verify:',
                    command: 'Test-ComputerSecureChannel\n(Get-WmiObject Win32_ComputerSystem).Domain'
                }
            ],
            tip: 'Most domain join failures are DNS issues. Make sure VNet DNS is set to your DC IP, not Azure DNS (168.63.129.16).'
        }
    },
    'group-policy': {
        title: 'Group Policy Not Applying',
        desc: 'GP settings won\'t apply to Azure VM',
        solution: {
            title: 'Group Policy Troubleshooting',
            steps: [
                {
                    desc: 'Force Group Policy update:',
                    command: 'gpupdate /force'
                },
                {
                    desc: 'Check what policies are applied:',
                    command: 'gpresult /r\ngpresult /h C:\\Temp\\GPReport.html'
                },
                {
                    desc: 'Verify domain trust is intact:',
                    command: 'Test-ComputerSecureChannel\nnltest /sc_query:CONTOSO.COM'
                },
                {
                    desc: 'Check Group Policy event logs for errors:',
                    command: 'Get-EventLog -LogName System -Source "Microsoft-Windows-GroupPolicy" -EntryType Error -Newest 20'
                },
                {
                    desc: 'Verify VM is in correct OU:',
                    command: 'Get-ADComputer $env:COMPUTERNAME | Select-Object DistinguishedName'
                }
            ],
            tip: 'Group Policy requires domain connectivity and correct OU placement. If trust is broken, use: Test-ComputerSecureChannel -Repair'
        }
    },
    'high-cost': {
        title: 'Unexpected High Costs',
        desc: 'Azure bill higher than expected',
        solution: {
            title: 'Cost Investigation with KQL',
            steps: [
                {
                    desc: 'Find top 10 resources by cost (last 30 days):',
                    command: `// Run in Azure Resource Graph Explorer
Resources
| where type =~ 'microsoft.compute/virtualmachines'
| join kind=leftouter (
    CostManagement
    | where TimeGenerated >= ago(30d)
    | summarize TotalCost = sum(CostInBillingCurrency) by ResourceId
) on $left.id == $right.ResourceId
| project name, resourceGroup, location, TotalCost
| order by TotalCost desc
| take 10`
                },
                {
                    desc: 'Find VMs running 24/7 that could be deallocated:',
                    command: `Resources
| where type =~ 'microsoft.compute/virtualmachines'
| where tags.environment =~ 'dev' or tags.environment =~ 'test'
| where properties.extended.instanceView.powerState.code == 'PowerState/running'
| project name, resourceGroup, tags.environment, tags.owner`
                },
                {
                    desc: 'Check for unattached disks (wasting money):',
                    command: `az disk list --query "[?managedBy==null].{Name:name, ResourceGroup:resourceGroup, Size:diskSizeGb, SKU:sku.name}" --output table`
                }
            ],
            tip: 'Most cost spikes come from: VMs left running, over-provisioned VM sizes, or orphaned disks. Start with the KQL queries above.'
        }
    },
    'vm-wont-start': {
        title: 'VM Won\'t Start',
        desc: 'VM stuck in "Starting" state',
        solution: {
            title: 'VM Startup Troubleshooting',
            steps: [
                {
                    desc: 'Check VM status and any error messages:',
                    command: 'az vm get-instance-view --resource-group MyRG --name MyVM --query "instanceView.statuses[*].[code, displayStatus, message]" --output table'
                },
                {
                    desc: 'Review Azure Activity Log for errors:',
                    command: 'az monitor activity-log list --resource-group MyRG --offset 1h --query "[?contains(resourceId, \'MyVM\')]" --output table'
                },
                {
                    desc: 'Check boot diagnostics:',
                    command: '# In Azure Portal: VM > Support + troubleshooting > Boot diagnostics\n# Or via CLI:\naz vm boot-diagnostics get-boot-log --resource-group MyRG --name MyVM'
                },
                {
                    desc: 'If disk issue, check disk state:',
                    command: 'az disk show --resource-group MyRG --name MyVM-osdisk --query "{Name:name, State:diskState, Size:diskSizeGb}" --output table'
                },
                {
                    desc: 'Try deallocating and starting again:',
                    command: 'az vm deallocate --resource-group MyRG --name MyVM\naz vm start --resource-group MyRG --name MyVM'
                }
            ],
            tip: 'Check boot diagnostics first - it often shows the exact error preventing startup (missing disk, boot config issue, etc.).'
        }
    },
    'linux-domain-join': {
        title: 'Linux VM Domain Join',
        desc: 'Join Linux VM to Active Directory',
        solution: {
            title: 'Linux Active Directory Domain Join',
            steps: [
                {
                    desc: 'Install required packages (Ubuntu/Debian):',
                    command: 'sudo apt-get update\nsudo apt-get install -y realmd sssd sssd-tools adcli samba-common-bin krb5-user'
                },
                {
                    desc: 'Configure DNS to point to DC:',
                    command: 'sudo systemctl stop systemd-resolved\nsudo systemctl disable systemd-resolved\necho "nameserver 10.0.0.4" | sudo tee /etc/resolv.conf'
                },
                {
                    desc: 'Discover the domain:',
                    command: 'sudo realm discover CONTOSO.COM'
                },
                {
                    desc: 'Join the domain:',
                    command: 'sudo realm join --user=administrator CONTOSO.COM'
                },
                {
                    desc: 'Verify domain join:',
                    command: 'sudo realm list\ngetent passwd username@CONTOSO.COM\nid username@CONTOSO.COM'
                },
                {
                    desc: 'Allow domain admins sudo access:',
                    command: 'echo "%domain\\\\ admins@CONTOSO.COM ALL=(ALL) ALL" | sudo tee /etc/sudoers.d/domain-admins'
                }
            ],
            tip: 'Most Linux domain join issues are DNS-related. Ensure /etc/resolv.conf points to your DC, not Azure DNS.'
        }
    }
};

// Generate problem buttons
const buttonContainer = document.getElementById('problemButtons');
Object.keys(problems).forEach(key => {
    const problem = problems[key];
    const btn = document.createElement('button');
    btn.className = 'problem-btn';
    btn.setAttribute('data-problem', key);
    btn.innerHTML = `
        <div class="problem-title">${problem.title}</div>
        <div class="problem-desc">${problem.desc}</div>
    `;
    btn.onclick = () => showSolution(key);
    buttonContainer.appendChild(btn);
});

function showSolution(problemKey) {
    // Update active button
    document.querySelectorAll('.problem-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector(`[data-problem="${problemKey}"]`).classList.add('active');

    // Build solution HTML
    const problem = problems[problemKey];
    const solution = problem.solution;
    
    let html = `
        <div class="solution-box active">
            <h3>${solution.title}</h3>
    `;
    
    solution.steps.forEach((step, index) => {
        html += `
            <div class="step-description">
                <span class="step-number">${index + 1}</span>
                <strong>${step.desc}</strong>
            </div>
            <div class="command-step">
                <button class="copy-btn" onclick="copyCommand(this)">Copy</button>
                <pre>${step.command}</pre>
            </div>
        `;
    });
    
    if (solution.tip) {
        html += `
            <div class="tip">
                <strong>💡 Pro Tip:</strong> ${solution.tip}
            </div>
        `;
    }
    
    html += `</div>`;
    
    document.getElementById('solutionArea').innerHTML = html;
    
    // Scroll to solution
    document.getElementById('solutionArea').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function copyCommand(button) {
    const commandText = button.nextElementSibling.textContent;
    navigator.clipboard.writeText(commandText).then(() => {
        const originalText = button.textContent;
        button.textContent = '✓ Copied!';
        button.style.background = '#28a745';
        setTimeout(() => {
            button.textContent = originalText;
            button.style.background = '#0078d4';
        }, 2000);
    });
}
</script>

---

## About This Tool

This interactive command finder provides step-by-step troubleshooting workflows for common Azure problems. Each workflow includes:

- **Exact commands** to run (PowerShell, Azure CLI, Bash)
- **Copy-paste buttons** for quick execution
- **Expected output** and what to look for
- **Pro tips** from production experience

All commands are tested in a production banking environment with 31,000+ Azure resources.

---

## Related Resources

- [50 Windows Commands for Azure](/blog/50-windows-commands-azure/) - Complete command reference
- [50 Linux Commands for Azure](/blog/50-linux-commands-azure/) - Full Linux guide
- [Azure Admin Starter Kit](/blog/starter-kit/) - Get all resources in one bundle
- [KQL Cheat Sheet](/blog/kql-cheat-sheet-complete/) - Query library for Azure Resource Graph
